{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getSalesSummary,getDoctorSalesReport,getServiceSalesReport,getBillsByDate,getBillsByMonth,getBillsByDoctor,getBillsByDateRange,getBillById,listBillItems,getDoctorById}from'../../api';import{formatCurrency,formatDate,formatDateTime}from'../../utils/format';import*as XLSX from'xlsx';import jsPDF from'jspdf';import autoTable from'jspdf-autotable';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const Reports=()=>{var _summary$total_discou,_summary$net_amount;const[activeTab,setActiveTab]=useState('sales');const[startDate,setStartDate]=useState('');const[endDate,setEndDate]=useState('');const[groupBy,setGroupBy]=useState('day');const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[salesData,setSalesData]=useState([]);const[doctorData,setDoctorData]=useState([]);const[serviceData,setServiceData]=useState([]);// Deep dive states\nconst[showDeepDive,setShowDeepDive]=useState(false);const[deepDiveData,setDeepDiveData]=useState([]);const[deepDiveTitle,setDeepDiveTitle]=useState('');// Bill detail modal states\nconst[showBillDetail,setShowBillDetail]=useState(false);const[selectedBill,setSelectedBill]=useState(null);const[billItems,setBillItems]=useState([]);const[loadingBillDetail,setLoadingBillDetail]=useState(false);// Doctor-Service analysis\nconst[doctorServiceData,setDoctorServiceData]=useState([]);// Set default dates (today and 30 days ago)\nuseEffect(()=>{const today=new Date();const thirtyDaysAgo=new Date(today);thirtyDaysAgo.setDate(today.getDate()-30);setEndDate(today.toISOString().split('T')[0]);setStartDate(thirtyDaysAgo.toISOString().split('T')[0]);},[]);const fetchReports=async()=>{if(!startDate||!endDate){setError('Please select both start and end dates');return;}setLoading(true);setError(null);try{if(activeTab==='sales'){const data=await getSalesSummary(startDate,endDate,groupBy);setSalesData(data);}else if(activeTab==='doctor'){const data=await getDoctorSalesReport(startDate,endDate);setDoctorData(data);}else if(activeTab==='service'){const data=await getServiceSalesReport(startDate,endDate);setServiceData(data);}else if(activeTab==='doctorServices'){// Fetch doctor-service analysis\nawait fetchDoctorServiceAnalysis();}}catch(e){console.error('Error fetching reports:',e);setError(e.message||'Failed to fetch report data');}finally{setLoading(false);}};const fetchDoctorServiceAnalysis=async()=>{try{const bills=await getBillsByDate(startDate);// Get all bills in date range\n// You'll need to implement a proper API function to get bills with items by date range\n// For now, this is a placeholder\nconst doctorServiceMap=new Map();// This is simplified - in production, you'd need a dedicated API endpoint\nsetDoctorServiceData([]);}catch(e){console.error('Error fetching doctor-service analysis:',e);}};useEffect(()=>{if(startDate&&endDate){fetchReports();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[activeTab,groupBy]);const handleQuickSelect=days=>{const today=new Date();const pastDate=new Date(today);pastDate.setDate(today.getDate()-days);setEndDate(today.toISOString().split('T')[0]);setStartDate(pastDate.toISOString().split('T')[0]);};const getTotalSummary=()=>{if(activeTab==='sales'){return{total_bills:salesData.reduce((sum,d)=>sum+d.total_bills,0),total_amount:salesData.reduce((sum,d)=>sum+d.total_amount,0),total_discount:salesData.reduce((sum,d)=>sum+d.total_discount,0),net_amount:salesData.reduce((sum,d)=>sum+d.net_amount,0)};}else if(activeTab==='doctor'){return{total_bills:doctorData.reduce((sum,d)=>sum+d.total_bills,0),total_amount:doctorData.reduce((sum,d)=>sum+d.total_amount,0),total_discount:doctorData.reduce((sum,d)=>sum+d.total_discount,0),net_amount:doctorData.reduce((sum,d)=>sum+d.net_amount,0)};}else if(activeTab==='service'){return{total_quantity:serviceData.reduce((sum,d)=>sum+d.total_quantity,0),total_amount:serviceData.reduce((sum,d)=>sum+d.total_amount,0)};}return null;};const summary=getTotalSummary();// Export to Excel\nconst exportToExcel=()=>{let data=[];let sheetName='';if(activeTab==='sales'){sheetName='Sales Summary';data=salesData.map(row=>({Date:groupBy==='month'?new Date(row.date+'-01').toLocaleDateString('en-IN',{year:'numeric',month:'long'}):formatDate(row.date),'Total Bills':row.total_bills,'Total Amount':row.total_amount,'Discount':row.total_discount,'Net Amount':row.net_amount}));}else if(activeTab==='doctor'){sheetName='Doctor Sales';data=doctorData.map(row=>({'Doctor Name':row.doctor_name,'Total Bills':row.total_bills,'Total Amount':row.total_amount,'Discount':row.total_discount,'Net Amount':row.net_amount}));}else if(activeTab==='service'){sheetName='Service Sales';data=serviceData.map(row=>({'Service Name':row.service_name,'Total Quantity':row.total_quantity,'Total Sales':row.total_amount}));}const worksheet=XLSX.utils.json_to_sheet(data);const workbook=XLSX.utils.book_new();XLSX.utils.book_append_sheet(workbook,worksheet,sheetName);XLSX.writeFile(workbook,\"\".concat(sheetName,\"_\").concat(startDate,\"_to_\").concat(endDate,\".xlsx\"));};// Export Complete Billing Data to Excel\nconst exportCompleteBillingDataToExcel=async()=>{setLoading(true);try{// Fetch all bills in the selected date range\nconst allBills=await getBillsByDateRange(startDate,endDate);// Export to Excel\nconst data=allBills.map(bill=>({'Bill Number':bill.bill_number,'Date':formatDateTime(bill.created_at),'Patient':bill.patient_name||bill.guest_name||'N/A','Doctor':bill.doctor_name||'N/A','Total Amount':bill.total_amount,'Discount':bill.discount,'Net Amount':bill.net_amount,'Payment Mode':bill.mode_of_payment,'Status':bill.status}));const worksheet=XLSX.utils.json_to_sheet(data);const workbook=XLSX.utils.book_new();XLSX.utils.book_append_sheet(workbook,worksheet,'Complete Billing Data');XLSX.writeFile(workbook,\"Complete_Billing_Data_\".concat(startDate,\"_to_\").concat(endDate,\".xlsx\"));}catch(e){console.error('Error exporting complete billing data:',e);setError(e.message||'Failed to export complete billing data');}finally{setLoading(false);}};// Export Complete Billing Data to PDF\nconst exportCompleteBillingDataToPDF=async()=>{setLoading(true);try{// Fetch all bills in the selected date range\nconst allBills=await getBillsByDateRange(startDate,endDate);// Export to PDF\nconst doc=new jsPDF();doc.setFontSize(16);doc.text('Complete Billing Data',14,15);doc.setFontSize(10);doc.text(\"Period: \".concat(formatDate(startDate),\" to \").concat(formatDate(endDate)),14,22);const headers=[['Bill #','Date','Patient','Doctor','Total','Discount','Net','Payment','Status']];const data=allBills.map(bill=>[bill.bill_number,formatDateTime(bill.created_at),bill.patient_name||bill.guest_name||'N/A',bill.doctor_name||'N/A',formatCurrency(bill.total_amount),formatCurrency(bill.discount),formatCurrency(bill.net_amount),bill.mode_of_payment,bill.status]);autoTable(doc,{head:headers,body:data,startY:28,theme:'grid',headStyles:{fillColor:[41,128,185],halign:'center'},styles:{fontSize:8},columnStyles:{0:{halign:'left',cellWidth:20},1:{halign:'left',cellWidth:30},2:{halign:'left',cellWidth:30},3:{halign:'left',cellWidth:25},4:{halign:'right',cellWidth:22},5:{halign:'right',cellWidth:22},6:{halign:'right',cellWidth:22},7:{halign:'center',cellWidth:20},8:{halign:'center',cellWidth:18}}});doc.save(\"Complete_Billing_Data_\".concat(startDate,\"_to_\").concat(endDate,\".pdf\"));}catch(e){console.error('Error exporting complete billing data to PDF:',e);setError(e.message||'Failed to export complete billing data to PDF');}finally{setLoading(false);}};// Export to PDF\nconst exportToPDF=()=>{const doc=new jsPDF();let title='';let headers=[];let data=[];if(activeTab==='sales'){title='Sales Summary Report';headers=[['Date','Bills','Total Amount','Discount','Net Amount']];data=salesData.map(row=>[groupBy==='month'?new Date(row.date+'-01').toLocaleDateString('en-IN',{year:'numeric',month:'long'}):formatDate(row.date),row.total_bills.toString(),formatCurrency(row.total_amount),formatCurrency(row.total_discount),formatCurrency(row.net_amount)]);}else if(activeTab==='doctor'){title='Doctor Sales Report';headers=[['Doctor Name','Bills','Total Amount','Discount','Net Amount']];data=doctorData.map(row=>[row.doctor_name,row.total_bills.toString(),formatCurrency(row.total_amount),formatCurrency(row.total_discount),formatCurrency(row.net_amount)]);}else if(activeTab==='service'){title='Service Sales Report';headers=[['Service Name','Quantity','Total Sales']];data=serviceData.map(row=>[row.service_name,row.total_quantity.toString(),formatCurrency(row.total_amount)]);}doc.setFontSize(16);doc.text(title,14,15);doc.setFontSize(10);doc.text(\"Period: \".concat(formatDate(startDate),\" to \").concat(formatDate(endDate)),14,22);autoTable(doc,{head:headers,body:data,startY:28,theme:'grid',headStyles:{fillColor:[41,128,185],halign:'center'},styles:{fontSize:9},columnStyles:activeTab==='sales'||activeTab==='doctor'?{0:{halign:'left'},1:{halign:'right'},2:{halign:'right'},3:{halign:'right'},4:{halign:'right'}}:{0:{halign:'left'},1:{halign:'right'},2:{halign:'right'}}});doc.save(\"\".concat(title.replace(/ /g,'_'),\"_\").concat(startDate,\"_to_\").concat(endDate,\".pdf\"));};// Deep dive handlers\nconst handleDateClick=async date=>{setLoading(true);try{let bills;if(groupBy==='month'){const[year,month]=date.split('-').map(Number);bills=await getBillsByMonth(year,month);setDeepDiveTitle(\"Bills for \".concat(new Date(year,month-1).toLocaleDateString('en-IN',{year:'numeric',month:'long'})));}else{bills=await getBillsByDate(date);setDeepDiveTitle(\"Bills for \".concat(formatDate(date)));}setDeepDiveData(bills);setShowDeepDive(true);}catch(e){console.error('Error fetching bills:',e);setError(e.message||'Failed to fetch bills');}finally{setLoading(false);}};const handleDoctorClick=async(doctorId,doctorName)=>{setLoading(true);try{const bills=await getBillsByDoctor(doctorId,startDate,endDate);setDeepDiveData(bills);setDeepDiveTitle(\"Bills by \".concat(doctorName));setShowDeepDive(true);}catch(e){console.error('Error fetching bills:',e);setError(e.message||'Failed to fetch bills');}finally{setLoading(false);}};// Export deep dive data\nconst exportDeepDiveToExcel=()=>{const data=deepDiveData.map(bill=>({'Bill Number':bill.bill_number,'Date':formatDateTime(bill.created_at),'Patient':bill.patient_name||bill.guest_name||'N/A','Doctor':bill.doctor_name||'N/A','Total Amount':bill.total_amount,'Discount':bill.discount,'Net Amount':bill.net_amount,'Payment Mode':bill.mode_of_payment,'Status':bill.status}));const worksheet=XLSX.utils.json_to_sheet(data);const workbook=XLSX.utils.book_new();XLSX.utils.book_append_sheet(workbook,worksheet,'Bill Details');XLSX.writeFile(workbook,\"\".concat(deepDiveTitle.replace(/ /g,'_'),\".xlsx\"));};const exportDeepDiveToPDF=()=>{const doc=new jsPDF();doc.setFontSize(16);doc.text(deepDiveTitle,14,15);doc.setFontSize(10);doc.text(\"Generated: \".concat(new Date().toLocaleDateString('en-IN')),14,22);const headers=[['Bill #','Date','Patient','Doctor','Total','Discount','Net','Status']];const data=deepDiveData.map(bill=>[bill.bill_number,formatDateTime(bill.created_at),bill.patient_name||bill.guest_name||'N/A',bill.doctor_name||'N/A',formatCurrency(bill.total_amount),formatCurrency(bill.discount),formatCurrency(bill.net_amount),bill.status]);autoTable(doc,{head:headers,body:data,startY:28,theme:'grid',headStyles:{fillColor:[41,128,185],halign:'center'},styles:{fontSize:8},columnStyles:{0:{halign:'left',cellWidth:20},1:{halign:'left',cellWidth:30},2:{halign:'left',cellWidth:30},3:{halign:'left',cellWidth:25},4:{halign:'right',cellWidth:22},5:{halign:'right',cellWidth:22},6:{halign:'right',cellWidth:22},7:{halign:'center',cellWidth:18}}});doc.save(\"\".concat(deepDiveTitle.replace(/ /g,'_'),\".pdf\"));};const handleViewBill=async billId=>{setLoadingBillDetail(true);try{const[bill,items]=await Promise.all([getBillById(billId),listBillItems(billId)]);if(bill){// Fetch doctor details if doctor_id exists\nif(bill.doctor_id){const doctor=await getDoctorById(bill.doctor_id);bill.opd_fees=(doctor===null||doctor===void 0?void 0:doctor.opd_fees)||0;}setSelectedBill(bill);setBillItems(items);setShowBillDetail(true);}}catch(e){console.error('Error loading bill details:',e);setError(e.message||'Failed to load bill details');}finally{setLoadingBillDetail(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[showBillDetail&&selectedBill&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[100] p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold\",children:[\"Bill Details - \",selectedBill.bill_number]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowBillDetail(false);setSelectedBill(null);setBillItems([]);},className:\"text-gray-500 hover:text-gray-700 text-2xl font-bold\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 overflow-auto flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 mb-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Patient:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:selectedBill.patient_name||selectedBill.guest_name||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Doctor:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:selectedBill.doctor_name||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Date:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:formatDateTime(selectedBill.created_at)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Payment Mode:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:selectedBill.mode_of_payment})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Status:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-xs font-medium \".concat(selectedBill.status==='paid'?'bg-green-100 text-green-800':selectedBill.status==='pending'?'bg-yellow-100 text-yellow-800':'bg-gray-100 text-gray-800'),children:selectedBill.status})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold mb-3\",children:\"Bill Items\"}),billItems.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-left border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2\",children:\"Service\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 text-right\",children:\"Qty\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 text-right\",children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 text-right\",children:\"Total\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[billItems.map((item,idx)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2\",children:item.service_name||'Service'}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 text-right\",children:item.quantity}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 text-right\",children:formatCurrency(item.price)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 text-right\",children:formatCurrency(item.total)})]},idx)),selectedBill.doctor_id&&/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b bg-blue-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 font-medium\",children:\"Consultation Fee\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 text-right\",children:\"1\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 text-right\",children:formatCurrency(selectedBill.opd_fees||0)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 text-right\",children:formatCurrency(selectedBill.opd_fees||0)})]})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-4\",children:\"No items found\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-4 mt-4 space-y-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Amount:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:formatCurrency(selectedBill.total_amount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-red-600\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Discount:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[\"-\",formatCurrency(selectedBill.discount)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-lg font-bold border-t pt-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Net Amount:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(selectedBill.net_amount)})]})]})]})]})}),showDeepDive&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:deepDiveTitle}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:exportDeepDiveToExcel,className:\"btn btn-secondary px-3 py-1 text-sm flex items-center gap-1\",title:\"Export to Excel\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})}),\"Excel\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportDeepDiveToPDF,className:\"btn btn-secondary px-3 py-1 text-sm flex items-center gap-1\",title:\"Export to PDF\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"})}),\"PDF\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDeepDive(false),className:\"text-gray-500 hover:text-gray-700 text-2xl font-bold ml-2\",children:\"\\xD7\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 overflow-auto flex-1\",children:deepDiveData.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-left text-gray-500 border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Bill Number\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Patient\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Doctor\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right w-24\",children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right w-24\",children:\"Discount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right w-24\",children:\"Net Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Payment\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:deepDiveData.map(bill=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-100 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewBill(bill.id),className:\"text-brand-600 hover:text-brand-800 hover:underline font-medium cursor-pointer\",children:bill.bill_number})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:formatDateTime(bill.created_at)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:bill.patient_name||bill.guest_name||'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:bill.doctor_name||'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right\",children:formatCurrency(bill.total_amount)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right text-red-600\",children:formatCurrency(bill.discount)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right font-semibold\",children:formatCurrency(bill.net_amount)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:bill.mode_of_payment})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-xs \".concat(bill.status==='paid'?'bg-green-100 text-green-800':bill.status==='pending'?'bg-yellow-100 text-yellow-800':'bg-gray-100 text-gray-800'),children:bill.status})})]},bill.id))}),/*#__PURE__*/_jsx(\"tfoot\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"font-semibold border-t-2\",children:[/*#__PURE__*/_jsx(\"td\",{colSpan:4,className:\"py-2 pr-4 text-right\",children:\"Total:\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right\",children:formatCurrency(deepDiveData.reduce((sum,b)=>sum+b.total_amount,0))}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right text-red-600\",children:formatCurrency(deepDiveData.reduce((sum,b)=>sum+b.discount,0))}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right\",children:formatCurrency(deepDiveData.reduce((sum,b)=>sum+b.net_amount,0))}),/*#__PURE__*/_jsx(\"td\",{colSpan:2})]})})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500 py-8\",children:\"No bills found\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Reports\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-4 border-b\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 font-medium \".concat(activeTab==='sales'?'border-b-2 border-brand-500 text-brand-600':'text-gray-500 hover:text-gray-700'),onClick:()=>setActiveTab('sales'),children:\"Sales Summary\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 font-medium \".concat(activeTab==='doctor'?'border-b-2 border-brand-500 text-brand-600':'text-gray-500 hover:text-gray-700'),onClick:()=>setActiveTab('doctor'),children:\"Doctor Sales\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 font-medium \".concat(activeTab==='service'?'border-b-2 border-brand-500 text-brand-600':'text-gray-500 hover:text-gray-700'),onClick:()=>setActiveTab('service'),children:\"Service Sales\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 font-medium \".concat(activeTab==='doctorServices'?'border-b-2 border-brand-500 text-brand-600':'text-gray-500 hover:text-gray-700'),onClick:()=>setActiveTab('doctorServices'),children:\"Doctor-Services\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Start Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"w-full\",value:startDate,onChange:e=>setStartDate(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"End Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"w-full\",value:endDate,onChange:e=>setEndDate(e.target.value)})]}),activeTab==='sales'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Group By\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"w-full\",value:groupBy,onChange:e=>setGroupBy(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"day\",children:\"Daily\"}),/*#__PURE__*/_jsx(\"option\",{value:\"month\",children:\"Monthly\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary w-full\",onClick:fetchReports,disabled:loading,children:loading?'Loading...':'Generate Report'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary px-3 py-1 text-sm\",onClick:()=>handleQuickSelect(7),children:\"Last 7 Days\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary px-3 py-1 text-sm\",onClick:()=>handleQuickSelect(30),children:\"Last 30 Days\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary px-3 py-1 text-sm\",onClick:()=>handleQuickSelect(90),children:\"Last 90 Days\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary px-3 py-1 text-sm\",onClick:()=>{const today=new Date();const firstDay=new Date(today.getFullYear(),today.getMonth(),1);setStartDate(firstDay.toISOString().split('T')[0]);setEndDate(today.toISOString().split('T')[0]);},children:\"This Month\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"card p-4 bg-red-50 border border-red-200\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600\",children:error})}),summary&&!loading&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:activeTab==='service'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Total Quantity\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold\",children:summary.total_quantity})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Total Sales\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold\",children:formatCurrency(summary.total_amount)})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Total Bills\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold\",children:summary.total_bills})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Total Amount\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold\",children:formatCurrency(summary.total_amount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Total Discount\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-red-600\",children:formatCurrency((_summary$total_discou=summary.total_discount)!==null&&_summary$total_discou!==void 0?_summary$total_discou:0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Net Amount\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-brand-600\",children:formatCurrency((_summary$net_amount=summary.net_amount)!==null&&_summary$net_amount!==void 0?_summary$net_amount:0)})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[!loading&&(activeTab==='sales'&&salesData.length>0||activeTab==='doctor'&&doctorData.length>0||activeTab==='service'&&serviceData.length>0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 flex gap-2 justify-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary px-4 py-2 text-sm flex items-center gap-2\",disabled:loading,children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"})}),\"Export Complete Billing Data\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-1 w-48 bg-white rounded-md shadow-lg py-1 hidden group-hover:block z-10\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:exportCompleteBillingDataToExcel,className:\"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\",children:\"Excel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:exportCompleteBillingDataToPDF,className:\"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\",children:\"PDF\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportToExcel,className:\"btn btn-secondary px-4 py-2 text-sm flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})}),\"Export Summary to Excel\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportToPDF,className:\"btn btn-secondary px-4 py-2 text-sm flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"})}),\"Export Summary to PDF\"]})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Loading report data...\"})}):activeTab==='sales'&&salesData.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-left text-gray-500 border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right\",children:\"Bills\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right\",children:\"Total Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right\",children:\"Discount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right\",children:\"Net Amount\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:salesData.map((row,idx)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-100 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDateClick(row.date),className:\"text-brand-600 hover:text-brand-800 hover:underline font-medium cursor-pointer\",children:groupBy==='month'?new Date(row.date+'-01').toLocaleDateString('en-IN',{year:'numeric',month:'long'}):formatDate(row.date)})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right\",children:row.total_bills}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right\",children:formatCurrency(row.total_amount)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right text-red-600\",children:formatCurrency(row.total_discount)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right font-semibold\",children:formatCurrency(row.net_amount)})]},idx))})]})}):activeTab==='doctor'&&doctorData.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-left text-gray-500 border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Doctor Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right\",children:\"Total Bills\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right\",children:\"Total Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right\",children:\"Discount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right\",children:\"Net Amount\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:doctorData.map((row,idx)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-100 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDoctorClick(row.doctor_id,row.doctor_name),className:\"text-brand-600 hover:text-brand-800 hover:underline font-medium cursor-pointer\",children:row.doctor_name})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right\",children:row.total_bills}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right\",children:formatCurrency(row.total_amount)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right text-red-600\",children:formatCurrency(row.total_discount)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right font-semibold\",children:formatCurrency(row.net_amount)})]},idx))})]})}):activeTab==='service'&&serviceData.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-left text-gray-500 border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Service Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right\",children:\"Total Quantity\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right\",children:\"Total Sales\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:serviceData.map((row,idx)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-100\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 font-medium\",children:row.service_name}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right\",children:row.total_quantity}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right font-semibold\",children:formatCurrency(row.total_amount)})]},idx))})]})}):activeTab==='doctorServices'?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 text-gray-500\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-2\",children:\"Doctor-Services Analysis\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"This feature shows which doctors prescribed which services.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-4\",children:\"Coming soon - requires bill items to be linked with service names\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:startDate&&endDate?'No data found for the selected period':'Please select a date range'})]})]});};export default Reports;","map":{"version":3,"names":["React","useState","useEffect","getSalesSummary","getDoctorSalesReport","getServiceSalesReport","getBillsByDate","getBillsByMonth","getBillsByDoctor","getBillsByDateRange","getBillById","listBillItems","getDoctorById","formatCurrency","formatDate","formatDateTime","XLSX","jsPDF","autoTable","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Reports","_summary$total_discou","_summary$net_amount","activeTab","setActiveTab","startDate","setStartDate","endDate","setEndDate","groupBy","setGroupBy","loading","setLoading","error","setError","salesData","setSalesData","doctorData","setDoctorData","serviceData","setServiceData","showDeepDive","setShowDeepDive","deepDiveData","setDeepDiveData","deepDiveTitle","setDeepDiveTitle","showBillDetail","setShowBillDetail","selectedBill","setSelectedBill","billItems","setBillItems","loadingBillDetail","setLoadingBillDetail","doctorServiceData","setDoctorServiceData","today","Date","thirtyDaysAgo","setDate","getDate","toISOString","split","fetchReports","data","fetchDoctorServiceAnalysis","e","console","message","bills","doctorServiceMap","Map","handleQuickSelect","days","pastDate","getTotalSummary","total_bills","reduce","sum","d","total_amount","total_discount","net_amount","total_quantity","summary","exportToExcel","sheetName","map","row","date","toLocaleDateString","year","month","doctor_name","service_name","worksheet","utils","json_to_sheet","workbook","book_new","book_append_sheet","writeFile","concat","exportCompleteBillingDataToExcel","allBills","bill","bill_number","created_at","patient_name","guest_name","discount","mode_of_payment","status","exportCompleteBillingDataToPDF","doc","setFontSize","text","headers","head","body","startY","theme","headStyles","fillColor","halign","styles","fontSize","columnStyles","cellWidth","save","exportToPDF","title","toString","replace","handleDateClick","Number","handleDoctorClick","doctorId","doctorName","exportDeepDiveToExcel","exportDeepDiveToPDF","handleViewBill","billId","items","Promise","all","doctor_id","doctor","opd_fees","className","children","onClick","length","item","idx","quantity","price","total","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","id","colSpan","b","type","value","onChange","target","disabled","firstDay","getFullYear","getMonth"],"sources":["C:/Users/Me/Desktop/orthnova-app/orthnova-offline/src/components/admin/Reports.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getSalesSummary, getDoctorSalesReport, getServiceSalesReport, getBillsByDate, getBillsByMonth, getBillsByDoctor, getBillsByDateRange, getBillById, listBillItems, getDoctorById, SalesSummary, DoctorSalesReport, ServiceSalesReport, BillDetail, listBills } from '../../api';\r\nimport { BillRow, BillItemRow } from '../../types';\r\nimport { formatCurrency, formatDate, formatDateTime } from '../../utils/format';\r\nimport * as XLSX from 'xlsx';\r\nimport jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\n\r\ntype ReportTab = 'sales' | 'doctor' | 'service' | 'doctorServices';\r\n\r\nconst Reports: React.FC = () => {\r\n  const [activeTab, setActiveTab] = useState<ReportTab>('sales');\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n  const [groupBy, setGroupBy] = useState<'day' | 'month'>('day');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const [salesData, setSalesData] = useState<SalesSummary[]>([]);\r\n  const [doctorData, setDoctorData] = useState<DoctorSalesReport[]>([]);\r\n  const [serviceData, setServiceData] = useState<ServiceSalesReport[]>([]);\r\n\r\n  // Deep dive states\r\n  const [showDeepDive, setShowDeepDive] = useState(false);\r\n  const [deepDiveData, setDeepDiveData] = useState<BillDetail[]>([]);\r\n  const [deepDiveTitle, setDeepDiveTitle] = useState('');\r\n\r\n  // Bill detail modal states\r\n  const [showBillDetail, setShowBillDetail] = useState(false);\r\n  const [selectedBill, setSelectedBill] = useState<BillRow | null>(null);\r\n  const [billItems, setBillItems] = useState<BillItemRow[]>([]);\r\n  const [loadingBillDetail, setLoadingBillDetail] = useState(false);\r\n\r\n  // Doctor-Service analysis\r\n  const [doctorServiceData, setDoctorServiceData] = useState<Array<{\r\n    doctor_id: string;\r\n    doctor_name: string;\r\n    services: Array<{ service_name: string; quantity: number; amount: number }>;\r\n    total_amount: number;\r\n  }>>([]);\r\n\r\n  // Set default dates (today and 30 days ago)\r\n  useEffect(() => {\r\n    const today = new Date();\r\n    const thirtyDaysAgo = new Date(today);\r\n    thirtyDaysAgo.setDate(today.getDate() - 30);\r\n    \r\n    setEndDate(today.toISOString().split('T')[0]);\r\n    setStartDate(thirtyDaysAgo.toISOString().split('T')[0]);\r\n  }, []);\r\n\r\n  const fetchReports = async () => {\r\n    if (!startDate || !endDate) {\r\n      setError('Please select both start and end dates');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      if (activeTab === 'sales') {\r\n        const data = await getSalesSummary(startDate, endDate, groupBy);\r\n        setSalesData(data);\r\n      } else if (activeTab === 'doctor') {\r\n        const data = await getDoctorSalesReport(startDate, endDate);\r\n        setDoctorData(data);\r\n      } else if (activeTab === 'service') {\r\n        const data = await getServiceSalesReport(startDate, endDate);\r\n        setServiceData(data);\r\n      } else if (activeTab === 'doctorServices') {\r\n        // Fetch doctor-service analysis\r\n        await fetchDoctorServiceAnalysis();\r\n      }\r\n    } catch (e: any) {\r\n      console.error('Error fetching reports:', e);\r\n      setError(e.message || 'Failed to fetch report data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchDoctorServiceAnalysis = async () => {\r\n    try {\r\n      const bills = await getBillsByDate(startDate); // Get all bills in date range\r\n      // You'll need to implement a proper API function to get bills with items by date range\r\n      // For now, this is a placeholder\r\n      const doctorServiceMap = new Map<string, any>();\r\n      \r\n      // This is simplified - in production, you'd need a dedicated API endpoint\r\n      setDoctorServiceData([]);\r\n    } catch (e: any) {\r\n      console.error('Error fetching doctor-service analysis:', e);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (startDate && endDate) {\r\n      fetchReports();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activeTab, groupBy]);\r\n\r\n  const handleQuickSelect = (days: number) => {\r\n    const today = new Date();\r\n    const pastDate = new Date(today);\r\n    pastDate.setDate(today.getDate() - days);\r\n    \r\n    setEndDate(today.toISOString().split('T')[0]);\r\n    setStartDate(pastDate.toISOString().split('T')[0]);\r\n  };\r\n\r\n  const getTotalSummary = () => {\r\n    if (activeTab === 'sales') {\r\n      return {\r\n        total_bills: salesData.reduce((sum, d) => sum + d.total_bills, 0),\r\n        total_amount: salesData.reduce((sum, d) => sum + d.total_amount, 0),\r\n        total_discount: salesData.reduce((sum, d) => sum + d.total_discount, 0),\r\n        net_amount: salesData.reduce((sum, d) => sum + d.net_amount, 0),\r\n      };\r\n    } else if (activeTab === 'doctor') {\r\n      return {\r\n        total_bills: doctorData.reduce((sum, d) => sum + d.total_bills, 0),\r\n        total_amount: doctorData.reduce((sum, d) => sum + d.total_amount, 0),\r\n        total_discount: doctorData.reduce((sum, d) => sum + d.total_discount, 0),\r\n        net_amount: doctorData.reduce((sum, d) => sum + d.net_amount, 0),\r\n      };\r\n    } else if (activeTab === 'service') {\r\n      return {\r\n        total_quantity: serviceData.reduce((sum, d) => sum + d.total_quantity, 0),\r\n        total_amount: serviceData.reduce((sum, d) => sum + d.total_amount, 0),\r\n      };\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const summary = getTotalSummary();\r\n\r\n  // Export to Excel\r\n  const exportToExcel = () => {\r\n    let data: any[] = [];\r\n    let sheetName = '';\r\n\r\n    if (activeTab === 'sales') {\r\n      sheetName = 'Sales Summary';\r\n      data = salesData.map(row => ({\r\n        Date: groupBy === 'month' \r\n          ? new Date(row.date + '-01').toLocaleDateString('en-IN', { year: 'numeric', month: 'long' })\r\n          : formatDate(row.date),\r\n        'Total Bills': row.total_bills,\r\n        'Total Amount': row.total_amount,\r\n        'Discount': row.total_discount,\r\n        'Net Amount': row.net_amount,\r\n      }));\r\n    } else if (activeTab === 'doctor') {\r\n      sheetName = 'Doctor Sales';\r\n      data = doctorData.map(row => ({\r\n        'Doctor Name': row.doctor_name,\r\n        'Total Bills': row.total_bills,\r\n        'Total Amount': row.total_amount,\r\n        'Discount': row.total_discount,\r\n        'Net Amount': row.net_amount,\r\n      }));\r\n    } else if (activeTab === 'service') {\r\n      sheetName = 'Service Sales';\r\n      data = serviceData.map(row => ({\r\n        'Service Name': row.service_name,\r\n        'Total Quantity': row.total_quantity,\r\n        'Total Sales': row.total_amount,\r\n      }));\r\n    }\r\n\r\n    const worksheet = XLSX.utils.json_to_sheet(data);\r\n    const workbook = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, sheetName);\r\n    XLSX.writeFile(workbook, `${sheetName}_${startDate}_to_${endDate}.xlsx`);\r\n  };\r\n\r\n  // Export Complete Billing Data to Excel\r\n  const exportCompleteBillingDataToExcel = async () => {\r\n    setLoading(true);\r\n    try {\r\n      // Fetch all bills in the selected date range\r\n      const allBills = await getBillsByDateRange(startDate, endDate);\r\n      \r\n      // Export to Excel\r\n      const data = allBills.map((bill: BillDetail) => ({\r\n        'Bill Number': bill.bill_number,\r\n        'Date': formatDateTime(bill.created_at),\r\n        'Patient': bill.patient_name || bill.guest_name || 'N/A',\r\n        'Doctor': bill.doctor_name || 'N/A',\r\n        'Total Amount': bill.total_amount,\r\n        'Discount': bill.discount,\r\n        'Net Amount': bill.net_amount,\r\n        'Payment Mode': bill.mode_of_payment,\r\n        'Status': bill.status,\r\n      }));\r\n\r\n      const worksheet = XLSX.utils.json_to_sheet(data);\r\n      const workbook = XLSX.utils.book_new();\r\n      XLSX.utils.book_append_sheet(workbook, worksheet, 'Complete Billing Data');\r\n      XLSX.writeFile(workbook, `Complete_Billing_Data_${startDate}_to_${endDate}.xlsx`);\r\n    } catch (e: any) {\r\n      console.error('Error exporting complete billing data:', e);\r\n      setError(e.message || 'Failed to export complete billing data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Export Complete Billing Data to PDF\r\n  const exportCompleteBillingDataToPDF = async () => {\r\n    setLoading(true);\r\n    try {\r\n      // Fetch all bills in the selected date range\r\n      const allBills = await getBillsByDateRange(startDate, endDate);\r\n      \r\n      // Export to PDF\r\n      const doc = new jsPDF();\r\n      \r\n      doc.setFontSize(16);\r\n      doc.text('Complete Billing Data', 14, 15);\r\n      doc.setFontSize(10);\r\n      doc.text(`Period: ${formatDate(startDate)} to ${formatDate(endDate)}`, 14, 22);\r\n      \r\n      const headers = [['Bill #', 'Date', 'Patient', 'Doctor', 'Total', 'Discount', 'Net', 'Payment', 'Status']];\r\n      const data = allBills.map((bill: BillDetail) => [\r\n        bill.bill_number,\r\n        formatDateTime(bill.created_at),\r\n        bill.patient_name || bill.guest_name || 'N/A',\r\n        bill.doctor_name || 'N/A',\r\n        formatCurrency(bill.total_amount),\r\n        formatCurrency(bill.discount),\r\n        formatCurrency(bill.net_amount),\r\n        bill.mode_of_payment,\r\n        bill.status,\r\n      ]);\r\n\r\n      autoTable(doc, {\r\n        head: headers,\r\n        body: data,\r\n        startY: 28,\r\n        theme: 'grid',\r\n        headStyles: { fillColor: [41, 128, 185], halign: 'center' },\r\n        styles: { fontSize: 8 },\r\n        columnStyles: {\r\n          0: { halign: 'left', cellWidth: 20 },\r\n          1: { halign: 'left', cellWidth: 30 },\r\n          2: { halign: 'left', cellWidth: 30 },\r\n          3: { halign: 'left', cellWidth: 25 },\r\n          4: { halign: 'right', cellWidth: 22 },\r\n          5: { halign: 'right', cellWidth: 22 },\r\n          6: { halign: 'right', cellWidth: 22 },\r\n          7: { halign: 'center', cellWidth: 20 },\r\n          8: { halign: 'center', cellWidth: 18 },\r\n        },\r\n      });\r\n\r\n      doc.save(`Complete_Billing_Data_${startDate}_to_${endDate}.pdf`);\r\n    } catch (e: any) {\r\n      console.error('Error exporting complete billing data to PDF:', e);\r\n      setError(e.message || 'Failed to export complete billing data to PDF');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Export to PDF\r\n  const exportToPDF = () => {\r\n    const doc = new jsPDF();\r\n    let title = '';\r\n    let headers: any[] = [];\r\n    let data: any[][] = [];\r\n\r\n    if (activeTab === 'sales') {\r\n      title = 'Sales Summary Report';\r\n      headers = [['Date', 'Bills', 'Total Amount', 'Discount', 'Net Amount']];\r\n      data = salesData.map(row => [\r\n        groupBy === 'month' \r\n          ? new Date(row.date + '-01').toLocaleDateString('en-IN', { year: 'numeric', month: 'long' })\r\n          : formatDate(row.date),\r\n        row.total_bills.toString(),\r\n        formatCurrency(row.total_amount),\r\n        formatCurrency(row.total_discount),\r\n        formatCurrency(row.net_amount),\r\n      ]);\r\n    } else if (activeTab === 'doctor') {\r\n      title = 'Doctor Sales Report';\r\n      headers = [['Doctor Name', 'Bills', 'Total Amount', 'Discount', 'Net Amount']];\r\n      data = doctorData.map(row => [\r\n        row.doctor_name,\r\n        row.total_bills.toString(),\r\n        formatCurrency(row.total_amount),\r\n        formatCurrency(row.total_discount),\r\n        formatCurrency(row.net_amount),\r\n      ]);\r\n    } else if (activeTab === 'service') {\r\n      title = 'Service Sales Report';\r\n      headers = [['Service Name', 'Quantity', 'Total Sales']];\r\n      data = serviceData.map(row => [\r\n        row.service_name,\r\n        row.total_quantity.toString(),\r\n        formatCurrency(row.total_amount),\r\n      ]);\r\n    }\r\n\r\n    doc.setFontSize(16);\r\n    doc.text(title, 14, 15);\r\n    doc.setFontSize(10);\r\n    doc.text(`Period: ${formatDate(startDate)} to ${formatDate(endDate)}`, 14, 22);\r\n\r\n    autoTable(doc, {\r\n      head: headers,\r\n      body: data,\r\n      startY: 28,\r\n      theme: 'grid',\r\n      headStyles: { fillColor: [41, 128, 185], halign: 'center' },\r\n      styles: { fontSize: 9 },\r\n      columnStyles: activeTab === 'sales' || activeTab === 'doctor' ? {\r\n        0: { halign: 'left' },\r\n        1: { halign: 'right' },\r\n        2: { halign: 'right' },\r\n        3: { halign: 'right' },\r\n        4: { halign: 'right' },\r\n      } : {\r\n        0: { halign: 'left' },\r\n        1: { halign: 'right' },\r\n        2: { halign: 'right' },\r\n      },\r\n    });\r\n\r\n    doc.save(`${title.replace(/ /g, '_')}_${startDate}_to_${endDate}.pdf`);\r\n  };\r\n\r\n  // Deep dive handlers\r\n  const handleDateClick = async (date: string) => {\r\n    setLoading(true);\r\n    try {\r\n      let bills: BillDetail[];\r\n      if (groupBy === 'month') {\r\n        const [year, month] = date.split('-').map(Number);\r\n        bills = await getBillsByMonth(year, month);\r\n        setDeepDiveTitle(`Bills for ${new Date(year, month - 1).toLocaleDateString('en-IN', { year: 'numeric', month: 'long' })}`);\r\n      } else {\r\n        bills = await getBillsByDate(date);\r\n        setDeepDiveTitle(`Bills for ${formatDate(date)}`);\r\n      }\r\n      setDeepDiveData(bills);\r\n      setShowDeepDive(true);\r\n    } catch (e: any) {\r\n      console.error('Error fetching bills:', e);\r\n      setError(e.message || 'Failed to fetch bills');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDoctorClick = async (doctorId: string, doctorName: string) => {\r\n    setLoading(true);\r\n    try {\r\n      const bills = await getBillsByDoctor(doctorId, startDate, endDate);\r\n      setDeepDiveData(bills);\r\n      setDeepDiveTitle(`Bills by ${doctorName}`);\r\n      setShowDeepDive(true);\r\n    } catch (e: any) {\r\n      console.error('Error fetching bills:', e);\r\n      setError(e.message || 'Failed to fetch bills');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Export deep dive data\r\n  const exportDeepDiveToExcel = () => {\r\n    const data = deepDiveData.map(bill => ({\r\n      'Bill Number': bill.bill_number,\r\n      'Date': formatDateTime(bill.created_at),\r\n      'Patient': bill.patient_name || bill.guest_name || 'N/A',\r\n      'Doctor': bill.doctor_name || 'N/A',\r\n      'Total Amount': bill.total_amount,\r\n      'Discount': bill.discount,\r\n      'Net Amount': bill.net_amount,\r\n      'Payment Mode': bill.mode_of_payment,\r\n      'Status': bill.status,\r\n    }));\r\n\r\n    const worksheet = XLSX.utils.json_to_sheet(data);\r\n    const workbook = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Bill Details');\r\n    XLSX.writeFile(workbook, `${deepDiveTitle.replace(/ /g, '_')}.xlsx`);\r\n  };\r\n\r\n  const exportDeepDiveToPDF = () => {\r\n    const doc = new jsPDF();\r\n    \r\n    doc.setFontSize(16);\r\n    doc.text(deepDiveTitle, 14, 15);\r\n    doc.setFontSize(10);\r\n    doc.text(`Generated: ${new Date().toLocaleDateString('en-IN')}`, 14, 22);\r\n\r\n    const headers = [['Bill #', 'Date', 'Patient', 'Doctor', 'Total', 'Discount', 'Net', 'Status']];\r\n    const data = deepDiveData.map(bill => [\r\n      bill.bill_number,\r\n      formatDateTime(bill.created_at),\r\n      bill.patient_name || bill.guest_name || 'N/A',\r\n      bill.doctor_name || 'N/A',\r\n      formatCurrency(bill.total_amount),\r\n      formatCurrency(bill.discount),\r\n      formatCurrency(bill.net_amount),\r\n      bill.status,\r\n    ]);\r\n\r\n    autoTable(doc, {\r\n      head: headers,\r\n      body: data,\r\n      startY: 28,\r\n      theme: 'grid',\r\n      headStyles: { fillColor: [41, 128, 185], halign: 'center' },\r\n      styles: { fontSize: 8 },\r\n      columnStyles: {\r\n        0: { halign: 'left', cellWidth: 20 },\r\n        1: { halign: 'left', cellWidth: 30 },\r\n        2: { halign: 'left', cellWidth: 30 },\r\n        3: { halign: 'left', cellWidth: 25 },\r\n        4: { halign: 'right', cellWidth: 22 },\r\n        5: { halign: 'right', cellWidth: 22 },\r\n        6: { halign: 'right', cellWidth: 22 },\r\n        7: { halign: 'center', cellWidth: 18 },\r\n      },\r\n    });\r\n\r\n    doc.save(`${deepDiveTitle.replace(/ /g, '_')}.pdf`);\r\n  };\r\n\r\n  const handleViewBill = async (billId: string) => {\r\n    setLoadingBillDetail(true);\r\n    try {\r\n      const [bill, items] = await Promise.all([\r\n        getBillById(billId),\r\n        listBillItems(billId)\r\n      ]);\r\n      if (bill) {\r\n        // Fetch doctor details if doctor_id exists\r\n        if (bill.doctor_id) {\r\n          const doctor = await getDoctorById(bill.doctor_id);\r\n          (bill as any).opd_fees = doctor?.opd_fees || 0;\r\n        }\r\n        setSelectedBill(bill);\r\n        setBillItems(items);\r\n        setShowBillDetail(true);\r\n      }\r\n    } catch (e: any) {\r\n      console.error('Error loading bill details:', e);\r\n      setError(e.message || 'Failed to load bill details');\r\n    } finally {\r\n      setLoadingBillDetail(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Bill Detail Modal */}\r\n      {showBillDetail && selectedBill && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[100] p-4\">\r\n          <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col\">\r\n            <div className=\"p-4 border-b flex justify-between items-center\">\r\n              <h3 className=\"text-lg font-semibold\">Bill Details - {selectedBill.bill_number}</h3>\r\n              <button\r\n                onClick={() => { setShowBillDetail(false); setSelectedBill(null); setBillItems([]); }}\r\n                className=\"text-gray-500 hover:text-gray-700 text-2xl font-bold\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <div className=\"p-6 overflow-auto flex-1\">\r\n              <div className=\"grid grid-cols-2 gap-4 mb-4 text-sm\">\r\n                <div>\r\n                  <p className=\"text-gray-500\">Patient:</p>\r\n                  <p className=\"font-medium\">{(selectedBill as any).patient_name || (selectedBill as any).guest_name || 'N/A'}</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-gray-500\">Doctor:</p>\r\n                  <p className=\"font-medium\">{(selectedBill as any).doctor_name || 'N/A'}</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-gray-500\">Date:</p>\r\n                  <p className=\"font-medium\">{formatDateTime(selectedBill.created_at)}</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-gray-500\">Payment Mode:</p>\r\n                  <p className=\"font-medium\">{selectedBill.mode_of_payment}</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-gray-500\">Status:</p>\r\n                  <span className={`px-2 py-1 rounded text-xs font-medium ${\r\n                    selectedBill.status === 'paid' ? 'bg-green-100 text-green-800' :\r\n                    selectedBill.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\r\n                    'bg-gray-100 text-gray-800'\r\n                  }`}>\r\n                    {selectedBill.status}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"border-t pt-4\">\r\n                <h4 className=\"font-semibold mb-3\">Bill Items</h4>\r\n                {billItems.length > 0 ? (\r\n                  <table className=\"min-w-full text-sm\">\r\n                    <thead>\r\n                      <tr className=\"text-left border-b\">\r\n                        <th className=\"py-2\">Service</th>\r\n                        <th className=\"py-2 text-right\">Qty</th>\r\n                        <th className=\"py-2 text-right\">Price</th>\r\n                        <th className=\"py-2 text-right\">Total</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {billItems.map((item, idx) => (\r\n                        <tr key={idx} className=\"border-b\">\r\n                          <td className=\"py-2\">{(item as any).service_name || 'Service'}</td>\r\n                          <td className=\"py-2 text-right\">{item.quantity}</td>\r\n                          <td className=\"py-2 text-right\">{formatCurrency(item.price)}</td>\r\n                          <td className=\"py-2 text-right\">{formatCurrency(item.total)}</td>\r\n                        </tr>\r\n                      ))}\r\n                      {(selectedBill as any).doctor_id && (\r\n                        <tr className=\"border-b bg-blue-50\">\r\n                          <td className=\"py-2 font-medium\">Consultation Fee</td>\r\n                          <td className=\"py-2 text-right\">1</td>\r\n                          <td className=\"py-2 text-right\">{formatCurrency((selectedBill as any).opd_fees || 0)}</td>\r\n                          <td className=\"py-2 text-right\">{formatCurrency((selectedBill as any).opd_fees || 0)}</td>\r\n                        </tr>\r\n                      )}\r\n                    </tbody>\r\n                  </table>\r\n                ) : (\r\n                  <p className=\"text-gray-500 text-center py-4\">No items found</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"border-t pt-4 mt-4 space-y-2 text-sm\">\r\n                <div className=\"flex justify-between\">\r\n                  <span>Total Amount:</span>\r\n                  <span className=\"font-semibold\">{formatCurrency(selectedBill.total_amount)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between text-red-600\">\r\n                  <span>Discount:</span>\r\n                  <span className=\"font-semibold\">-{formatCurrency(selectedBill.discount)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between text-lg font-bold border-t pt-2\">\r\n                  <span>Net Amount:</span>\r\n                  <span>{formatCurrency(selectedBill.net_amount)}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Deep Dive Modal */}\r\n      {showDeepDive && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col\">\r\n            <div className=\"p-4 border-b flex justify-between items-center\">\r\n              <h3 className=\"text-lg font-semibold\">{deepDiveTitle}</h3>\r\n              <div className=\"flex items-center gap-2\">\r\n                <button\r\n                  onClick={exportDeepDiveToExcel}\r\n                  className=\"btn btn-secondary px-3 py-1 text-sm flex items-center gap-1\"\r\n                  title=\"Export to Excel\"\r\n                >\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n                  </svg>\r\n                  Excel\r\n                </button>\r\n                <button\r\n                  onClick={exportDeepDiveToPDF}\r\n                  className=\"btn btn-secondary px-3 py-1 text-sm flex items-center gap-1\"\r\n                  title=\"Export to PDF\"\r\n                >\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\" />\r\n                  </svg>\r\n                  PDF\r\n                </button>\r\n                <button\r\n                  onClick={() => setShowDeepDive(false)}\r\n                  className=\"text-gray-500 hover:text-gray-700 text-2xl font-bold ml-2\"\r\n                >\r\n                  \r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"p-4 overflow-auto flex-1\">\r\n              {deepDiveData.length > 0 ? (\r\n                <table className=\"min-w-full text-sm\">\r\n                  <thead>\r\n                    <tr className=\"text-left text-gray-500 border-b\">\r\n                      <th className=\"py-2 pr-4\">Bill Number</th>\r\n                      <th className=\"py-2 pr-4\">Date</th>\r\n                      <th className=\"py-2 pr-4\">Patient</th>\r\n                      <th className=\"py-2 pr-4\">Doctor</th>\r\n                      <th className=\"py-2 pr-4 text-right w-24\">Total</th>\r\n                      <th className=\"py-2 pr-4 text-right w-24\">Discount</th>\r\n                      <th className=\"py-2 pr-4 text-right w-24\">Net Amount</th>\r\n                      <th className=\"py-2 pr-4\">Payment</th>\r\n                      <th className=\"py-2 pr-4\">Status</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {deepDiveData.map((bill) => (\r\n                      <tr key={bill.id} className=\"border-b border-gray-100 hover:bg-gray-50\">\r\n                        <td className=\"py-2 pr-4\">\r\n                          <button\r\n                            onClick={() => handleViewBill(bill.id)}\r\n                            className=\"text-brand-600 hover:text-brand-800 hover:underline font-medium cursor-pointer\"\r\n                          >\r\n                            {bill.bill_number}\r\n                          </button>\r\n                        </td>\r\n                        <td className=\"py-2 pr-4\">{formatDateTime(bill.created_at)}</td>\r\n                        <td className=\"py-2 pr-4\">{bill.patient_name || bill.guest_name || 'N/A'}</td>\r\n                        <td className=\"py-2 pr-4\">{bill.doctor_name || 'N/A'}</td>\r\n                        <td className=\"py-2 pr-4 text-right\">{formatCurrency(bill.total_amount)}</td>\r\n                        <td className=\"py-2 pr-4 text-right text-red-600\">{formatCurrency(bill.discount)}</td>\r\n                        <td className=\"py-2 pr-4 text-right font-semibold\">{formatCurrency(bill.net_amount)}</td>\r\n                        <td className=\"py-2 pr-4\">\r\n                          <span className=\"text-xs\">{bill.mode_of_payment}</span>\r\n                        </td>\r\n                        <td className=\"py-2 pr-4\">\r\n                          <span className={`px-2 py-1 rounded text-xs ${\r\n                            bill.status === 'paid' ? 'bg-green-100 text-green-800' :\r\n                            bill.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\r\n                            'bg-gray-100 text-gray-800'\r\n                          }`}>\r\n                            {bill.status}\r\n                          </span>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                  <tfoot>\r\n                    <tr className=\"font-semibold border-t-2\">\r\n                      <td colSpan={4} className=\"py-2 pr-4 text-right\">Total:</td>\r\n                      <td className=\"py-2 pr-4 text-right\">\r\n                        {formatCurrency(deepDiveData.reduce((sum, b) => sum + b.total_amount, 0))}\r\n                      </td>\r\n                      <td className=\"py-2 pr-4 text-right text-red-600\">\r\n                        {formatCurrency(deepDiveData.reduce((sum, b) => sum + b.discount, 0))}\r\n                      </td>\r\n                      <td className=\"py-2 pr-4 text-right\">\r\n                        {formatCurrency(deepDiveData.reduce((sum, b) => sum + b.net_amount, 0))}\r\n                      </td>\r\n                      <td colSpan={2}></td>\r\n                    </tr>\r\n                  </tfoot>\r\n                </table>\r\n              ) : (\r\n                <p className=\"text-center text-gray-500 py-8\">No bills found</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"card p-4\">\r\n        <h2 className=\"text-xl font-semibold mb-4\">Reports</h2>\r\n        \r\n        {/* Tabs */}\r\n        <div className=\"flex gap-2 mb-4 border-b\">\r\n          <button\r\n            className={`px-4 py-2 font-medium ${\r\n              activeTab === 'sales'\r\n                ? 'border-b-2 border-brand-500 text-brand-600'\r\n                : 'text-gray-500 hover:text-gray-700'\r\n            }`}\r\n            onClick={() => setActiveTab('sales')}\r\n          >\r\n            Sales Summary\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2 font-medium ${\r\n              activeTab === 'doctor'\r\n                ? 'border-b-2 border-brand-500 text-brand-600'\r\n                : 'text-gray-500 hover:text-gray-700'\r\n            }`}\r\n            onClick={() => setActiveTab('doctor')}\r\n          >\r\n            Doctor Sales\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2 font-medium ${\r\n              activeTab === 'service'\r\n                ? 'border-b-2 border-brand-500 text-brand-600'\r\n                : 'text-gray-500 hover:text-gray-700'\r\n            }`}\r\n            onClick={() => setActiveTab('service')}\r\n          >\r\n            Service Sales\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2 font-medium ${\r\n              activeTab === 'doctorServices'\r\n                ? 'border-b-2 border-brand-500 text-brand-600'\r\n                : 'text-gray-500 hover:text-gray-700'\r\n            }`}\r\n            onClick={() => setActiveTab('doctorServices')}\r\n          >\r\n            Doctor-Services\r\n          </button>\r\n        </div>\r\n\r\n        {/* Date Range Selection */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">Start Date</label>\r\n            <input\r\n              type=\"date\"\r\n              className=\"w-full\"\r\n              value={startDate}\r\n              onChange={e => setStartDate(e.target.value)}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">End Date</label>\r\n            <input\r\n              type=\"date\"\r\n              className=\"w-full\"\r\n              value={endDate}\r\n              onChange={e => setEndDate(e.target.value)}\r\n            />\r\n          </div>\r\n          {activeTab === 'sales' && (\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-1\">Group By</label>\r\n              <select\r\n                className=\"w-full\"\r\n                value={groupBy}\r\n                onChange={e => setGroupBy(e.target.value as 'day' | 'month')}\r\n              >\r\n                <option value=\"day\">Daily</option>\r\n                <option value=\"month\">Monthly</option>\r\n              </select>\r\n            </div>\r\n          )}\r\n          <div className=\"flex items-end\">\r\n            <button className=\"btn btn-primary w-full\" onClick={fetchReports} disabled={loading}>\r\n              {loading ? 'Loading...' : 'Generate Report'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Quick Select */}\r\n        <div className=\"flex gap-2 mb-4\">\r\n          <button className=\"btn btn-secondary px-3 py-1 text-sm\" onClick={() => handleQuickSelect(7)}>\r\n            Last 7 Days\r\n          </button>\r\n          <button className=\"btn btn-secondary px-3 py-1 text-sm\" onClick={() => handleQuickSelect(30)}>\r\n            Last 30 Days\r\n          </button>\r\n          <button className=\"btn btn-secondary px-3 py-1 text-sm\" onClick={() => handleQuickSelect(90)}>\r\n            Last 90 Days\r\n          </button>\r\n          <button className=\"btn btn-secondary px-3 py-1 text-sm\" onClick={() => {\r\n            const today = new Date();\r\n            const firstDay = new Date(today.getFullYear(), today.getMonth(), 1);\r\n            setStartDate(firstDay.toISOString().split('T')[0]);\r\n            setEndDate(today.toISOString().split('T')[0]);\r\n          }}>\r\n            This Month\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className=\"card p-4 bg-red-50 border border-red-200\">\r\n          <p className=\"text-red-600\">{error}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Summary Cards */}\r\n      {summary && !loading && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n          {activeTab === 'service' ? (\r\n            <>\r\n              <div className=\"card p-4\">\r\n                <p className=\"text-sm text-gray-500\">Total Quantity</p>\r\n                <p className=\"text-2xl font-bold\">{summary.total_quantity}</p>\r\n              </div>\r\n              <div className=\"card p-4\">\r\n                <p className=\"text-sm text-gray-500\">Total Sales</p>\r\n                <p className=\"text-2xl font-bold\">{formatCurrency(summary.total_amount)}</p>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <div className=\"card p-4\">\r\n                <p className=\"text-sm text-gray-500\">Total Bills</p>\r\n                <p className=\"text-2xl font-bold\">{summary.total_bills}</p>\r\n              </div>\r\n              <div className=\"card p-4\">\r\n                <p className=\"text-sm text-gray-500\">Total Amount</p>\r\n                <p className=\"text-2xl font-bold\">{formatCurrency(summary.total_amount)}</p>\r\n              </div>\r\n              <div className=\"card p-4\">\r\n                <p className=\"text-sm text-gray-500\">Total Discount</p>\r\n                <p className=\"text-2xl font-bold text-red-600\">{formatCurrency(summary.total_discount ?? 0)}</p>\r\n              </div>\r\n              <div className=\"card p-4\">\r\n                <p className=\"text-sm text-gray-500\">Net Amount</p>\r\n                <p className=\"text-2xl font-bold text-brand-600\">{formatCurrency(summary.net_amount ?? 0)}</p>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Report Tables */}\r\n      <div className=\"card p-6\">\r\n        {/* Export Buttons */}\r\n        {!loading && ((activeTab === 'sales' && salesData.length > 0) || (activeTab === 'doctor' && doctorData.length > 0) || (activeTab === 'service' && serviceData.length > 0)) && (\r\n          <div className=\"mb-4 flex gap-2 justify-end\">\r\n            <div className=\"relative group\">\r\n              <button\r\n                className=\"btn btn-primary px-4 py-2 text-sm flex items-center gap-2\"\r\n                disabled={loading}\r\n              >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\r\n                </svg>\r\n                Export Complete Billing Data\r\n              </button>\r\n              <div className=\"absolute right-0 mt-1 w-48 bg-white rounded-md shadow-lg py-1 hidden group-hover:block z-10\">\r\n                <button\r\n                  onClick={exportCompleteBillingDataToExcel}\r\n                  className=\"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\r\n                >\r\n                  Excel\r\n                </button>\r\n                <button\r\n                  onClick={exportCompleteBillingDataToPDF}\r\n                  className=\"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\r\n                >\r\n                  PDF\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={exportToExcel}\r\n              className=\"btn btn-secondary px-4 py-2 text-sm flex items-center gap-2\"\r\n            >\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n              </svg>\r\n              Export Summary to Excel\r\n            </button>\r\n            <button\r\n              onClick={exportToPDF}\r\n              className=\"btn btn-secondary px-4 py-2 text-sm flex items-center gap-2\"\r\n            >\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\" />\r\n              </svg>\r\n              Export Summary to PDF\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {loading ? (\r\n          <div className=\"text-center py-8\">\r\n            <p className=\"text-gray-500\">Loading report data...</p>\r\n          </div>\r\n        ) : activeTab === 'sales' && salesData.length > 0 ? (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full text-sm\">\r\n              <thead>\r\n                <tr className=\"text-left text-gray-500 border-b\">\r\n                  <th className=\"py-2 pr-4\">Date</th>\r\n                  <th className=\"py-2 pr-4 text-right\">Bills</th>\r\n                  <th className=\"py-2 pr-4 text-right\">Total Amount</th>\r\n                  <th className=\"py-2 pr-4 text-right\">Discount</th>\r\n                  <th className=\"py-2 pr-4 text-right\">Net Amount</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {salesData.map((row, idx) => (\r\n                  <tr key={idx} className=\"border-b border-gray-100 hover:bg-gray-50\">\r\n                    <td className=\"py-2 pr-4\">\r\n                      <button\r\n                        onClick={() => handleDateClick(row.date)}\r\n                        className=\"text-brand-600 hover:text-brand-800 hover:underline font-medium cursor-pointer\"\r\n                      >\r\n                        {groupBy === 'month' \r\n                          ? new Date(row.date + '-01').toLocaleDateString('en-IN', { year: 'numeric', month: 'long' })\r\n                          : formatDate(row.date)}\r\n                      </button>\r\n                    </td>\r\n                    <td className=\"py-2 pr-4 text-right\">{row.total_bills}</td>\r\n                    <td className=\"py-2 pr-4 text-right\">{formatCurrency(row.total_amount)}</td>\r\n                    <td className=\"py-2 pr-4 text-right text-red-600\">{formatCurrency(row.total_discount)}</td>\r\n                    <td className=\"py-2 pr-4 text-right font-semibold\">{formatCurrency(row.net_amount)}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        ) : activeTab === 'doctor' && doctorData.length > 0 ? (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full text-sm\">\r\n              <thead>\r\n                <tr className=\"text-left text-gray-500 border-b\">\r\n                  <th className=\"py-2 pr-4\">Doctor Name</th>\r\n                  <th className=\"py-2 pr-4 text-right\">Total Bills</th>\r\n                  <th className=\"py-2 pr-4 text-right\">Total Amount</th>\r\n                  <th className=\"py-2 pr-4 text-right\">Discount</th>\r\n                  <th className=\"py-2 pr-4 text-right\">Net Amount</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {doctorData.map((row, idx) => (\r\n                  <tr key={idx} className=\"border-b border-gray-100 hover:bg-gray-50\">\r\n                    <td className=\"py-2 pr-4\">\r\n                      <button\r\n                        onClick={() => handleDoctorClick(row.doctor_id, row.doctor_name)}\r\n                        className=\"text-brand-600 hover:text-brand-800 hover:underline font-medium cursor-pointer\"\r\n                      >\r\n                        {row.doctor_name}\r\n                      </button>\r\n                    </td>\r\n                    <td className=\"py-2 pr-4 text-right\">{row.total_bills}</td>\r\n                    <td className=\"py-2 pr-4 text-right\">{formatCurrency(row.total_amount)}</td>\r\n                    <td className=\"py-2 pr-4 text-right text-red-600\">{formatCurrency(row.total_discount)}</td>\r\n                    <td className=\"py-2 pr-4 text-right font-semibold\">{formatCurrency(row.net_amount)}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        ) : activeTab === 'service' && serviceData.length > 0 ? (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full text-sm\">\r\n              <thead>\r\n                <tr className=\"text-left text-gray-500 border-b\">\r\n                  <th className=\"py-2 pr-4\">Service Name</th>\r\n                  <th className=\"py-2 pr-4 text-right\">Total Quantity</th>\r\n                  <th className=\"py-2 pr-4 text-right\">Total Sales</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {serviceData.map((row, idx) => (\r\n                  <tr key={idx} className=\"border-b border-gray-100\">\r\n                    <td className=\"py-2 pr-4 font-medium\">{row.service_name}</td>\r\n                    <td className=\"py-2 pr-4 text-right\">{row.total_quantity}</td>\r\n                    <td className=\"py-2 pr-4 text-right font-semibold\">{formatCurrency(row.total_amount)}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        ) : activeTab === 'doctorServices' ? (\r\n          <div className=\"text-center py-8 text-gray-500\">\r\n            <p className=\"mb-2\">Doctor-Services Analysis</p>\r\n            <p className=\"text-sm\">This feature shows which doctors prescribed which services.</p>\r\n            <p className=\"text-sm text-gray-400 mt-4\">Coming soon - requires bill items to be linked with service names</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"text-center py-8 text-gray-500\">\r\n            {startDate && endDate ? 'No data found for the selected period' : 'Please select a date range'}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Reports;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}