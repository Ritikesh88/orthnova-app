{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import{getDoctorById,getPatientById,getPrescriptionById}from'../api';import{CLINIC_ADDRESS_LINE_1,CLINIC_ADDRESS_LINE_2,CLINIC_CONTACT,CLINIC_NAME}from'../config/clinic';import{formatDate}from'../utils/format';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PrintPrescription=()=>{const{id}=useParams();const[presc,setPresc]=useState(null);const[patient,setPatient]=useState(null);const[doctor,setDoctor]=useState(null);useEffect(()=>{(async()=>{if(!id)return;const p=await getPrescriptionById(id);if(!p)return;setPresc(p);const[pat,doc]=await Promise.all([getPatientById(p.patient_id),getDoctorById(p.doctor_id)]);setPatient(pat);setDoctor(doc);const t=setTimeout(()=>{window.focus();window.print();},400);return()=>clearTimeout(t);})();},[id]);if(!presc)return/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 print:p-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto bg-white p-6 print:p-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-gray-700 rounded-md p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:CLINIC_NAME}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:CLINIC_ADDRESS_LINE_1}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:CLINIC_ADDRESS_LINE_2}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:CLINIC_CONTACT}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-semibold mt-2\",children:\"PRESCRIPTION\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 grid grid-cols-2 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Patient ID:\"}),\" \",patient===null||patient===void 0?void 0:patient.patient_id]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Date:\"}),\" \",formatDate(presc.created_at)]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Name:\"}),\" \",patient===null||patient===void 0?void 0:patient.name]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Age/Gender:\"}),\" \",patient===null||patient===void 0?void 0:patient.age,\" / \",patient===null||patient===void 0?void 0:patient.gender]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Address:\"}),\" \",patient===null||patient===void 0?void 0:patient.address]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Mobile No:\"}),\" \",patient===null||patient===void 0?void 0:patient.contact]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Consultant:\"}),\" \",doctor===null||doctor===void 0?void 0:doctor.name]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-sm border-2 border-gray-700 rounded-md p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium w-14\",children:\"Weight:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-20 border-b border-gray-400 h-5\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium w-14\",children:\"Height:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-20 border-b border-gray-400 h-5\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium w-10\",children:\"BP:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-24 border-b border-gray-400 h-5\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 flex-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium w-16\",children:\"Others:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 border-b border-gray-400 h-5\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 no-print\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>window.print(),children:\"Print\"})})]}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n        @media print {\\n          .no-print { display: none; }\\n          body { background: white; }\\n        }\\n      \"})]});};export default PrintPrescription;","map":{"version":3,"names":["React","useEffect","useState","useParams","getDoctorById","getPatientById","getPrescriptionById","CLINIC_ADDRESS_LINE_1","CLINIC_ADDRESS_LINE_2","CLINIC_CONTACT","CLINIC_NAME","formatDate","jsx","_jsx","jsxs","_jsxs","PrintPrescription","id","presc","setPresc","patient","setPatient","doctor","setDoctor","p","pat","doc","Promise","all","patient_id","doctor_id","t","setTimeout","window","focus","print","clearTimeout","className","children","created_at","name","age","gender","address","contact","onClick"],"sources":["C:/Users/Me/Desktop/orthnova-app/orthnova-offline/src/print/PrintPrescription.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { getDoctorById, getPatientById, getPrescriptionById } from '../api';\r\nimport { DoctorRow, PatientRow, PrescriptionRow } from '../types';\r\nimport { CLINIC_ADDRESS_LINE_1, CLINIC_ADDRESS_LINE_2, CLINIC_CONTACT, CLINIC_NAME } from '../config/clinic';\r\nimport { formatDate } from '../utils/format';\r\n\r\nconst PrintPrescription: React.FC = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const [presc, setPresc] = useState<PrescriptionRow | null>(null);\r\n  const [patient, setPatient] = useState<PatientRow | null>(null);\r\n  const [doctor, setDoctor] = useState<DoctorRow | null>(null);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (!id) return;\r\n      const p = await getPrescriptionById(id);\r\n      if (!p) return;\r\n      setPresc(p);\r\n      const [pat, doc] = await Promise.all([getPatientById(p.patient_id), getDoctorById(p.doctor_id)]);\r\n      setPatient(pat); setDoctor(doc);\r\n      const t = setTimeout(() => { window.focus(); window.print(); }, 400);\r\n      return () => clearTimeout(t);\r\n    })();\r\n  }, [id]);\r\n\r\n  if (!presc) return <div className=\"p-6\">Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"p-6 print:p-0\">\r\n      <div className=\"max-w-3xl mx-auto bg-white p-6 print:p-0\">\r\n        <div className=\"border-2 border-gray-700 rounded-md p-4\">\r\n          <div className=\"text-center\">\r\n            <h1 className=\"text-2xl font-bold\">{CLINIC_NAME}</h1>\r\n            <div className=\"text-sm\">{CLINIC_ADDRESS_LINE_1}</div>\r\n            <div className=\"text-sm\">{CLINIC_ADDRESS_LINE_2}</div>\r\n            <div className=\"text-sm\">{CLINIC_CONTACT}</div>\r\n            <div className=\"text-xl font-semibold mt-2\">PRESCRIPTION</div>\r\n          </div>\r\n\r\n          <div className=\"mt-4 grid grid-cols-2 gap-4 text-sm\">\r\n            <div className=\"space-y-1\">\r\n              <div><span className=\"font-medium\">Patient ID:</span> {patient?.patient_id}</div>\r\n              <div><span className=\"font-medium\">Date:</span> {formatDate(presc.created_at)}</div>\r\n              <div><span className=\"font-medium\">Name:</span> {patient?.name}</div>\r\n              <div><span className=\"font-medium\">Age/Gender:</span> {patient?.age} / {patient?.gender}</div>\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n              <div><span className=\"font-medium\">Address:</span> {patient?.address}</div>\r\n              <div><span className=\"font-medium\">Mobile No:</span> {patient?.contact}</div>\r\n              <div><span className=\"font-medium\">Consultant:</span> {doctor?.name}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mt-2 text-sm border-2 border-gray-700 rounded-md p-4\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"font-medium w-14\">Weight:</span>\r\n              <div className=\"w-20 border-b border-gray-400 h-5\" />\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"font-medium w-14\">Height:</span>\r\n              <div className=\"w-20 border-b border-gray-400 h-5\" />\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"font-medium w-10\">BP:</span>\r\n              <div className=\"w-24 border-b border-gray-400 h-5\" />\r\n            </div>\r\n            <div className=\"flex items-center gap-2 flex-1\">\r\n              <span className=\"font-medium w-16\">Others:</span>\r\n              <div className=\"flex-1 border-b border-gray-400 h-5\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mt-4 no-print\">\r\n          <button className=\"btn btn-primary\" onClick={() => window.print()}>Print</button>\r\n        </div>\r\n      </div>\r\n\r\n      <style>{`\r\n        @media print {\r\n          .no-print { display: none; }\r\n          body { background: white; }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PrintPrescription;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}