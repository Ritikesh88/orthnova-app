{"ast":null,"code":"import _objectSpread from\"C:/Users/Me/Desktop/orthnova-app/orthnova-offline/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Offline API implementation using localStorage\n// Helper functions for localStorage\nconst STORAGE_KEY='orthnova_data';const getData=()=>{const data=localStorage.getItem(STORAGE_KEY);return data?JSON.parse(data):{users:[],patients:[],doctors:[],services:[],bills:[],billItems:[],inventoryItems:[],stockLedger:[],prescriptions:[],appointments:[],doctorAvailability:[],stockPurchases:[],stockPurchaseItems:[]};};const saveData=data=>{localStorage.setItem(STORAGE_KEY,JSON.stringify(data));};// Initialize with sample data if empty\nconst initializeData=()=>{const data=getData();let initialized=false;// Add sample admin user if no users exist\nif(data.users.length===0){data.users.push({user_id:'admin',password:'admin123',role:'admin',created_at:new Date().toISOString()});initialized=true;}// Add sample doctor if none exist\nif(data.doctors.length===0){data.doctors.push({id:'doc1',name:'Dr. Smith',specialization:'General Physician',contact:'9876543210',created_at:new Date().toISOString()});initialized=true;}// Add sample patient if none exist\nif(data.patients.length===0){data.patients.push({id:'pat1',name:'John Doe',age:30,gender:'Male',contact:'9876543211',address:'123 Main St',created_at:new Date().toISOString()});initialized=true;}// Add sample service if none exist\nif(data.services.length===0){data.services.push({id:'srv1',service_name:'Consultation',service_type:'General',price:500,created_at:new Date().toISOString()});initialized=true;}// Add sample inventory item if none exist\nif(data.inventoryItems.length===0){data.inventoryItems.push({id:'inv1',name:'Paracetamol',sku:'PARA001',unit:'tablet',cost_price:2.5,sale_price:5.0,opening_stock:100,current_stock:100,low_stock_threshold:20,category:'Tablets',manufacturer:'Pharma Co.',expiry_date:'2025-12-31',batch_number:'BATCH001',hsn_code:'3004',gst_rate:18,created_at:new Date().toISOString()});initialized=true;}if(initialized){saveData(data);}return data;};// Initialize data on first load\nlet appData=initializeData();// Utility function to generate IDs\nconst generateId=()=>Math.random().toString(36).substr(2,9);// Users\nexport async function listUsers(){return new Promise(resolve=>{setTimeout(()=>{resolve([...appData.users]);},100);});}export async function addUser(user){return new Promise(resolve=>{setTimeout(()=>{const newUser=_objectSpread(_objectSpread({},user),{},{created_at:new Date().toISOString()});appData.users.push(newUser);saveData(appData);resolve(newUser);},100);});}export async function updateUser(user_id,updates){return new Promise((resolve,reject)=>{setTimeout(()=>{const index=appData.users.findIndex(u=>u.user_id===user_id);if(index===-1){reject(new Error('User not found'));return;}appData.users[index]=_objectSpread(_objectSpread({},appData.users[index]),updates);saveData(appData);resolve(appData.users[index]);},100);});}export async function deleteUser(user_id){return new Promise(resolve=>{setTimeout(()=>{appData.users=appData.users.filter(u=>u.user_id!==user_id);saveData(appData);resolve();},100);});}// Patients\nexport async function createPatient(row){return new Promise(resolve=>{setTimeout(()=>{const newPatient=_objectSpread(_objectSpread({},row),{},{id:generateId(),created_at:new Date().toISOString()});appData.patients.push(newPatient);saveData(appData);resolve(newPatient);},100);});}export async function listPatients(query){return new Promise(resolve=>{setTimeout(()=>{let patients=[...appData.patients];if(query&&query.trim()){const q=query.trim().toLowerCase();patients=patients.filter(p=>p.name.toLowerCase().includes(q)||p.contact.includes(q));}resolve(patients.sort((a,b)=>new Date(b.created_at).getTime()-new Date(a.created_at).getTime()));},100);});}export async function getPatientById(id){return new Promise(resolve=>{setTimeout(()=>{const patient=appData.patients.find(p=>p.id===id)||null;resolve(patient);},100);});}export async function searchPatientsByContact(contact){return new Promise(resolve=>{setTimeout(()=>{const clean=(contact||'').replace(/\\D/g,'');if(!clean){resolve([]);return;}const patients=appData.patients.filter(p=>p.contact.includes(clean));resolve(patients);},100);});}// Doctors\nexport async function createDoctor(row){return new Promise(resolve=>{setTimeout(()=>{const newDoctor=_objectSpread(_objectSpread({},row),{},{id:generateId(),created_at:new Date().toISOString()});appData.doctors.push(newDoctor);saveData(appData);resolve(newDoctor);},100);});}export async function listDoctors(query){return new Promise(resolve=>{setTimeout(()=>{let doctors=[...appData.doctors];if(query&&query.trim()){const q=query.trim().toLowerCase();doctors=doctors.filter(d=>d.name.toLowerCase().includes(q)||d.specialization.toLowerCase().includes(q));}resolve(doctors.sort((a,b)=>new Date(b.created_at).getTime()-new Date(a.created_at).getTime()));},100);});}export async function getDoctorById(id){return new Promise(resolve=>{setTimeout(()=>{const doctor=appData.doctors.find(d=>d.id===id)||null;resolve(doctor);},100);});}// Services\nexport async function addService(row){return new Promise(resolve=>{setTimeout(()=>{const newService=_objectSpread(_objectSpread({},row),{},{id:generateId(),created_at:new Date().toISOString()});appData.services.push(newService);saveData(appData);resolve(newService);},100);});}export async function updateService(id,updates){return new Promise((resolve,reject)=>{setTimeout(()=>{const index=appData.services.findIndex(s=>s.id===id);if(index===-1){reject(new Error('Service not found'));return;}appData.services[index]=_objectSpread(_objectSpread({},appData.services[index]),updates);saveData(appData);resolve(appData.services[index]);},100);});}export async function deleteService(id){return new Promise((resolve,reject)=>{setTimeout(()=>{// Check if service is being used in any bill items\nconst isUsed=appData.billItems.some(item=>item.service_id===id);if(isUsed){reject(new Error('Cannot delete service because it is being used in existing bills.'));return;}appData.services=appData.services.filter(s=>s.id!==id);saveData(appData);resolve();},100);});}export async function listServices(query){return new Promise(resolve=>{setTimeout(()=>{let services=[...appData.services];if(query&&query.trim()){const q=query.trim().toLowerCase();services=services.filter(s=>s.service_name.toLowerCase().includes(q)||s.service_type.toLowerCase().includes(q));}resolve(services.sort((a,b)=>new Date(b.created_at).getTime()-new Date(a.created_at).getTime()));},100);});}// Bills\nexport async function createBill(bill,items){return new Promise(resolve=>{setTimeout(()=>{const newBill=_objectSpread(_objectSpread({},bill),{},{id:generateId(),created_at:new Date().toISOString()});appData.bills.push(newBill);if(items.length>0){const itemsToInsert=items.map(it=>_objectSpread(_objectSpread({},it),{},{id:generateId(),bill_id:newBill.id}));appData.billItems.push(...itemsToInsert);}saveData(appData);resolve(newBill);},100);});}export async function getBillById(id){return new Promise(resolve=>{setTimeout(()=>{const bill=appData.bills.find(b=>b.id===id)||null;resolve(bill);},100);});}export async function listBills(){return new Promise(resolve=>{setTimeout(()=>{resolve([...appData.bills].sort((a,b)=>new Date(b.created_at).getTime()-new Date(a.created_at).getTime()));},100);});}export async function listBillItems(billId){return new Promise(resolve=>{setTimeout(()=>{const items=appData.billItems.filter(item=>item.bill_id===billId);resolve(items);},100);});}// Inventory\nexport async function listInventoryItems(query){return new Promise(resolve=>{setTimeout(()=>{let items=[...appData.inventoryItems];if(query&&query.trim()){const q=query.trim().toLowerCase();items=items.filter(i=>i.name.toLowerCase().includes(q)||i.sku.toLowerCase().includes(q)||i.category.toLowerCase().includes(q)||i.manufacturer.toLowerCase().includes(q));}resolve(items.sort((a,b)=>new Date(b.created_at).getTime()-new Date(a.created_at).getTime()));},100);});}export async function createInventoryItem(row){return new Promise(resolve=>{setTimeout(()=>{const payload=_objectSpread(_objectSpread({},row),{},{id:generateId(),current_stock:row.opening_stock,category:row.category||'Other',manufacturer:row.manufacturer||'Unknown',expiry_date:row.expiry_date||null,batch_number:row.batch_number||null,hsn_code:row.hsn_code||null,gst_rate:row.gst_rate||18,created_at:new Date().toISOString()});appData.inventoryItems.push(payload);saveData(appData);resolve(payload);},100);});}export async function updateInventoryItem(id,updates){return new Promise((resolve,reject)=>{setTimeout(()=>{const index=appData.inventoryItems.findIndex(i=>i.id===id);if(index===-1){reject(new Error('Inventory item not found'));return;}appData.inventoryItems[index]=_objectSpread(_objectSpread({},appData.inventoryItems[index]),updates);saveData(appData);resolve(appData.inventoryItems[index]);},100);});}export async function adjustStock(item_id,change,reason,opts){return new Promise((resolve,reject)=>{setTimeout(()=>{var _opts$notes,_opts$reference_bill_,_opts$created_by;const index=appData.inventoryItems.findIndex(i=>i.id===item_id);if(index===-1){reject(new Error('Inventory item not found'));return;}// Create ledger entry\nconst ledgerEntry={id:generateId(),item_id,change,reason,notes:(_opts$notes=opts===null||opts===void 0?void 0:opts.notes)!==null&&_opts$notes!==void 0?_opts$notes:null,reference_bill_id:(_opts$reference_bill_=opts===null||opts===void 0?void 0:opts.reference_bill_id)!==null&&_opts$reference_bill_!==void 0?_opts$reference_bill_:null,created_by:(_opts$created_by=opts===null||opts===void 0?void 0:opts.created_by)!==null&&_opts$created_by!==void 0?_opts$created_by:null,created_at:new Date().toISOString()};appData.stockLedger.push(ledgerEntry);// Update stock\nappData.inventoryItems[index].current_stock+=change;saveData(appData);resolve({item:appData.inventoryItems[index],ledger:ledgerEntry});},100);});}// Medicine Store specific functions\nexport async function createMedicineStoreBill(bill,items,createdBy){return new Promise((resolve,reject)=>{setTimeout(async()=>{try{const newBill=_objectSpread(_objectSpread({},bill),{},{id:generateId(),created_at:new Date().toISOString()});appData.bills.push(newBill);if(items.length>0){const itemsToInsert=items.map(it=>_objectSpread(_objectSpread({},it),{},{id:generateId(),bill_id:newBill.id}));appData.billItems.push(...itemsToInsert);// Update stock for each item\nfor(const item of items){if(item.inventory_item_id){await adjustStock(item.inventory_item_id,-item.quantity,'dispense',{reference_bill_id:newBill.id,created_by:createdBy||null,notes:\"Sold in bill \".concat(newBill.bill_number)});}}}saveData(appData);resolve(newBill);}catch(error){reject(error);}},100);});}export async function getLowStockItems(){return new Promise(resolve=>{setTimeout(()=>{const lowStockItems=appData.inventoryItems.filter(item=>item.low_stock_threshold!==null&&item.current_stock<=item.low_stock_threshold).map(item=>({id:item.id,name:item.name,current_stock:item.current_stock,low_stock_threshold:item.low_stock_threshold,category:item.category,manufacturer:item.manufacturer})).sort((a,b)=>a.current_stock-b.current_stock);resolve(lowStockItems);},100);});}export async function getExpiringItems(){let days=arguments.length>0&&arguments[0]!==undefined?arguments[0]:30;return new Promise(resolve=>{setTimeout(()=>{const futureDate=new Date();futureDate.setDate(futureDate.getDate()+days);const expiringItems=appData.inventoryItems.filter(item=>item.expiry_date!==null&&new Date(item.expiry_date)<=futureDate).sort((a,b)=>new Date(a.expiry_date).getTime()-new Date(b.expiry_date).getTime());resolve(expiringItems);},100);});}// Prescriptions\nexport async function createPrescription(row){return new Promise(resolve=>{setTimeout(()=>{const newPrescription=_objectSpread(_objectSpread({},row),{},{id:generateId(),created_at:new Date().toISOString()});appData.prescriptions.push(newPrescription);saveData(appData);resolve(newPrescription);},100);});}export async function getPrescriptionById(id){return new Promise(resolve=>{setTimeout(()=>{const prescription=appData.prescriptions.find(p=>p.id===id)||null;resolve(prescription);},100);});}export async function listPrescriptions(){return new Promise(resolve=>{setTimeout(()=>{resolve([...appData.prescriptions].sort((a,b)=>new Date(b.created_at).getTime()-new Date(a.created_at).getTime()));},100);});}// Appointments\nexport async function createAppointment(row){return new Promise(resolve=>{setTimeout(()=>{const newAppointment=_objectSpread(_objectSpread({},row),{},{id:generateId(),created_at:new Date().toISOString()});appData.appointments.push(newAppointment);saveData(appData);resolve(newAppointment);},100);});}export async function listAppointments(filters){return new Promise(resolve=>{setTimeout(()=>{let appointments=[...appData.appointments];if(filters!==null&&filters!==void 0&&filters.doctor_id){appointments=appointments.filter(a=>a.doctor_id===filters.doctor_id);}if(filters!==null&&filters!==void 0&&filters.patient_id){appointments=appointments.filter(a=>a.patient_id===filters.patient_id);}if(filters!==null&&filters!==void 0&&filters.appointment_date){appointments=appointments.filter(a=>a.appointment_date===filters.appointment_date);}if(filters!==null&&filters!==void 0&&filters.appointment_date_exact){appointments=appointments.filter(a=>a.appointment_date===filters.appointment_date_exact||a.appointment_datetime&&a.appointment_datetime.startsWith(filters.appointment_date_exact));}resolve(appointments.sort((a,b)=>{if(a.appointment_datetime&&b.appointment_datetime){return new Date(a.appointment_datetime).getTime()-new Date(b.appointment_datetime).getTime();}return new Date(a.created_at).getTime()-new Date(b.created_at).getTime();}));},100);});}export async function updateAppointment(id,updates){return new Promise((resolve,reject)=>{setTimeout(()=>{const index=appData.appointments.findIndex(a=>a.id===id);if(index===-1){reject(new Error('Appointment not found'));return;}appData.appointments[index]=_objectSpread(_objectSpread({},appData.appointments[index]),updates);saveData(appData);resolve(appData.appointments[index]);},100);});}// Reports\nexport async function getSalesSummary(startDate,endDate){let groupBy=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'day';return new Promise(resolve=>{setTimeout(()=>{const start=new Date(startDate);const end=new Date(endDate);const filteredBills=appData.bills.filter(bill=>{const billDate=new Date(bill.created_at);return billDate>=start&&billDate<=end;});const grouped={};filteredBills.forEach(bill=>{const date=new Date(bill.created_at);let key;if(groupBy==='month'){key=\"\".concat(date.getFullYear(),\"-\").concat(String(date.getMonth()+1).padStart(2,'0'));}else{key=date.toISOString().split('T')[0];}if(!grouped[key]){grouped[key]={date:key,total_bills:0,total_amount:0,total_discount:0,net_amount:0};}grouped[key].total_bills+=1;grouped[key].total_amount+=Number(bill.total_amount||0);grouped[key].total_discount+=Number(bill.discount||0);grouped[key].net_amount+=Number(bill.net_amount||0);});resolve(Object.values(grouped).sort((a,b)=>a.date.localeCompare(b.date)));},100);});}export async function getDoctorSalesReport(startDate,endDate){return new Promise(resolve=>{setTimeout(()=>{const start=new Date(startDate);const end=new Date(endDate);const filteredBills=appData.bills.filter(bill=>{const billDate=new Date(bill.created_at);return billDate>=start&&billDate<=end&&bill.doctor_id;});const doctorMap={};filteredBills.forEach(bill=>{const doctorId=bill.doctor_id;if(!doctorId)return;const doctor=appData.doctors.find(d=>d.id===doctorId);if(!doctorMap[doctorId]){doctorMap[doctorId]={doctor_id:doctorId,doctor_name:(doctor===null||doctor===void 0?void 0:doctor.name)||'Unknown',total_bills:0,total_amount:0,total_discount:0,net_amount:0};}doctorMap[doctorId].total_bills+=1;doctorMap[doctorId].total_amount+=Number(bill.total_amount||0);doctorMap[doctorId].total_discount+=Number(bill.discount||0);doctorMap[doctorId].net_amount+=Number(bill.net_amount||0);});resolve(Object.values(doctorMap).sort((a,b)=>b.net_amount-a.net_amount));},100);});}export async function getBillsByDate(date){return new Promise(resolve=>{setTimeout(()=>{const targetDate=new Date(date);const filteredBills=appData.bills.filter(bill=>{const billDate=new Date(bill.created_at);return billDate.toDateString()===targetDate.toDateString();});const result=filteredBills.map(bill=>{const patient=bill.patient_id?appData.patients.find(p=>p.id===bill.patient_id):null;const doctor=bill.doctor_id?appData.doctors.find(d=>d.id===bill.doctor_id):null;return _objectSpread(_objectSpread({},bill),{},{patient_name:(patient===null||patient===void 0?void 0:patient.name)||null,doctor_name:(doctor===null||doctor===void 0?void 0:doctor.name)||null});});resolve(result.sort((a,b)=>new Date(b.created_at).getTime()-new Date(a.created_at).getTime()));},100);});}export async function getBillsByMonth(year,month){return new Promise(resolve=>{setTimeout(()=>{const filteredBills=appData.bills.filter(bill=>{const billDate=new Date(bill.created_at);return billDate.getFullYear()===year&&billDate.getMonth()===month-1;});const result=filteredBills.map(bill=>{const patient=bill.patient_id?appData.patients.find(p=>p.id===bill.patient_id):null;const doctor=bill.doctor_id?appData.doctors.find(d=>d.id===bill.doctor_id):null;return _objectSpread(_objectSpread({},bill),{},{patient_name:(patient===null||patient===void 0?void 0:patient.name)||null,doctor_name:(doctor===null||doctor===void 0?void 0:doctor.name)||null});});resolve(result.sort((a,b)=>new Date(b.created_at).getTime()-new Date(a.created_at).getTime()));},100);});}export async function getBillsByDoctor(doctorId,startDate,endDate){return new Promise(resolve=>{setTimeout(()=>{const start=new Date(startDate);const end=new Date(endDate);const filteredBills=appData.bills.filter(bill=>{const billDate=new Date(bill.created_at);return bill.doctor_id===doctorId&&billDate>=start&&billDate<=end;});const doctor=appData.doctors.find(d=>d.id===doctorId);const doctorName=(doctor===null||doctor===void 0?void 0:doctor.name)||'Unknown';const result=filteredBills.map(bill=>{const patient=bill.patient_id?appData.patients.find(p=>p.id===bill.patient_id):null;return _objectSpread(_objectSpread({},bill),{},{patient_name:(patient===null||patient===void 0?void 0:patient.name)||null,doctor_name:doctorName});});resolve(result.sort((a,b)=>new Date(b.created_at).getTime()-new Date(a.created_at).getTime()));},100);});}export async function getBillsByDateRange(startDate,endDate){return new Promise(resolve=>{setTimeout(()=>{const start=new Date(startDate);const end=new Date(endDate);const filteredBills=appData.bills.filter(bill=>{const billDate=new Date(bill.created_at);return billDate>=start&&billDate<=end;});const result=filteredBills.map(bill=>{const patient=bill.patient_id?appData.patients.find(p=>p.id===bill.patient_id):null;const doctor=bill.doctor_id?appData.doctors.find(d=>d.id===bill.doctor_id):null;return _objectSpread(_objectSpread({},bill),{},{patient_name:(patient===null||patient===void 0?void 0:patient.name)||null,doctor_name:(doctor===null||doctor===void 0?void 0:doctor.name)||null});});resolve(result.sort((a,b)=>new Date(b.created_at).getTime()-new Date(a.created_at).getTime()));},100);});}export async function getServiceSalesReport(startDate,endDate){return new Promise(resolve=>{setTimeout(()=>{const start=new Date(startDate);const end=new Date(endDate);// Get bill items within date range\nconst filteredBills=appData.bills.filter(bill=>{const billDate=new Date(bill.created_at);return billDate>=start&&billDate<=end;});const billIds=filteredBills.map(b=>b.id);const filteredItems=appData.billItems.filter(item=>billIds.includes(item.bill_id)&&item.service_id);const serviceMap={};filteredItems.forEach(item=>{const serviceId=item.service_id||'other';const serviceName=item.item_name||'Unknown Service';if(!serviceMap[serviceId]){serviceMap[serviceId]={service_id:serviceId,service_name:serviceName,total_quantity:0,total_amount:0};}serviceMap[serviceId].total_quantity+=Number(item.quantity||0);serviceMap[serviceId].total_amount+=Number(item.total||0);});// Fetch actual service names\nObject.keys(serviceMap).forEach(serviceId=>{if(serviceId!=='other'){const service=appData.services.find(s=>s.id===serviceId);if(service){serviceMap[serviceId].service_name=service.service_name;}}});resolve(Object.values(serviceMap).sort((a,b)=>b.total_amount-a.total_amount));},100);});}// Payment update function\nexport async function recordPayment(billId,paidAmount,paymentMode,transactionReference){return new Promise((resolve,reject)=>{setTimeout(()=>{const billIndex=appData.bills.findIndex(b=>b.id===billId);if(billIndex===-1){reject(new Error('Bill not found'));return;}const bill=appData.bills[billIndex];const currentPaidAmount=Number(bill.net_amount||0)-Number(bill.balance||bill.net_amount);const newPaidAmount=currentPaidAmount+paidAmount;const balance=Number(bill.net_amount)-newPaidAmount;let status='pending';if(balance<=0){status='paid';}else if(newPaidAmount>0){status='partial';}const updates={status};if(paymentMode){updates.mode_of_payment=paymentMode;}if(transactionReference){updates.transaction_reference=transactionReference;}appData.bills[billIndex]=_objectSpread(_objectSpread({},bill),updates);saveData(appData);resolve(appData.bills[billIndex]);},100);});}// Admin summary function\nexport async function adminSummary(date){return new Promise(resolve=>{setTimeout(()=>{const targetDate=date?new Date(date):new Date();// Get bills summary\nconst filteredBills=appData.bills.filter(bill=>{const billDate=new Date(bill.created_at);return billDate.toDateString()===targetDate.toDateString();});const billsSummary=filteredBills.reduce((acc,bill)=>({total_bills:acc.total_bills+1,total_amount:acc.total_amount+Number(bill.total_amount||0),total_discount:acc.total_discount+Number(bill.discount||0),net_amount:acc.net_amount+Number(bill.net_amount||0)}),{total_bills:0,total_amount:0,total_discount:0,net_amount:0});// Get appointments summary\nconst filteredAppointments=appData.appointments.filter(appointment=>{const apptDate=appointment.appointment_date?new Date(appointment.appointment_date):appointment.appointment_datetime?new Date(appointment.appointment_datetime):null;return apptDate&&apptDate.toDateString()===targetDate.toDateString();});const total_appointments=filteredAppointments.length;const pending_appointments=filteredAppointments.filter(a=>a.status==='booked').length;resolve(_objectSpread(_objectSpread({},billsSummary),{},{total_appointments,pending_appointments}));},100);});}// Get pending appointments for a specific date\nexport async function getPendingAppointments(date){return new Promise(resolve=>{setTimeout(()=>{const targetDate=new Date(date);const pendingAppointments=appData.appointments.filter(appointment=>{if(appointment.status!=='booked')return false;const apptDate=appointment.appointment_date?new Date(appointment.appointment_date):appointment.appointment_datetime?new Date(appointment.appointment_datetime):null;return apptDate&&apptDate.toDateString()===targetDate.toDateString();});resolve(pendingAppointments.sort((a,b)=>{if(a.appointment_datetime&&b.appointment_datetime){return new Date(a.appointment_datetime).getTime()-new Date(b.appointment_datetime).getTime();}return 0;}));},100);});}// Dashboard Analytics\nexport async function getTopDoctors(startDate,endDate){let limit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:5;return new Promise(resolve=>{setTimeout(()=>{const start=new Date(startDate);const end=new Date(endDate);const filteredBills=appData.bills.filter(bill=>{const billDate=new Date(bill.created_at);return bill.doctor_id&&billDate>=start&&billDate<=end;});const doctorMap=new Map();filteredBills.forEach(bill=>{const doctorId=bill.doctor_id;const existing=doctorMap.get(doctorId);if(existing){existing.revenue+=Number(bill.net_amount||0);existing.count+=1;}else{doctorMap.set(doctorId,{revenue:Number(bill.net_amount||0),count:1});}});// Get doctor names\nconst doctorsNameMap={};appData.doctors.forEach(d=>{doctorsNameMap[d.id]=d.name;});const topDoctors=Array.from(doctorMap.entries()).map(_ref=>{let[doctor_id,data]=_ref;return{doctor_id,doctor_name:doctorsNameMap[doctor_id]||'Unknown',total_revenue:data.revenue,total_bills:data.count};}).sort((a,b)=>b.total_revenue-a.total_revenue).slice(0,limit);resolve(topDoctors);},100);});}export async function getTopServices(startDate,endDate){let limit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:5;return new Promise(resolve=>{setTimeout(()=>{const start=new Date(startDate);const end=new Date(endDate);// Get bills in date range\nconst filteredBills=appData.bills.filter(bill=>{const billDate=new Date(bill.created_at);return billDate>=start&&billDate<=end;});const billIds=filteredBills.map(b=>b.id);const filteredItems=appData.billItems.filter(item=>billIds.includes(item.bill_id)&&item.service_id);const serviceMap=new Map();filteredItems.forEach(item=>{if(!item.service_id)return;const existing=serviceMap.get(item.service_id);if(existing){existing.count+=item.quantity;existing.revenue+=Number(item.total||0);}else{serviceMap.set(item.service_id,{count:item.quantity,revenue:Number(item.total||0)});}});// Get service names\nconst servicesNameMap={};appData.services.forEach(s=>{servicesNameMap[s.id]=s.service_name;});const topServices=Array.from(serviceMap.entries()).map(_ref2=>{let[service_id,data]=_ref2;return{service_id,service_name:servicesNameMap[service_id]||'Unknown Service',usage_count:data.count,total_revenue:data.revenue};}).sort((a,b)=>b.usage_count-a.usage_count).slice(0,limit);resolve(topServices);},100);});}// Doctor Availability\nexport async function listDoctorAvailability(doctorId){return new Promise(resolve=>{setTimeout(()=>{const availability=appData.doctorAvailability.filter(a=>a.doctor_id===doctorId).sort((a,b)=>{if(a.day_of_week!==null&&b.day_of_week!==null){if(a.day_of_week!==b.day_of_week){return a.day_of_week-b.day_of_week;}return a.start_time.localeCompare(b.start_time);}return 0;});resolve(availability);},100);});}export async function setDoctorAvailability(doctorId,availability){return new Promise(resolve=>{setTimeout(()=>{// For recurring availability, check if there's already an entry for this day/time\nlet existingId=null;if(availability.day_of_week!==null){const existing=appData.doctorAvailability.find(a=>a.doctor_id===doctorId&&a.day_of_week===availability.day_of_week&&a.start_time===availability.start_time&&a.end_time===availability.end_time);if(existing){existingId=existing.id;}}if(existingId){// Update existing entry\nconst index=appData.doctorAvailability.findIndex(a=>a.id===existingId);appData.doctorAvailability[index]=_objectSpread(_objectSpread(_objectSpread({},appData.doctorAvailability[index]),availability),{},{updated_at:new Date().toISOString()});saveData(appData);resolve(appData.doctorAvailability[index]);}else{// Create new entry\nconst newAvailability=_objectSpread(_objectSpread({},availability),{},{id:generateId(),doctor_id:doctorId,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});appData.doctorAvailability.push(newAvailability);saveData(appData);resolve(newAvailability);}},100);});}export async function deleteDoctorAvailability(id){return new Promise(resolve=>{setTimeout(()=>{appData.doctorAvailability=appData.doctorAvailability.filter(a=>a.id!==id);saveData(appData);resolve();},100);});}export async function listStockPurchases(){return new Promise(resolve=>{setTimeout(()=>{resolve([...appData.stockPurchases].sort((a,b)=>new Date(b.created_at).getTime()-new Date(a.created_at).getTime()));},100);});}export async function getStockPurchaseById(id){return new Promise(resolve=>{setTimeout(()=>{const purchase=appData.stockPurchases.find(p=>p.id===id)||null;resolve(purchase);},100);});}export async function listStockPurchaseItems(purchaseId){return new Promise(resolve=>{setTimeout(()=>{const items=appData.stockPurchaseItems.filter(item=>item.purchase_id===purchaseId);resolve(items);},100);});}","map":{"version":3,"names":["STORAGE_KEY","getData","data","localStorage","getItem","JSON","parse","users","patients","doctors","services","bills","billItems","inventoryItems","stockLedger","prescriptions","appointments","doctorAvailability","stockPurchases","stockPurchaseItems","saveData","setItem","stringify","initializeData","initialized","length","push","user_id","password","role","created_at","Date","toISOString","id","name","specialization","contact","age","gender","address","service_name","service_type","price","sku","unit","cost_price","sale_price","opening_stock","current_stock","low_stock_threshold","category","manufacturer","expiry_date","batch_number","hsn_code","gst_rate","appData","generateId","Math","random","toString","substr","listUsers","Promise","resolve","setTimeout","addUser","user","newUser","_objectSpread","updateUser","updates","reject","index","findIndex","u","Error","deleteUser","filter","createPatient","row","newPatient","listPatients","query","trim","q","toLowerCase","p","includes","sort","a","b","getTime","getPatientById","patient","find","searchPatientsByContact","clean","replace","createDoctor","newDoctor","listDoctors","d","getDoctorById","doctor","addService","newService","updateService","s","deleteService","isUsed","some","item","service_id","listServices","createBill","bill","items","newBill","itemsToInsert","map","it","bill_id","getBillById","listBills","listBillItems","billId","listInventoryItems","i","createInventoryItem","payload","updateInventoryItem","adjustStock","item_id","change","reason","opts","_opts$notes","_opts$reference_bill_","_opts$created_by","ledgerEntry","notes","reference_bill_id","created_by","ledger","createMedicineStoreBill","createdBy","inventory_item_id","quantity","concat","bill_number","error","getLowStockItems","lowStockItems","getExpiringItems","days","arguments","undefined","futureDate","setDate","getDate","expiringItems","createPrescription","newPrescription","getPrescriptionById","prescription","listPrescriptions","createAppointment","newAppointment","listAppointments","filters","doctor_id","patient_id","appointment_date","appointment_date_exact","appointment_datetime","startsWith","updateAppointment","getSalesSummary","startDate","endDate","groupBy","start","end","filteredBills","billDate","grouped","forEach","date","key","getFullYear","String","getMonth","padStart","split","total_bills","total_amount","total_discount","net_amount","Number","discount","Object","values","localeCompare","getDoctorSalesReport","doctorMap","doctorId","doctor_name","getBillsByDate","targetDate","toDateString","result","patient_name","getBillsByMonth","year","month","getBillsByDoctor","doctorName","getBillsByDateRange","getServiceSalesReport","billIds","filteredItems","serviceMap","serviceId","serviceName","item_name","total_quantity","total","keys","service","recordPayment","paidAmount","paymentMode","transactionReference","billIndex","currentPaidAmount","balance","newPaidAmount","status","mode_of_payment","transaction_reference","adminSummary","billsSummary","reduce","acc","filteredAppointments","appointment","apptDate","total_appointments","pending_appointments","getPendingAppointments","pendingAppointments","getTopDoctors","limit","Map","existing","get","revenue","count","set","doctorsNameMap","topDoctors","Array","from","entries","_ref","total_revenue","slice","getTopServices","servicesNameMap","topServices","_ref2","usage_count","listDoctorAvailability","availability","day_of_week","start_time","setDoctorAvailability","existingId","end_time","updated_at","newAvailability","deleteDoctorAvailability","listStockPurchases","getStockPurchaseById","purchase","listStockPurchaseItems","purchaseId","purchase_id"],"sources":["C:/Users/Me/Desktop/orthnova-app/orthnova-offline/src/api/index.ts"],"sourcesContent":["// Offline API implementation using localStorage\r\nimport {\r\n  BillItemRow,\r\n  BillRow,\r\n  DoctorRow,\r\n  DoctorAvailabilityRow,\r\n  InventoryItemRow,\r\n  PatientRow,\r\n  PrescriptionRow,\r\n  ServiceRow,\r\n  StockLedgerRow,\r\n  UserRow,\r\n  AppointmentRow,\r\n  StockPurchaseRow,\r\n  StockPurchaseItemRow\r\n} from '../types';\r\n\r\n// Helper functions for localStorage\r\nconst STORAGE_KEY = 'orthnova_data';\r\n\r\nconst getData = () => {\r\n  const data = localStorage.getItem(STORAGE_KEY);\r\n  return data ? JSON.parse(data) : {\r\n    users: [],\r\n    patients: [],\r\n    doctors: [],\r\n    services: [],\r\n    bills: [],\r\n    billItems: [],\r\n    inventoryItems: [],\r\n    stockLedger: [],\r\n    prescriptions: [],\r\n    appointments: [],\r\n    doctorAvailability: [],\r\n    stockPurchases: [],\r\n    stockPurchaseItems: []\r\n  };\r\n};\r\n\r\nconst saveData = (data: any) => {\r\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\r\n};\r\n\r\n// Initialize with sample data if empty\r\nconst initializeData = () => {\r\n  const data = getData();\r\n  let initialized = false;\r\n  \r\n  // Add sample admin user if no users exist\r\n  if (data.users.length === 0) {\r\n    data.users.push({\r\n      user_id: 'admin',\r\n      password: 'admin123',\r\n      role: 'admin',\r\n      created_at: new Date().toISOString()\r\n    });\r\n    initialized = true;\r\n  }\r\n  \r\n  // Add sample doctor if none exist\r\n  if (data.doctors.length === 0) {\r\n    data.doctors.push({\r\n      id: 'doc1',\r\n      name: 'Dr. Smith',\r\n      specialization: 'General Physician',\r\n      contact: '9876543210',\r\n      created_at: new Date().toISOString()\r\n    });\r\n    initialized = true;\r\n  }\r\n  \r\n  // Add sample patient if none exist\r\n  if (data.patients.length === 0) {\r\n    data.patients.push({\r\n      id: 'pat1',\r\n      name: 'John Doe',\r\n      age: 30,\r\n      gender: 'Male',\r\n      contact: '9876543211',\r\n      address: '123 Main St',\r\n      created_at: new Date().toISOString()\r\n    });\r\n    initialized = true;\r\n  }\r\n  \r\n  // Add sample service if none exist\r\n  if (data.services.length === 0) {\r\n    data.services.push({\r\n      id: 'srv1',\r\n      service_name: 'Consultation',\r\n      service_type: 'General',\r\n      price: 500,\r\n      created_at: new Date().toISOString()\r\n    });\r\n    initialized = true;\r\n  }\r\n  \r\n  // Add sample inventory item if none exist\r\n  if (data.inventoryItems.length === 0) {\r\n    data.inventoryItems.push({\r\n      id: 'inv1',\r\n      name: 'Paracetamol',\r\n      sku: 'PARA001',\r\n      unit: 'tablet',\r\n      cost_price: 2.5,\r\n      sale_price: 5.0,\r\n      opening_stock: 100,\r\n      current_stock: 100,\r\n      low_stock_threshold: 20,\r\n      category: 'Tablets',\r\n      manufacturer: 'Pharma Co.',\r\n      expiry_date: '2025-12-31',\r\n      batch_number: 'BATCH001',\r\n      hsn_code: '3004',\r\n      gst_rate: 18,\r\n      created_at: new Date().toISOString()\r\n    });\r\n    initialized = true;\r\n  }\r\n  \r\n  if (initialized) {\r\n    saveData(data);\r\n  }\r\n  \r\n  return data;\r\n};\r\n\r\n// Initialize data on first load\r\nlet appData = initializeData();\r\n\r\n// Utility function to generate IDs\r\nconst generateId = () => Math.random().toString(36).substr(2, 9);\r\n\r\n// Users\r\nexport async function listUsers(): Promise<UserRow[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      resolve([...appData.users]);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function addUser(user: { \r\n  user_id: string; \r\n  password: string; \r\n  role: UserRow['role'];\r\n}): Promise<UserRow> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const newUser = {\r\n        ...user,\r\n        created_at: new Date().toISOString()\r\n      };\r\n      appData.users.push(newUser);\r\n      saveData(appData);\r\n      resolve(newUser);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function updateUser(user_id: string, updates: Partial<Pick<UserRow, 'password' | 'role'>>): Promise<UserRow> {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      const index = appData.users.findIndex((u: UserRow) => u.user_id === user_id);\r\n      if (index === -1) {\r\n        reject(new Error('User not found'));\r\n        return;\r\n      }\r\n      \r\n      appData.users[index] = {\r\n        ...appData.users[index],\r\n        ...updates\r\n      };\r\n      \r\n      saveData(appData);\r\n      resolve(appData.users[index]);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function deleteUser(user_id: string): Promise<void> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      appData.users = appData.users.filter((u: UserRow) => u.user_id !== user_id);\r\n      saveData(appData);\r\n      resolve();\r\n    }, 100);\r\n  });\r\n}\r\n\r\n// Patients\r\nexport async function createPatient(row: Omit<PatientRow, 'created_at'>): Promise<PatientRow> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const newPatient = {\r\n        ...row,\r\n        id: generateId(),\r\n        created_at: new Date().toISOString()\r\n      };\r\n      appData.patients.push(newPatient);\r\n      saveData(appData);\r\n      resolve(newPatient);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function listPatients(query?: string): Promise<PatientRow[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      let patients = [...appData.patients];\r\n      \r\n      if (query && query.trim()) {\r\n        const q = query.trim().toLowerCase();\r\n        patients = patients.filter(p => \r\n          p.name.toLowerCase().includes(q) || \r\n          p.contact.includes(q)\r\n        );\r\n      }\r\n      \r\n      resolve(patients.sort((a, b) => \r\n        new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n      ));\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function getPatientById(id: string): Promise<PatientRow | null> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const patient = appData.patients.find((p: PatientRow) => p.id === id) || null;\r\n      resolve(patient);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function searchPatientsByContact(contact: string): Promise<PatientRow[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const clean = (contact || '').replace(/\\D/g, '');\r\n      if (!clean) {\r\n        resolve([]);\r\n        return;\r\n      }\r\n      \r\n      const patients = appData.patients.filter((p: PatientRow) => \r\n        p.contact.includes(clean)\r\n      );\r\n      \r\n      resolve(patients);\r\n    }, 100);\r\n  });\r\n}\r\n\r\n// Doctors\r\nexport async function createDoctor(row: Omit<DoctorRow, 'created_at'>): Promise<DoctorRow> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const newDoctor = {\r\n        ...row,\r\n        id: generateId(),\r\n        created_at: new Date().toISOString()\r\n      };\r\n      appData.doctors.push(newDoctor);\r\n      saveData(appData);\r\n      resolve(newDoctor);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function listDoctors(query?: string): Promise<DoctorRow[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      let doctors = [...appData.doctors];\r\n      \r\n      if (query && query.trim()) {\r\n        const q = query.trim().toLowerCase();\r\n        doctors = doctors.filter(d => \r\n          d.name.toLowerCase().includes(q) || \r\n          d.specialization.toLowerCase().includes(q)\r\n        );\r\n      }\r\n      \r\n      resolve(doctors.sort((a, b) => \r\n        new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n      ));\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function getDoctorById(id: string): Promise<DoctorRow | null> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const doctor = appData.doctors.find((d: DoctorRow) => d.id === id) || null;\r\n      resolve(doctor);\r\n    }, 100);\r\n  });\r\n}\r\n\r\n// Services\r\nexport async function addService(row: Omit<ServiceRow, 'id' | 'created_at'>): Promise<ServiceRow> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const newService = {\r\n        ...row,\r\n        id: generateId(),\r\n        created_at: new Date().toISOString()\r\n      };\r\n      appData.services.push(newService);\r\n      saveData(appData);\r\n      resolve(newService);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function updateService(id: string, updates: Partial<Omit<ServiceRow, 'id' | 'created_at'>>): Promise<ServiceRow> {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      const index = appData.services.findIndex((s: ServiceRow) => s.id === id);\r\n      if (index === -1) {\r\n        reject(new Error('Service not found'));\r\n        return;\r\n      }\r\n      \r\n      appData.services[index] = {\r\n        ...appData.services[index],\r\n        ...updates\r\n      };\r\n      \r\n      saveData(appData);\r\n      resolve(appData.services[index]);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function deleteService(id: string): Promise<void> {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      // Check if service is being used in any bill items\r\n      const isUsed = appData.billItems.some((item: BillItemRow) => item.service_id === id);\r\n      \r\n      if (isUsed) {\r\n        reject(new Error('Cannot delete service because it is being used in existing bills.'));\r\n        return;\r\n      }\r\n      \r\n      appData.services = appData.services.filter((s: ServiceRow) => s.id !== id);\r\n      saveData(appData);\r\n      resolve();\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function listServices(query?: string): Promise<ServiceRow[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      let services = [...appData.services];\r\n      \r\n      if (query && query.trim()) {\r\n        const q = query.trim().toLowerCase();\r\n        services = services.filter(s => \r\n          s.service_name.toLowerCase().includes(q) || \r\n          s.service_type.toLowerCase().includes(q)\r\n        );\r\n      }\r\n      \r\n      resolve(services.sort((a, b) => \r\n        new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n      ));\r\n    }, 100);\r\n  });\r\n}\r\n\r\n// Bills\r\nexport async function createBill(\r\n  bill: Omit<BillRow, 'id' | 'created_at'>,\r\n  items: Array<Omit<BillItemRow, 'id'>>\r\n): Promise<BillRow> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const newBill = {\r\n        ...bill,\r\n        id: generateId(),\r\n        created_at: new Date().toISOString()\r\n      };\r\n      \r\n      appData.bills.push(newBill);\r\n      \r\n      if (items.length > 0) {\r\n        const itemsToInsert = items.map((it) => ({ \r\n          ...it, \r\n          id: generateId(),\r\n          bill_id: newBill.id \r\n        }));\r\n        appData.billItems.push(...itemsToInsert);\r\n      }\r\n      \r\n      saveData(appData);\r\n      resolve(newBill);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function getBillById(id: string): Promise<BillRow | null> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const bill = appData.bills.find((b: BillRow) => b.id === id) || null;\r\n      resolve(bill);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function listBills(): Promise<BillRow[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      resolve([...appData.bills].sort((a, b) => \r\n        new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n      ));\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function listBillItems(billId: string): Promise<BillItemRow[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const items = appData.billItems.filter((item: BillItemRow) => item.bill_id === billId);\r\n      resolve(items);\r\n    }, 100);\r\n  });\r\n}\r\n\r\n// Inventory\r\nexport async function listInventoryItems(query?: string): Promise<InventoryItemRow[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      let items = [...appData.inventoryItems];\r\n      \r\n      if (query && query.trim()) {\r\n        const q = query.trim().toLowerCase();\r\n        items = items.filter(i => \r\n          i.name.toLowerCase().includes(q) || \r\n          i.sku.toLowerCase().includes(q) ||\r\n          i.category.toLowerCase().includes(q) ||\r\n          i.manufacturer.toLowerCase().includes(q)\r\n        );\r\n      }\r\n      \r\n      resolve(items.sort((a, b) => \r\n        new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n      ));\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function createInventoryItem(row: Omit<InventoryItemRow, 'id' | 'created_at' | 'current_stock'>): Promise<InventoryItemRow> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const payload = { \r\n        ...row, \r\n        id: generateId(),\r\n        current_stock: row.opening_stock,\r\n        category: row.category || 'Other',\r\n        manufacturer: row.manufacturer || 'Unknown',\r\n        expiry_date: row.expiry_date || null,\r\n        batch_number: row.batch_number || null,\r\n        hsn_code: row.hsn_code || null,\r\n        gst_rate: row.gst_rate || 18,\r\n        created_at: new Date().toISOString()\r\n      } as any;\r\n      \r\n      appData.inventoryItems.push(payload);\r\n      saveData(appData);\r\n      resolve(payload);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function updateInventoryItem(id: string, updates: Partial<Omit<InventoryItemRow, 'id' | 'created_at'>>): Promise<InventoryItemRow> {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      const index = appData.inventoryItems.findIndex((i: InventoryItemRow) => i.id === id);\r\n      if (index === -1) {\r\n        reject(new Error('Inventory item not found'));\r\n        return;\r\n      }\r\n      \r\n      appData.inventoryItems[index] = {\r\n        ...appData.inventoryItems[index],\r\n        ...updates\r\n      };\r\n      \r\n      saveData(appData);\r\n      resolve(appData.inventoryItems[index]);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function adjustStock(\r\n  item_id: string,\r\n  change: number,\r\n  reason: StockLedgerRow['reason'],\r\n  opts?: { notes?: string | null; reference_bill_id?: string | null; created_by?: string | null }\r\n): Promise<{ item: InventoryItemRow; ledger: StockLedgerRow }> {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      const index = appData.inventoryItems.findIndex((i: InventoryItemRow) => i.id === item_id);\r\n      if (index === -1) {\r\n        reject(new Error('Inventory item not found'));\r\n        return;\r\n      }\r\n      \r\n      // Create ledger entry\r\n      const ledgerEntry: StockLedgerRow = {\r\n        id: generateId(),\r\n        item_id,\r\n        change,\r\n        reason,\r\n        notes: opts?.notes ?? null,\r\n        reference_bill_id: opts?.reference_bill_id ?? null,\r\n        created_by: opts?.created_by ?? null,\r\n        created_at: new Date().toISOString()\r\n      };\r\n      \r\n      appData.stockLedger.push(ledgerEntry);\r\n      \r\n      // Update stock\r\n      appData.inventoryItems[index].current_stock += change;\r\n      \r\n      saveData(appData);\r\n      resolve({\r\n        item: appData.inventoryItems[index],\r\n        ledger: ledgerEntry\r\n      });\r\n    }, 100);\r\n  });\r\n}\r\n\r\n// Medicine Store specific functions\r\nexport async function createMedicineStoreBill(\r\n  bill: Omit<BillRow, 'id' | 'created_at'>,\r\n  items: Array<Omit<BillItemRow, 'id'>>,\r\n  createdBy?: string\r\n): Promise<BillRow> {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(async () => {\r\n      try {\r\n        const newBill = {\r\n          ...bill,\r\n          id: generateId(),\r\n          created_at: new Date().toISOString()\r\n        };\r\n        \r\n        appData.bills.push(newBill);\r\n        \r\n        if (items.length > 0) {\r\n          const itemsToInsert = items.map((it) => ({ \r\n            ...it, \r\n            id: generateId(),\r\n            bill_id: newBill.id \r\n          }));\r\n          appData.billItems.push(...itemsToInsert);\r\n          \r\n          // Update stock for each item\r\n          for (const item of items) {\r\n            if (item.inventory_item_id) {\r\n              await adjustStock(\r\n                item.inventory_item_id, \r\n                -item.quantity, \r\n                'dispense', \r\n                { \r\n                  reference_bill_id: newBill.id, \r\n                  created_by: createdBy || null,\r\n                  notes: `Sold in bill ${newBill.bill_number}`\r\n                }\r\n              );\r\n            }\r\n          }\r\n        }\r\n        \r\n        saveData(appData);\r\n        resolve(newBill);\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport interface LowStockItem {\r\n  id: string;\r\n  name: string;\r\n  current_stock: number;\r\n  low_stock_threshold: number;\r\n  category: string;\r\n  manufacturer: string;\r\n}\r\n\r\nexport async function getLowStockItems(): Promise<LowStockItem[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const lowStockItems: LowStockItem[] = appData.inventoryItems\r\n        .filter((item: InventoryItemRow) => \r\n          item.low_stock_threshold !== null && \r\n          item.current_stock <= item.low_stock_threshold\r\n        )\r\n        .map((item: InventoryItemRow) => ({\r\n          id: item.id,\r\n          name: item.name,\r\n          current_stock: item.current_stock,\r\n          low_stock_threshold: item.low_stock_threshold!,\r\n          category: item.category,\r\n          manufacturer: item.manufacturer\r\n        }))\r\n        .sort((a, b) => a.current_stock - b.current_stock);\r\n        \r\n      resolve(lowStockItems);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function getExpiringItems(days: number = 30): Promise<InventoryItemRow[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const futureDate = new Date();\r\n      futureDate.setDate(futureDate.getDate() + days);\r\n      \r\n      const expiringItems = appData.inventoryItems\r\n        .filter((item: InventoryItemRow) => \r\n          item.expiry_date !== null &&\r\n          new Date(item.expiry_date) <= futureDate\r\n        )\r\n        .sort((a, b) => \r\n          new Date(a.expiry_date!).getTime() - new Date(b.expiry_date!).getTime()\r\n        );\r\n        \r\n      resolve(expiringItems);\r\n    }, 100);\r\n  });\r\n}\r\n\r\n// Prescriptions\r\nexport async function createPrescription(row: Omit<PrescriptionRow, 'id' | 'created_at'>): Promise<PrescriptionRow> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const newPrescription = {\r\n        ...row,\r\n        id: generateId(),\r\n        created_at: new Date().toISOString()\r\n      };\r\n      appData.prescriptions.push(newPrescription);\r\n      saveData(appData);\r\n      resolve(newPrescription);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function getPrescriptionById(id: string): Promise<PrescriptionRow | null> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const prescription = appData.prescriptions.find((p: PrescriptionRow) => p.id === id) || null;\r\n      resolve(prescription);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function listPrescriptions(): Promise<PrescriptionRow[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      resolve([...appData.prescriptions].sort((a, b) => \r\n        new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n      ));\r\n    }, 100);\r\n  });\r\n}\r\n\r\n// Appointments\r\nexport async function createAppointment(row: Omit<AppointmentRow, 'id' | 'created_at'>): Promise<AppointmentRow> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const newAppointment = {\r\n        ...row,\r\n        id: generateId(),\r\n        created_at: new Date().toISOString()\r\n      };\r\n      appData.appointments.push(newAppointment);\r\n      saveData(appData);\r\n      resolve(newAppointment);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function listAppointments(filters?: { doctor_id?: string; patient_id?: string; appointment_date?: string; appointment_date_exact?: string }): Promise<AppointmentRow[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      let appointments = [...appData.appointments];\r\n      \r\n      if (filters?.doctor_id) {\r\n        appointments = appointments.filter(a => a.doctor_id === filters.doctor_id);\r\n      }\r\n      \r\n      if (filters?.patient_id) {\r\n        appointments = appointments.filter(a => a.patient_id === filters.patient_id);\r\n      }\r\n      \r\n      if (filters?.appointment_date) {\r\n        appointments = appointments.filter(a => a.appointment_date === filters.appointment_date);\r\n      }\r\n      \r\n      if (filters?.appointment_date_exact) {\r\n        appointments = appointments.filter(a => \r\n          a.appointment_date === filters.appointment_date_exact ||\r\n          (a.appointment_datetime && \r\n           a.appointment_datetime.startsWith(filters.appointment_date_exact))\r\n        );\r\n      }\r\n      \r\n      resolve(appointments.sort((a, b) => {\r\n        if (a.appointment_datetime && b.appointment_datetime) {\r\n          return new Date(a.appointment_datetime).getTime() - new Date(b.appointment_datetime).getTime();\r\n        }\r\n        return new Date(a.created_at).getTime() - new Date(b.created_at).getTime();\r\n      }));\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function updateAppointment(id: string, updates: Partial<Omit<AppointmentRow, 'id' | 'created_at'>>): Promise<AppointmentRow> {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      const index = appData.appointments.findIndex((a: AppointmentRow) => a.id === id);\r\n      if (index === -1) {\r\n        reject(new Error('Appointment not found'));\r\n        return;\r\n      }\r\n      \r\n      appData.appointments[index] = {\r\n        ...appData.appointments[index],\r\n        ...updates\r\n      };\r\n      \r\n      saveData(appData);\r\n      resolve(appData.appointments[index]);\r\n    }, 100);\r\n  });\r\n}\r\n\r\n// Reports\r\nexport interface SalesSummary {\r\n  date: string;\r\n  total_bills: number;\r\n  total_amount: number;\r\n  total_discount: number;\r\n  net_amount: number;\r\n}\r\n\r\nexport interface DoctorSalesReport {\r\n  doctor_id: string;\r\n  doctor_name: string;\r\n  total_bills: number;\r\n  total_amount: number;\r\n  total_discount: number;\r\n  net_amount: number;\r\n}\r\n\r\nexport interface ServiceSalesReport {\r\n  service_id: string | null;\r\n  service_name: string;\r\n  total_quantity: number;\r\n  total_amount: number;\r\n}\r\n\r\nexport async function getSalesSummary(startDate: string, endDate: string, groupBy: 'day' | 'month' = 'day'): Promise<SalesSummary[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const start = new Date(startDate);\r\n      const end = new Date(endDate);\r\n      \r\n      const filteredBills = appData.bills.filter((bill: BillRow) => {\r\n        const billDate = new Date(bill.created_at);\r\n        return billDate >= start && billDate <= end;\r\n      });\r\n      \r\n      const grouped: Record<string, SalesSummary> = {};\r\n      \r\n      filteredBills.forEach((bill: BillRow) => {\r\n        const date = new Date(bill.created_at);\r\n        let key: string;\r\n        \r\n        if (groupBy === 'month') {\r\n          key = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\r\n        } else {\r\n          key = date.toISOString().split('T')[0];\r\n        }\r\n        \r\n        if (!grouped[key]) {\r\n          grouped[key] = {\r\n            date: key,\r\n            total_bills: 0,\r\n            total_amount: 0,\r\n            total_discount: 0,\r\n            net_amount: 0,\r\n          };\r\n        }\r\n        \r\n        grouped[key].total_bills += 1;\r\n        grouped[key].total_amount += Number(bill.total_amount || 0);\r\n        grouped[key].total_discount += Number(bill.discount || 0);\r\n        grouped[key].net_amount += Number(bill.net_amount || 0);\r\n      });\r\n      \r\n      resolve(Object.values(grouped).sort((a, b) => a.date.localeCompare(b.date)));\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function getDoctorSalesReport(startDate: string, endDate: string): Promise<DoctorSalesReport[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const start = new Date(startDate);\r\n      const end = new Date(endDate);\r\n      \r\n      const filteredBills = appData.bills.filter((bill: BillRow) => {\r\n        const billDate = new Date(bill.created_at);\r\n        return billDate >= start && billDate <= end && bill.doctor_id;\r\n      });\r\n      \r\n      const doctorMap: Record<string, DoctorSalesReport> = {};\r\n      \r\n      filteredBills.forEach((bill: BillRow) => {\r\n        const doctorId = bill.doctor_id;\r\n        if (!doctorId) return;\r\n        \r\n        const doctor = appData.doctors.find((d: DoctorRow) => d.id === doctorId);\r\n        \r\n        if (!doctorMap[doctorId]) {\r\n          doctorMap[doctorId] = {\r\n            doctor_id: doctorId,\r\n            doctor_name: doctor?.name || 'Unknown',\r\n            total_bills: 0,\r\n            total_amount: 0,\r\n            total_discount: 0,\r\n            net_amount: 0,\r\n          };\r\n        }\r\n        \r\n        doctorMap[doctorId].total_bills += 1;\r\n        doctorMap[doctorId].total_amount += Number(bill.total_amount || 0);\r\n        doctorMap[doctorId].total_discount += Number(bill.discount || 0);\r\n        doctorMap[doctorId].net_amount += Number(bill.net_amount || 0);\r\n      });\r\n      \r\n      resolve(Object.values(doctorMap).sort((a, b) => b.net_amount - a.net_amount));\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport interface BillDetail {\r\n  id: string;\r\n  bill_number: string;\r\n  patient_id: string | null;\r\n  patient_name: string | null;\r\n  guest_name: string | null;\r\n  doctor_id: string | null;\r\n  doctor_name: string | null;\r\n  total_amount: number;\r\n  discount: number;\r\n  net_amount: number;\r\n  created_at: string;\r\n  status: string;\r\n  mode_of_payment: string;\r\n}\r\n\r\nexport async function getBillsByDate(date: string): Promise<BillDetail[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const targetDate = new Date(date);\r\n      \r\n      const filteredBills = appData.bills.filter((bill: BillRow) => {\r\n        const billDate = new Date(bill.created_at);\r\n        return billDate.toDateString() === targetDate.toDateString();\r\n      });\r\n      \r\n      const result: BillDetail[] = filteredBills.map((bill: BillRow) => {\r\n        const patient = bill.patient_id ? \r\n          appData.patients.find((p: PatientRow) => p.id === bill.patient_id) : \r\n          null;\r\n          \r\n        const doctor = bill.doctor_id ? \r\n          appData.doctors.find((d: DoctorRow) => d.id === bill.doctor_id) : \r\n          null;\r\n          \r\n        return {\r\n          ...bill,\r\n          patient_name: patient?.name || null,\r\n          doctor_name: doctor?.name || null,\r\n        } as BillDetail;\r\n      });\r\n      \r\n      resolve(result.sort((a, b) => \r\n        new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n      ));\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function getBillsByMonth(year: number, month: number): Promise<BillDetail[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const filteredBills = appData.bills.filter((bill: BillRow) => {\r\n        const billDate = new Date(bill.created_at);\r\n        return billDate.getFullYear() === year && billDate.getMonth() === month - 1;\r\n      });\r\n      \r\n      const result: BillDetail[] = filteredBills.map((bill: BillRow) => {\r\n        const patient = bill.patient_id ? \r\n          appData.patients.find((p: PatientRow) => p.id === bill.patient_id) : \r\n          null;\r\n          \r\n        const doctor = bill.doctor_id ? \r\n          appData.doctors.find((d: DoctorRow) => d.id === bill.doctor_id) : \r\n          null;\r\n          \r\n        return {\r\n          ...bill,\r\n          patient_name: patient?.name || null,\r\n          doctor_name: doctor?.name || null,\r\n        } as BillDetail;\r\n      });\r\n      \r\n      resolve(result.sort((a, b) => \r\n        new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n      ));\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function getBillsByDoctor(doctorId: string, startDate: string, endDate: string): Promise<BillDetail[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const start = new Date(startDate);\r\n      const end = new Date(endDate);\r\n      \r\n      const filteredBills = appData.bills.filter((bill: BillRow) => {\r\n        const billDate = new Date(bill.created_at);\r\n        return bill.doctor_id === doctorId && billDate >= start && billDate <= end;\r\n      });\r\n      \r\n      const doctor = appData.doctors.find((d: DoctorRow) => d.id === doctorId);\r\n      const doctorName = doctor?.name || 'Unknown';\r\n      \r\n      const result: BillDetail[] = filteredBills.map((bill: BillRow) => {\r\n        const patient = bill.patient_id ? \r\n          appData.patients.find((p: PatientRow) => p.id === bill.patient_id) : \r\n          null;\r\n          \r\n        return {\r\n          ...bill,\r\n          patient_name: patient?.name || null,\r\n          doctor_name: doctorName,\r\n        } as BillDetail;\r\n      });\r\n      \r\n      resolve(result.sort((a, b) => \r\n        new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n      ));\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function getBillsByDateRange(startDate: string, endDate: string): Promise<BillDetail[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const start = new Date(startDate);\r\n      const end = new Date(endDate);\r\n      \r\n      const filteredBills = appData.bills.filter((bill: BillRow) => {\r\n        const billDate = new Date(bill.created_at);\r\n        return billDate >= start && billDate <= end;\r\n      });\r\n      \r\n      const result: BillDetail[] = filteredBills.map((bill: BillRow) => {\r\n        const patient = bill.patient_id ? \r\n          appData.patients.find((p: PatientRow) => p.id === bill.patient_id) : \r\n          null;\r\n          \r\n        const doctor = bill.doctor_id ? \r\n          appData.doctors.find((d: DoctorRow) => d.id === bill.doctor_id) : \r\n          null;\r\n          \r\n        return {\r\n          ...bill,\r\n          patient_name: patient?.name || null,\r\n          doctor_name: doctor?.name || null,\r\n        } as BillDetail;\r\n      });\r\n      \r\n      resolve(result.sort((a, b) => \r\n        new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n      ));\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function getServiceSalesReport(startDate: string, endDate: string): Promise<ServiceSalesReport[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const start = new Date(startDate);\r\n      const end = new Date(endDate);\r\n      \r\n      // Get bill items within date range\r\n      const filteredBills = appData.bills.filter((bill: BillRow) => {\r\n        const billDate = new Date(bill.created_at);\r\n        return billDate >= start && billDate <= end;\r\n      });\r\n      \r\n      const billIds = filteredBills.map((b: BillRow) => b.id);\r\n      const filteredItems = appData.billItems.filter((item: BillItemRow) => \r\n        billIds.includes(item.bill_id) && item.service_id\r\n      );\r\n      \r\n      const serviceMap: Record<string, ServiceSalesReport> = {};\r\n      \r\n      filteredItems.forEach((item: BillItemRow) => {\r\n        const serviceId = item.service_id || 'other';\r\n        const serviceName = item.item_name || 'Unknown Service';\r\n        \r\n        if (!serviceMap[serviceId]) {\r\n          serviceMap[serviceId] = {\r\n            service_id: serviceId,\r\n            service_name: serviceName,\r\n            total_quantity: 0,\r\n            total_amount: 0,\r\n          };\r\n        }\r\n        \r\n        serviceMap[serviceId].total_quantity += Number(item.quantity || 0);\r\n        serviceMap[serviceId].total_amount += Number(item.total || 0);\r\n      });\r\n      \r\n      // Fetch actual service names\r\n      Object.keys(serviceMap).forEach(serviceId => {\r\n        if (serviceId !== 'other') {\r\n          const service = appData.services.find((s: ServiceRow) => s.id === serviceId);\r\n          if (service) {\r\n            serviceMap[serviceId].service_name = service.service_name;\r\n          }\r\n        }\r\n      });\r\n      \r\n      resolve(Object.values(serviceMap).sort((a, b) => b.total_amount - a.total_amount));\r\n    }, 100);\r\n  });\r\n}\r\n\r\n// Payment update function\r\nexport async function recordPayment(\r\n  billId: string,\r\n  paidAmount: number,\r\n  paymentMode?: 'Cash' | 'UPI' | 'Card',\r\n  transactionReference?: string | null\r\n): Promise<BillRow> {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      const billIndex = appData.bills.findIndex((b: BillRow) => b.id === billId);\r\n      if (billIndex === -1) {\r\n        reject(new Error('Bill not found'));\r\n        return;\r\n      }\r\n      \r\n      const bill = appData.bills[billIndex];\r\n      const currentPaidAmount = Number(bill.net_amount || 0) - Number((bill as any).balance || bill.net_amount);\r\n      const newPaidAmount = currentPaidAmount + paidAmount;\r\n      const balance = Number(bill.net_amount) - newPaidAmount;\r\n      \r\n      let status: 'paid' | 'pending' | 'partial' = 'pending';\r\n      if (balance <= 0) {\r\n        status = 'paid';\r\n      } else if (newPaidAmount > 0) {\r\n        status = 'partial';\r\n      }\r\n      \r\n      const updates: any = {\r\n        status,\r\n      };\r\n      \r\n      if (paymentMode) {\r\n        updates.mode_of_payment = paymentMode;\r\n      }\r\n      if (transactionReference) {\r\n        updates.transaction_reference = transactionReference;\r\n      }\r\n      \r\n      appData.bills[billIndex] = {\r\n        ...bill,\r\n        ...updates\r\n      };\r\n      \r\n      saveData(appData);\r\n      resolve(appData.bills[billIndex]);\r\n    }, 100);\r\n  });\r\n}\r\n\r\n// Admin summary function\r\nexport interface AdminSummary {\r\n  total_bills: number;\r\n  total_amount: number;\r\n  total_discount: number;\r\n  net_amount: number;\r\n  total_appointments: number;\r\n  pending_appointments: number;\r\n}\r\n\r\nexport async function adminSummary(date?: string): Promise<AdminSummary> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const targetDate = date ? new Date(date) : new Date();\r\n      \r\n      // Get bills summary\r\n      const filteredBills = appData.bills.filter((bill: BillRow) => {\r\n        const billDate = new Date(bill.created_at);\r\n        return billDate.toDateString() === targetDate.toDateString();\r\n      });\r\n      \r\n      const billsSummary = filteredBills.reduce(\r\n        (acc, bill) => ({\r\n          total_bills: acc.total_bills + 1,\r\n          total_amount: acc.total_amount + Number(bill.total_amount || 0),\r\n          total_discount: acc.total_discount + Number(bill.discount || 0),\r\n          net_amount: acc.net_amount + Number(bill.net_amount || 0),\r\n        }),\r\n        { total_bills: 0, total_amount: 0, total_discount: 0, net_amount: 0 }\r\n      );\r\n      \r\n      // Get appointments summary\r\n      const filteredAppointments = appData.appointments.filter((appointment: AppointmentRow) => {\r\n        const apptDate = appointment.appointment_date ? \r\n          new Date(appointment.appointment_date) : \r\n          (appointment.appointment_datetime ? new Date(appointment.appointment_datetime) : null);\r\n          \r\n        return apptDate && apptDate.toDateString() === targetDate.toDateString();\r\n      });\r\n      \r\n      const total_appointments = filteredAppointments.length;\r\n      const pending_appointments = filteredAppointments.filter(\r\n        (a: AppointmentRow) => a.status === 'booked'\r\n      ).length;\r\n      \r\n      resolve({\r\n        ...billsSummary,\r\n        total_appointments,\r\n        pending_appointments,\r\n      });\r\n    }, 100);\r\n  });\r\n}\r\n\r\n// Get pending appointments for a specific date\r\nexport async function getPendingAppointments(date: string): Promise<AppointmentRow[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const targetDate = new Date(date);\r\n      \r\n      const pendingAppointments = appData.appointments.filter((appointment: AppointmentRow) => {\r\n        if (appointment.status !== 'booked') return false;\r\n        \r\n        const apptDate = appointment.appointment_date ? \r\n          new Date(appointment.appointment_date) : \r\n          (appointment.appointment_datetime ? new Date(appointment.appointment_datetime) : null);\r\n          \r\n        return apptDate && apptDate.toDateString() === targetDate.toDateString();\r\n      });\r\n      \r\n      resolve(pendingAppointments.sort((a, b) => {\r\n        if (a.appointment_datetime && b.appointment_datetime) {\r\n          return new Date(a.appointment_datetime).getTime() - new Date(b.appointment_datetime).getTime();\r\n        }\r\n        return 0;\r\n      }));\r\n    }, 100);\r\n  });\r\n}\r\n\r\n// Dashboard Analytics\r\nexport interface TopDoctor {\r\n  doctor_id: string;\r\n  doctor_name: string;\r\n  total_revenue: number;\r\n  total_bills: number;\r\n}\r\n\r\nexport interface TopService {\r\n  service_id: string | null;\r\n  service_name: string;\r\n  usage_count: number;\r\n  total_revenue: number;\r\n}\r\n\r\nexport async function getTopDoctors(startDate: string, endDate: string, limit: number = 5): Promise<TopDoctor[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const start = new Date(startDate);\r\n      const end = new Date(endDate);\r\n      \r\n      const filteredBills = appData.bills.filter((bill: BillRow) => {\r\n        const billDate = new Date(bill.created_at);\r\n        return bill.doctor_id && billDate >= start && billDate <= end;\r\n      });\r\n      \r\n      const doctorMap = new Map<string, { revenue: number; count: number }>();\r\n      \r\n      filteredBills.forEach((bill: BillRow) => {\r\n        const doctorId = bill.doctor_id!;\r\n        const existing = doctorMap.get(doctorId);\r\n        \r\n        if (existing) {\r\n          existing.revenue += Number(bill.net_amount || 0);\r\n          existing.count += 1;\r\n        } else {\r\n          doctorMap.set(doctorId, {\r\n            revenue: Number(bill.net_amount || 0),\r\n            count: 1\r\n          });\r\n        }\r\n      });\r\n      \r\n      // Get doctor names\r\n      const doctorsNameMap: Record<string, string> = {};\r\n      appData.doctors.forEach((d: DoctorRow) => {\r\n        doctorsNameMap[d.id] = d.name;\r\n      });\r\n      \r\n      const topDoctors: TopDoctor[] = Array.from(doctorMap.entries())\r\n        .map(([doctor_id, data]) => ({\r\n          doctor_id,\r\n          doctor_name: doctorsNameMap[doctor_id] || 'Unknown',\r\n          total_revenue: data.revenue,\r\n          total_bills: data.count,\r\n        }))\r\n        .sort((a, b) => b.total_revenue - a.total_revenue)\r\n        .slice(0, limit);\r\n      \r\n      resolve(topDoctors);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function getTopServices(startDate: string, endDate: string, limit: number = 5): Promise<TopService[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const start = new Date(startDate);\r\n      const end = new Date(endDate);\r\n      \r\n      // Get bills in date range\r\n      const filteredBills = appData.bills.filter((bill: BillRow) => {\r\n        const billDate = new Date(bill.created_at);\r\n        return billDate >= start && billDate <= end;\r\n      });\r\n      \r\n      const billIds = filteredBills.map((b: BillRow) => b.id);\r\n      const filteredItems = appData.billItems.filter((item: BillItemRow) => \r\n        billIds.includes(item.bill_id) && item.service_id\r\n      );\r\n      \r\n      const serviceMap = new Map<string, { count: number; revenue: number }>();\r\n      \r\n      filteredItems.forEach((item: BillItemRow) => {\r\n        if (!item.service_id) return;\r\n        const existing = serviceMap.get(item.service_id);\r\n        \r\n        if (existing) {\r\n          existing.count += item.quantity;\r\n          existing.revenue += Number(item.total || 0);\r\n        } else {\r\n          serviceMap.set(item.service_id, {\r\n            count: item.quantity,\r\n            revenue: Number(item.total || 0)\r\n          });\r\n        }\r\n      });\r\n      \r\n      // Get service names\r\n      const servicesNameMap: Record<string, string> = {};\r\n      appData.services.forEach((s: ServiceRow) => {\r\n        servicesNameMap[s.id] = s.service_name;\r\n      });\r\n      \r\n      const topServices: TopService[] = Array.from(serviceMap.entries())\r\n        .map(([service_id, data]) => ({\r\n          service_id,\r\n          service_name: servicesNameMap[service_id] || 'Unknown Service',\r\n          usage_count: data.count,\r\n          total_revenue: data.revenue,\r\n        }))\r\n        .sort((a, b) => b.usage_count - a.usage_count)\r\n        .slice(0, limit);\r\n      \r\n      resolve(topServices);\r\n    }, 100);\r\n  });\r\n}\r\n\r\n// Doctor Availability\r\nexport async function listDoctorAvailability(doctorId: string): Promise<DoctorAvailabilityRow[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const availability = appData.doctorAvailability.filter((a: DoctorAvailabilityRow) => \r\n        a.doctor_id === doctorId\r\n      ).sort((a, b) => {\r\n        if (a.day_of_week !== null && b.day_of_week !== null) {\r\n          if (a.day_of_week !== b.day_of_week) {\r\n            return a.day_of_week - b.day_of_week;\r\n          }\r\n          return a.start_time.localeCompare(b.start_time);\r\n        }\r\n        return 0;\r\n      });\r\n      \r\n      resolve(availability);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function setDoctorAvailability(\r\n  doctorId: string,\r\n  availability: Omit<DoctorAvailabilityRow, 'id' | 'created_at' | 'updated_at'>\r\n): Promise<DoctorAvailabilityRow> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      // For recurring availability, check if there's already an entry for this day/time\r\n      let existingId: string | null = null;\r\n      \r\n      if (availability.day_of_week !== null) {\r\n        const existing = appData.doctorAvailability.find((a: DoctorAvailabilityRow) => \r\n          a.doctor_id === doctorId &&\r\n          a.day_of_week === availability.day_of_week &&\r\n          a.start_time === availability.start_time &&\r\n          a.end_time === availability.end_time\r\n        );\r\n        \r\n        if (existing) {\r\n          existingId = existing.id;\r\n        }\r\n      }\r\n      \r\n      if (existingId) {\r\n        // Update existing entry\r\n        const index = appData.doctorAvailability.findIndex((a: DoctorAvailabilityRow) => \r\n          a.id === existingId\r\n        );\r\n        \r\n        appData.doctorAvailability[index] = {\r\n          ...appData.doctorAvailability[index],\r\n          ...availability,\r\n          updated_at: new Date().toISOString()\r\n        };\r\n        \r\n        saveData(appData);\r\n        resolve(appData.doctorAvailability[index]);\r\n      } else {\r\n        // Create new entry\r\n        const newAvailability = {\r\n          ...availability,\r\n          id: generateId(),\r\n          doctor_id: doctorId,\r\n          created_at: new Date().toISOString(),\r\n          updated_at: new Date().toISOString()\r\n        };\r\n        \r\n        appData.doctorAvailability.push(newAvailability);\r\n        saveData(appData);\r\n        resolve(newAvailability);\r\n      }\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function deleteDoctorAvailability(id: string): Promise<void> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      appData.doctorAvailability = appData.doctorAvailability.filter((a: DoctorAvailabilityRow) => \r\n        a.id !== id\r\n      );\r\n      saveData(appData);\r\n      resolve();\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function listStockPurchases(): Promise<StockPurchaseRow[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      resolve([...appData.stockPurchases].sort((a, b) => \r\n        new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n      ));\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function getStockPurchaseById(id: string): Promise<StockPurchaseRow | null> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const purchase = appData.stockPurchases.find((p: StockPurchaseRow) => p.id === id) || null;\r\n      resolve(purchase);\r\n    }, 100);\r\n  });\r\n}\r\n\r\nexport async function listStockPurchaseItems(purchaseId: string): Promise<StockPurchaseItemRow[]> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      const items = appData.stockPurchaseItems.filter((item: StockPurchaseItemRow) => \r\n        item.purchase_id === purchaseId\r\n      );\r\n      resolve(items);\r\n    }, 100);\r\n  });\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}