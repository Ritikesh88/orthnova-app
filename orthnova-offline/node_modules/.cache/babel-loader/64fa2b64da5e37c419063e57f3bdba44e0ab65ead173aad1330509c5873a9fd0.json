{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getSalesSummary,getBillsByDate,getBillsByMonth,getBillsByDateRange,getLowStockItems,getExpiringItems}from'../../api';import{formatCurrency,formatDate,formatDateTime}from'../../utils/format';import*as XLSX from'xlsx';import jsPDF from'jspdf';import autoTable from'jspdf-autotable';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PharmacyReports=()=>{var _summary$total_discou,_summary$net_amount;const[activeTab,setActiveTab]=useState('sales');const[startDate,setStartDate]=useState('');const[endDate,setEndDate]=useState('');const[groupBy,setGroupBy]=useState('day');const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[salesData,setSalesData]=useState([]);// Inventory states\nconst[lowStockItems,setLowStockItems]=useState([]);const[expiringItems,setExpiringItems]=useState([]);const[inventoryView,setInventoryView]=useState('low-stock');// Deep dive states\nconst[showDeepDive,setShowDeepDive]=useState(false);const[deepDiveData,setDeepDiveData]=useState([]);const[deepDiveTitle,setDeepDiveTitle]=useState('');// Set default dates (today and 30 days ago)\nuseEffect(()=>{const today=new Date();const thirtyDaysAgo=new Date(today);thirtyDaysAgo.setDate(today.getDate()-30);setEndDate(today.toISOString().split('T')[0]);setStartDate(thirtyDaysAgo.toISOString().split('T')[0]);},[]);const fetchReports=async()=>{if(!startDate||!endDate){setError('Please select both start and end dates');return;}setLoading(true);setError(null);try{if(activeTab==='sales'){const data=await getSalesSummary(startDate,endDate,groupBy);setSalesData(data);}else if(activeTab==='inventory'){// Fetch inventory data\nconst lowStockData=await getLowStockItems();const expiringData=await getExpiringItems(30);// Items expiring within 30 days\nsetLowStockItems(lowStockData);setExpiringItems(expiringData);}}catch(e){console.error('Error fetching reports:',e);setError(e.message||'Failed to fetch report data');}finally{setLoading(false);}};useEffect(()=>{if(startDate&&endDate){fetchReports();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[activeTab,groupBy,startDate,endDate]);const handleQuickSelect=days=>{const today=new Date();const pastDate=new Date(today);pastDate.setDate(today.getDate()-days);setEndDate(today.toISOString().split('T')[0]);setStartDate(pastDate.toISOString().split('T')[0]);};const getTotalSummary=()=>{if(activeTab==='sales'){return{total_bills:salesData.reduce((sum,d)=>sum+d.total_bills,0),total_amount:salesData.reduce((sum,d)=>sum+d.total_amount,0),total_discount:salesData.reduce((sum,d)=>sum+d.total_discount,0),net_amount:salesData.reduce((sum,d)=>sum+d.net_amount,0)};}return null;};const summary=getTotalSummary();// Export to Excel\nconst exportToExcel=()=>{let data=[];let sheetName='';if(activeTab==='sales'){sheetName='Sales Summary';data=salesData.map(row=>({Date:groupBy==='month'?new Date(row.date+'-01').toLocaleDateString('en-IN',{year:'numeric',month:'long'}):formatDate(row.date),'Total Bills':row.total_bills,'Total Amount':row.total_amount,'Discount':row.total_discount,'Net Amount':row.net_amount}));}else if(activeTab==='inventory'){if(inventoryView==='low-stock'){sheetName='Low Stock Items';data=lowStockItems.map(item=>({'Medicine Name':item.name,'Category':item.category,'Current Stock':item.current_stock,'Low Stock Threshold':item.low_stock_threshold,'Manufacturer':item.manufacturer}));}else{sheetName='Expiring Items';data=expiringItems.map(item=>({'Medicine Name':item.name,'SKU':item.sku,'Category':item.category,'Current Stock':item.current_stock,'Expiry Date':item.expiry_date,'Batch Number':item.batch_number,'Manufacturer':item.manufacturer}));}}const worksheet=XLSX.utils.json_to_sheet(data);const workbook=XLSX.utils.book_new();XLSX.utils.book_append_sheet(workbook,worksheet,sheetName);XLSX.writeFile(workbook,\"\".concat(sheetName,\"_\").concat(new Date().toISOString().split('T')[0],\".xlsx\"));};// Export Complete Billing Data to Excel\nconst exportCompleteBillingDataToExcel=async()=>{setLoading(true);try{// Fetch all bills in the selected date range\nconst allBills=await getBillsByDateRange(startDate,endDate);// Export to Excel\nconst data=allBills.map(bill=>({'Bill Number':bill.bill_number,'Date':formatDateTime(bill.created_at),'Patient':bill.patient_name||bill.guest_name||'N/A','Total Amount':bill.total_amount,'Discount':bill.discount,'Net Amount':bill.net_amount,'Payment Mode':bill.mode_of_payment,'Status':bill.status}));const worksheet=XLSX.utils.json_to_sheet(data);const workbook=XLSX.utils.book_new();XLSX.utils.book_append_sheet(workbook,worksheet,'Complete Billing Data');XLSX.writeFile(workbook,\"Complete_Billing_Data_\".concat(startDate,\"_to_\").concat(endDate,\".xlsx\"));}catch(e){console.error('Error exporting complete billing data:',e);setError(e.message||'Failed to export complete billing data');}finally{setLoading(false);}};// Export Complete Billing Data to PDF\nconst exportCompleteBillingDataToPDF=async()=>{setLoading(true);try{// Fetch all bills in the selected date range\nconst allBills=await getBillsByDateRange(startDate,endDate);// Export to PDF\nconst doc=new jsPDF();doc.setFontSize(16);doc.text('Complete Billing Data',14,15);doc.setFontSize(10);doc.text(\"Period: \".concat(formatDate(startDate),\" to \").concat(formatDate(endDate)),14,22);const headers=[['Bill #','Date','Patient','Total','Discount','Net','Payment','Status']];const data=allBills.map(bill=>[bill.bill_number,formatDateTime(bill.created_at),bill.patient_name||bill.guest_name||'N/A',formatCurrency(bill.total_amount),formatCurrency(bill.discount),formatCurrency(bill.net_amount),bill.mode_of_payment,bill.status]);autoTable(doc,{head:headers,body:data,startY:28,theme:'grid',headStyles:{fillColor:[41,128,185],halign:'center'},styles:{fontSize:8},columnStyles:{0:{halign:'left',cellWidth:20},1:{halign:'left',cellWidth:30},2:{halign:'left',cellWidth:30},3:{halign:'right',cellWidth:22},4:{halign:'right',cellWidth:22},5:{halign:'right',cellWidth:22},6:{halign:'center',cellWidth:20},7:{halign:'center',cellWidth:18}}});doc.save(\"Complete_Billing_Data_\".concat(startDate,\"_to_\").concat(endDate,\".pdf\"));}catch(e){console.error('Error exporting complete billing data to PDF:',e);setError(e.message||'Failed to export complete billing data to PDF');}finally{setLoading(false);}};// Export to PDF\nconst exportToPDF=()=>{const doc=new jsPDF();let title='';let headers=[];let data=[];if(activeTab==='sales'){title='Sales Summary Report';headers=[['Date','Bills','Total Amount','Discount','Net Amount']];data=salesData.map(row=>[groupBy==='month'?new Date(row.date+'-01').toLocaleDateString('en-IN',{year:'numeric',month:'long'}):formatDate(row.date),row.total_bills.toString(),formatCurrency(row.total_amount),formatCurrency(row.total_discount),formatCurrency(row.net_amount)]);}else if(activeTab==='inventory'){if(inventoryView==='low-stock'){title='Low Stock Items Report';headers=[['Medicine Name','Category','Current Stock','Threshold','Manufacturer']];data=lowStockItems.map(item=>{var _item$low_stock_thres;return[item.name,item.category,item.current_stock.toString(),((_item$low_stock_thres=item.low_stock_threshold)===null||_item$low_stock_thres===void 0?void 0:_item$low_stock_thres.toString())||'N/A',item.manufacturer];});}else{title='Expiring Items Report';headers=[['Medicine Name','SKU','Category','Current Stock','Expiry Date','Batch Number','Manufacturer']];data=expiringItems.map(item=>[item.name,item.sku,item.category,item.current_stock.toString(),item.expiry_date||'N/A',item.batch_number||'N/A',item.manufacturer]);}}doc.setFontSize(16);doc.text(title,14,15);if(activeTab==='sales'){doc.setFontSize(10);doc.text(\"Period: \".concat(formatDate(startDate),\" to \").concat(formatDate(endDate)),14,22);}autoTable(doc,{head:headers,body:data,startY:activeTab==='sales'?28:22,theme:'grid',headStyles:{fillColor:[41,128,185],halign:'center'},styles:{fontSize:9},columnStyles:activeTab==='sales'?{0:{halign:'left'},1:{halign:'right'},2:{halign:'right'},3:{halign:'right'},4:{halign:'right'}}:activeTab==='inventory'&&inventoryView==='low-stock'?{0:{halign:'left'},1:{halign:'left'},2:{halign:'left'},3:{halign:'right'},4:{halign:'right'},5:{halign:'left'}}:{0:{halign:'left'},1:{halign:'left'},2:{halign:'left'},3:{halign:'right'},4:{halign:'center'},5:{halign:'left'},6:{halign:'left'}}});doc.save(\"\".concat(title.replace(/ /g,'_'),\"_\").concat(new Date().toISOString().split('T')[0],\".pdf\"));};// Deep dive handlers\nconst handleDateClick=async date=>{setLoading(true);try{let bills;if(groupBy==='month'){const[year,month]=date.split('-').map(Number);bills=await getBillsByMonth(year,month);setDeepDiveTitle(\"Bills for \".concat(new Date(year,month-1).toLocaleDateString('en-IN',{year:'numeric',month:'long'})));}else{bills=await getBillsByDate(date);setDeepDiveTitle(\"Bills for \".concat(formatDate(date)));}setDeepDiveData(bills);setShowDeepDive(true);}catch(e){console.error('Error fetching bills:',e);setError(e.message||'Failed to fetch bills');}finally{setLoading(false);}};// Export deep dive data\nconst exportDeepDiveToExcel=()=>{const data=deepDiveData.map(bill=>({'Bill Number':bill.bill_number,'Date':formatDateTime(bill.created_at),'Patient':bill.patient_name||bill.guest_name||'N/A','Total Amount':bill.total_amount,'Discount':bill.discount,'Net Amount':bill.net_amount,'Payment Mode':bill.mode_of_payment,'Status':bill.status}));const worksheet=XLSX.utils.json_to_sheet(data);const workbook=XLSX.utils.book_new();XLSX.utils.book_append_sheet(workbook,worksheet,'Bill Details');XLSX.writeFile(workbook,\"\".concat(deepDiveTitle.replace(/ /g,'_'),\".xlsx\"));};const exportDeepDiveToPDF=()=>{const doc=new jsPDF();doc.setFontSize(16);doc.text(deepDiveTitle,14,15);doc.setFontSize(10);doc.text(\"Generated: \".concat(new Date().toLocaleDateString('en-IN')),14,22);const headers=[['Bill #','Date','Patient','Total','Discount','Net','Status']];const data=deepDiveData.map(bill=>[bill.bill_number,formatDateTime(bill.created_at),bill.patient_name||bill.guest_name||'N/A',formatCurrency(bill.total_amount),formatCurrency(bill.discount),formatCurrency(bill.net_amount),bill.status]);autoTable(doc,{head:headers,body:data,startY:28,theme:'grid',headStyles:{fillColor:[41,128,185],halign:'center'},styles:{fontSize:8},columnStyles:{0:{halign:'left',cellWidth:20},1:{halign:'left',cellWidth:30},2:{halign:'left',cellWidth:30},3:{halign:'right',cellWidth:22},4:{halign:'right',cellWidth:22},5:{halign:'right',cellWidth:22},6:{halign:'center',cellWidth:18}}});doc.save(\"\".concat(deepDiveTitle.replace(/ /g,'_'),\".pdf\"));};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[showDeepDive&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:deepDiveTitle}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:exportDeepDiveToExcel,className:\"btn btn-secondary px-3 py-1 text-sm flex items-center gap-1\",title:\"Export to Excel\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})}),\"Excel\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportDeepDiveToPDF,className:\"btn btn-secondary px-3 py-1 text-sm flex items-center gap-1\",title:\"Export to PDF\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"})}),\"PDF\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDeepDive(false),className:\"text-gray-500 hover:text-gray-700 text-2xl font-bold ml-2\",children:\"\\xD7\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 overflow-auto flex-1\",children:deepDiveData.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-left text-gray-500 border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Bill Number\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Patient\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right w-24\",children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right w-24\",children:\"Discount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right w-24\",children:\"Net Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Payment\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:deepDiveData.map(bill=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-100 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 font-medium\",children:bill.bill_number}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:formatDateTime(bill.created_at)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:bill.patient_name||bill.guest_name||'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right\",children:formatCurrency(bill.total_amount)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right text-red-600\",children:formatCurrency(bill.discount)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right font-semibold\",children:formatCurrency(bill.net_amount)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:bill.mode_of_payment})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-xs \".concat(bill.status==='paid'?'bg-green-100 text-green-800':bill.status==='pending'?'bg-yellow-100 text-yellow-800':'bg-gray-100 text-gray-800'),children:bill.status})})]},bill.id))}),/*#__PURE__*/_jsx(\"tfoot\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"font-semibold border-t-2\",children:[/*#__PURE__*/_jsx(\"td\",{colSpan:3,className:\"py-2 pr-4 text-right\",children:\"Total:\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right\",children:formatCurrency(deepDiveData.reduce((sum,b)=>sum+b.total_amount,0))}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right text-red-600\",children:formatCurrency(deepDiveData.reduce((sum,b)=>sum+b.discount,0))}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right\",children:formatCurrency(deepDiveData.reduce((sum,b)=>sum+b.net_amount,0))}),/*#__PURE__*/_jsx(\"td\",{colSpan:2})]})})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500 py-8\",children:\"No bills found\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Pharmacy Reports\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-4 border-b\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 font-medium \".concat(activeTab==='sales'?'border-b-2 border-brand-500 text-brand-600':'text-gray-500 hover:text-gray-700'),onClick:()=>setActiveTab('sales'),children:\"Sales Summary\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 font-medium \".concat(activeTab==='inventory'?'border-b-2 border-brand-500 text-brand-600':'text-gray-500 hover:text-gray-700'),onClick:()=>setActiveTab('inventory'),children:\"Inventory Reports\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Start Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"w-full\",value:startDate,onChange:e=>setStartDate(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"End Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"w-full\",value:endDate,onChange:e=>setEndDate(e.target.value)})]}),activeTab==='sales'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Group By\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"w-full\",value:groupBy,onChange:e=>setGroupBy(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"day\",children:\"Daily\"}),/*#__PURE__*/_jsx(\"option\",{value:\"month\",children:\"Monthly\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary w-full\",onClick:fetchReports,disabled:loading,children:loading?'Loading...':'Generate Report'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary px-3 py-1 text-sm\",onClick:()=>handleQuickSelect(7),children:\"Last 7 Days\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary px-3 py-1 text-sm\",onClick:()=>handleQuickSelect(30),children:\"Last 30 Days\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary px-3 py-1 text-sm\",onClick:()=>handleQuickSelect(90),children:\"Last 90 Days\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary px-3 py-1 text-sm\",onClick:()=>{const today=new Date();const firstDay=new Date(today.getFullYear(),today.getMonth(),1);setStartDate(firstDay.toISOString().split('T')[0]);setEndDate(today.toISOString().split('T')[0]);},children:\"This Month\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"card p-4 bg-red-50 border border-red-200\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600\",children:error})}),summary&&!loading&&activeTab==='sales'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Total Bills\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold\",children:summary.total_bills})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Total Amount\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold\",children:formatCurrency(summary.total_amount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Total Discount\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-red-600\",children:formatCurrency((_summary$total_discou=summary.total_discount)!==null&&_summary$total_discou!==void 0?_summary$total_discou:0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Net Amount\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-brand-600\",children:formatCurrency((_summary$net_amount=summary.net_amount)!==null&&_summary$net_amount!==void 0?_summary$net_amount:0)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[!loading&&activeTab==='sales'&&salesData.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 flex gap-2 justify-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary px-4 py-2 text-sm flex items-center gap-2\",disabled:loading,children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"})}),\"Export Complete Billing Data\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-1 w-48 bg-white rounded-md shadow-lg py-1 hidden group-hover:block z-10\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:exportCompleteBillingDataToExcel,className:\"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\",children:\"Excel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:exportCompleteBillingDataToPDF,className:\"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\",children:\"PDF\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportToExcel,className:\"btn btn-secondary px-4 py-2 text-sm flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})}),\"Export Summary to Excel\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportToPDF,className:\"btn btn-secondary px-4 py-2 text-sm flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"})}),\"Export Summary to PDF\"]})]}),activeTab==='inventory'&&!loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 rounded-lg \".concat(inventoryView==='low-stock'?'bg-brand-500 text-white':'bg-gray-200 text-gray-700 hover:bg-gray-300'),onClick:()=>setInventoryView('low-stock'),children:\"Low Stock Items\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 rounded-lg \".concat(inventoryView==='expiring'?'bg-brand-500 text-white':'bg-gray-200 text-gray-700 hover:bg-gray-300'),onClick:()=>setInventoryView('expiring'),children:\"Expiring Items\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-auto\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:exportToExcel,className:\"btn btn-secondary px-4 py-2 text-sm flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})}),\"Export to Excel\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportToPDF,className:\"btn btn-secondary px-4 py-2 text-sm flex items-center gap-2 ml-2\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"})}),\"Export to PDF\"]})]})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Loading report data...\"})}):activeTab==='sales'&&salesData.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-left text-gray-500 border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right\",children:\"Bills\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right\",children:\"Total Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right\",children:\"Discount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4 text-right\",children:\"Net Amount\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:salesData.map((row,idx)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-100 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDateClick(row.date),className:\"text-brand-600 hover:text-brand-800 hover:underline font-medium cursor-pointer\",children:groupBy==='month'?new Date(row.date+'-01').toLocaleDateString('en-IN',{year:'numeric',month:'long'}):formatDate(row.date)})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right\",children:row.total_bills}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right\",children:formatCurrency(row.total_amount)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right text-red-600\",children:formatCurrency(row.total_discount)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 text-right font-semibold\",children:formatCurrency(row.net_amount)})]},idx))})]})}):activeTab==='inventory'?/*#__PURE__*/_jsx(\"div\",{children:inventoryView==='low-stock'?/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-left text-gray-500 border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Medicine Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Current Stock\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Low Stock Threshold\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Manufacturer\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:lowStockItems.length>0?lowStockItems.map(item=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-100 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 font-medium\",children:item.name}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:item.category}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:item.current_stock}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:item.low_stock_threshold}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:item.manufacturer})]},item.id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:5,className:\"py-4 text-center text-gray-500\",children:\"No low stock items found\"})})})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-left text-gray-500 border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Medicine Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"SKU\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Current Stock\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Expiry Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Batch Number\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 pr-4\",children:\"Manufacturer\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:expiringItems.length>0?expiringItems.map(item=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-100 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4 font-medium\",children:item.name}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:item.sku}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:item.category}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:item.current_stock}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600 font-medium\",children:item.expiry_date?formatDate(item.expiry_date):'N/A'})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:item.batch_number||'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 pr-4\",children:item.manufacturer})]},item.id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:7,className:\"py-4 text-center text-gray-500\",children:\"No expiring items found within the next 30 days\"})})})]})})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:startDate&&endDate?'No data found for the selected period':'Please select a date range'})]})]});};export default PharmacyReports;","map":{"version":3,"names":["React","useState","useEffect","getSalesSummary","getBillsByDate","getBillsByMonth","getBillsByDateRange","getLowStockItems","getExpiringItems","formatCurrency","formatDate","formatDateTime","XLSX","jsPDF","autoTable","jsx","_jsx","jsxs","_jsxs","PharmacyReports","_summary$total_discou","_summary$net_amount","activeTab","setActiveTab","startDate","setStartDate","endDate","setEndDate","groupBy","setGroupBy","loading","setLoading","error","setError","salesData","setSalesData","lowStockItems","setLowStockItems","expiringItems","setExpiringItems","inventoryView","setInventoryView","showDeepDive","setShowDeepDive","deepDiveData","setDeepDiveData","deepDiveTitle","setDeepDiveTitle","today","Date","thirtyDaysAgo","setDate","getDate","toISOString","split","fetchReports","data","lowStockData","expiringData","e","console","message","handleQuickSelect","days","pastDate","getTotalSummary","total_bills","reduce","sum","d","total_amount","total_discount","net_amount","summary","exportToExcel","sheetName","map","row","date","toLocaleDateString","year","month","item","name","category","current_stock","low_stock_threshold","manufacturer","sku","expiry_date","batch_number","worksheet","utils","json_to_sheet","workbook","book_new","book_append_sheet","writeFile","concat","exportCompleteBillingDataToExcel","allBills","bill","bill_number","created_at","patient_name","guest_name","discount","mode_of_payment","status","exportCompleteBillingDataToPDF","doc","setFontSize","text","headers","head","body","startY","theme","headStyles","fillColor","halign","styles","fontSize","columnStyles","cellWidth","save","exportToPDF","title","toString","_item$low_stock_thres","replace","handleDateClick","bills","Number","exportDeepDiveToExcel","exportDeepDiveToPDF","className","children","onClick","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","length","id","colSpan","b","type","value","onChange","target","disabled","firstDay","getFullYear","getMonth","idx"],"sources":["C:/Users/Me/Desktop/orthnova-app/orthnova-offline/src/components/pharmacy/PharmacyReports.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getSalesSummary, getBillsByDate, getBillsByMonth, getBillsByDateRange, SalesSummary, BillDetail, getLowStockItems, getExpiringItems, LowStockItem } from '../../api';\r\nimport { formatCurrency, formatDate, formatDateTime } from '../../utils/format';\r\nimport * as XLSX from 'xlsx';\r\nimport jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\nimport { InventoryItemRow } from '../../types';\r\n\r\ntype ReportTab = 'sales' | 'inventory';\r\n\r\nconst PharmacyReports: React.FC = () => {\r\n  const [activeTab, setActiveTab] = useState<ReportTab>('sales');\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n  const [groupBy, setGroupBy] = useState<'day' | 'month'>('day');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const [salesData, setSalesData] = useState<SalesSummary[]>([]);\r\n  \r\n  // Inventory states\r\n  const [lowStockItems, setLowStockItems] = useState<LowStockItem[]>([]);\r\n  const [expiringItems, setExpiringItems] = useState<InventoryItemRow[]>([]);\r\n  const [inventoryView, setInventoryView] = useState<'low-stock' | 'expiring'>('low-stock');\r\n  \r\n  // Deep dive states\r\n  const [showDeepDive, setShowDeepDive] = useState(false);\r\n  const [deepDiveData, setDeepDiveData] = useState<BillDetail[]>([]);\r\n  const [deepDiveTitle, setDeepDiveTitle] = useState('');\r\n\r\n  // Set default dates (today and 30 days ago)\r\n  useEffect(() => {\r\n    const today = new Date();\r\n    const thirtyDaysAgo = new Date(today);\r\n    thirtyDaysAgo.setDate(today.getDate() - 30);\r\n    \r\n    setEndDate(today.toISOString().split('T')[0]);\r\n    setStartDate(thirtyDaysAgo.toISOString().split('T')[0]);\r\n  }, []);\r\n\r\n  const fetchReports = async () => {\r\n    if (!startDate || !endDate) {\r\n      setError('Please select both start and end dates');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      if (activeTab === 'sales') {\r\n        const data = await getSalesSummary(startDate, endDate, groupBy);\r\n        setSalesData(data);\r\n      } else if (activeTab === 'inventory') {\r\n        // Fetch inventory data\r\n        const lowStockData = await getLowStockItems();\r\n        const expiringData = await getExpiringItems(30); // Items expiring within 30 days\r\n        \r\n        setLowStockItems(lowStockData);\r\n        setExpiringItems(expiringData);\r\n      }\r\n    } catch (e: any) {\r\n      console.error('Error fetching reports:', e);\r\n      setError(e.message || 'Failed to fetch report data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (startDate && endDate) {\r\n      fetchReports();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activeTab, groupBy, startDate, endDate]);\r\n\r\n  const handleQuickSelect = (days: number) => {\r\n    const today = new Date();\r\n    const pastDate = new Date(today);\r\n    pastDate.setDate(today.getDate() - days);\r\n    \r\n    setEndDate(today.toISOString().split('T')[0]);\r\n    setStartDate(pastDate.toISOString().split('T')[0]);\r\n  };\r\n\r\n  const getTotalSummary = () => {\r\n    if (activeTab === 'sales') {\r\n      return {\r\n        total_bills: salesData.reduce((sum, d) => sum + d.total_bills, 0),\r\n        total_amount: salesData.reduce((sum, d) => sum + d.total_amount, 0),\r\n        total_discount: salesData.reduce((sum, d) => sum + d.total_discount, 0),\r\n        net_amount: salesData.reduce((sum, d) => sum + d.net_amount, 0),\r\n      };\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const summary = getTotalSummary();\r\n\r\n  // Export to Excel\r\n  const exportToExcel = () => {\r\n    let data: any[] = [];\r\n    let sheetName = '';\r\n\r\n    if (activeTab === 'sales') {\r\n      sheetName = 'Sales Summary';\r\n      data = salesData.map(row => ({\r\n        Date: groupBy === 'month' \r\n          ? new Date(row.date + '-01').toLocaleDateString('en-IN', { year: 'numeric', month: 'long' })\r\n          : formatDate(row.date),\r\n        'Total Bills': row.total_bills,\r\n        'Total Amount': row.total_amount,\r\n        'Discount': row.total_discount,\r\n        'Net Amount': row.net_amount,\r\n      }));\r\n    } else if (activeTab === 'inventory') {\r\n      if (inventoryView === 'low-stock') {\r\n        sheetName = 'Low Stock Items';\r\n        data = lowStockItems.map(item => ({\r\n          'Medicine Name': item.name,\r\n          'Category': item.category,\r\n          'Current Stock': item.current_stock,\r\n          'Low Stock Threshold': item.low_stock_threshold,\r\n          'Manufacturer': item.manufacturer,\r\n        }));\r\n      } else {\r\n        sheetName = 'Expiring Items';\r\n        data = expiringItems.map(item => ({\r\n          'Medicine Name': item.name,\r\n          'SKU': item.sku,\r\n          'Category': item.category,\r\n          'Current Stock': item.current_stock,\r\n          'Expiry Date': item.expiry_date,\r\n          'Batch Number': item.batch_number,\r\n          'Manufacturer': item.manufacturer,\r\n        }));\r\n      }\r\n    }\r\n\r\n    const worksheet = XLSX.utils.json_to_sheet(data);\r\n    const workbook = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, sheetName);\r\n    XLSX.writeFile(workbook, `${sheetName}_${new Date().toISOString().split('T')[0]}.xlsx`);\r\n  };\r\n\r\n  // Export Complete Billing Data to Excel\r\n  const exportCompleteBillingDataToExcel = async () => {\r\n    setLoading(true);\r\n    try {\r\n      // Fetch all bills in the selected date range\r\n      const allBills = await getBillsByDateRange(startDate, endDate);\r\n      \r\n      // Export to Excel\r\n      const data = allBills.map((bill: BillDetail) => ({\r\n        'Bill Number': bill.bill_number,\r\n        'Date': formatDateTime(bill.created_at),\r\n        'Patient': bill.patient_name || bill.guest_name || 'N/A',\r\n        'Total Amount': bill.total_amount,\r\n        'Discount': bill.discount,\r\n        'Net Amount': bill.net_amount,\r\n        'Payment Mode': bill.mode_of_payment,\r\n        'Status': bill.status,\r\n      }));\r\n\r\n      const worksheet = XLSX.utils.json_to_sheet(data);\r\n      const workbook = XLSX.utils.book_new();\r\n      XLSX.utils.book_append_sheet(workbook, worksheet, 'Complete Billing Data');\r\n      XLSX.writeFile(workbook, `Complete_Billing_Data_${startDate}_to_${endDate}.xlsx`);\r\n    } catch (e: any) {\r\n      console.error('Error exporting complete billing data:', e);\r\n      setError(e.message || 'Failed to export complete billing data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Export Complete Billing Data to PDF\r\n  const exportCompleteBillingDataToPDF = async () => {\r\n    setLoading(true);\r\n    try {\r\n      // Fetch all bills in the selected date range\r\n      const allBills = await getBillsByDateRange(startDate, endDate);\r\n      \r\n      // Export to PDF\r\n      const doc = new jsPDF();\r\n      \r\n      doc.setFontSize(16);\r\n      doc.text('Complete Billing Data', 14, 15);\r\n      doc.setFontSize(10);\r\n      doc.text(`Period: ${formatDate(startDate)} to ${formatDate(endDate)}`, 14, 22);\r\n      \r\n      const headers = [['Bill #', 'Date', 'Patient', 'Total', 'Discount', 'Net', 'Payment', 'Status']];\r\n      const data = allBills.map((bill: BillDetail) => [\r\n        bill.bill_number,\r\n        formatDateTime(bill.created_at),\r\n        bill.patient_name || bill.guest_name || 'N/A',\r\n        formatCurrency(bill.total_amount),\r\n        formatCurrency(bill.discount),\r\n        formatCurrency(bill.net_amount),\r\n        bill.mode_of_payment,\r\n        bill.status,\r\n      ]);\r\n\r\n      autoTable(doc, {\r\n        head: headers,\r\n        body: data,\r\n        startY: 28,\r\n        theme: 'grid',\r\n        headStyles: { fillColor: [41, 128, 185], halign: 'center' },\r\n        styles: { fontSize: 8 },\r\n        columnStyles: {\r\n          0: { halign: 'left', cellWidth: 20 },\r\n          1: { halign: 'left', cellWidth: 30 },\r\n          2: { halign: 'left', cellWidth: 30 },\r\n          3: { halign: 'right', cellWidth: 22 },\r\n          4: { halign: 'right', cellWidth: 22 },\r\n          5: { halign: 'right', cellWidth: 22 },\r\n          6: { halign: 'center', cellWidth: 20 },\r\n          7: { halign: 'center', cellWidth: 18 },\r\n        },\r\n      });\r\n\r\n      doc.save(`Complete_Billing_Data_${startDate}_to_${endDate}.pdf`);\r\n    } catch (e: any) {\r\n      console.error('Error exporting complete billing data to PDF:', e);\r\n      setError(e.message || 'Failed to export complete billing data to PDF');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Export to PDF\r\n  const exportToPDF = () => {\r\n    const doc = new jsPDF();\r\n    let title = '';\r\n    let headers: any[] = [];\r\n    let data: any[][] = [];\r\n\r\n    if (activeTab === 'sales') {\r\n      title = 'Sales Summary Report';\r\n      headers = [['Date', 'Bills', 'Total Amount', 'Discount', 'Net Amount']];\r\n      data = salesData.map(row => [\r\n        groupBy === 'month' \r\n          ? new Date(row.date + '-01').toLocaleDateString('en-IN', { year: 'numeric', month: 'long' })\r\n          : formatDate(row.date),\r\n        row.total_bills.toString(),\r\n        formatCurrency(row.total_amount),\r\n        formatCurrency(row.total_discount),\r\n        formatCurrency(row.net_amount),\r\n      ]);\r\n    } else if (activeTab === 'inventory') {\r\n      if (inventoryView === 'low-stock') {\r\n        title = 'Low Stock Items Report';\r\n        headers = [['Medicine Name', 'Category', 'Current Stock', 'Threshold', 'Manufacturer']];\r\n        data = lowStockItems.map(item => [\r\n          item.name,\r\n          item.category,\r\n          item.current_stock.toString(),\r\n          item.low_stock_threshold?.toString() || 'N/A',\r\n          item.manufacturer,\r\n        ]);\r\n      } else {\r\n        title = 'Expiring Items Report';\r\n        headers = [['Medicine Name', 'SKU', 'Category', 'Current Stock', 'Expiry Date', 'Batch Number', 'Manufacturer']];\r\n        data = expiringItems.map(item => [\r\n          item.name,\r\n          item.sku,\r\n          item.category,\r\n          item.current_stock.toString(),\r\n          item.expiry_date || 'N/A',\r\n          item.batch_number || 'N/A',\r\n          item.manufacturer,\r\n        ]);\r\n      }\r\n    }\r\n\r\n    doc.setFontSize(16);\r\n    doc.text(title, 14, 15);\r\n    \r\n    if (activeTab === 'sales') {\r\n      doc.setFontSize(10);\r\n      doc.text(`Period: ${formatDate(startDate)} to ${formatDate(endDate)}`, 14, 22);\r\n    }\r\n\r\n    autoTable(doc, {\r\n      head: headers,\r\n      body: data,\r\n      startY: activeTab === 'sales' ? 28 : 22,\r\n      theme: 'grid',\r\n      headStyles: { fillColor: [41, 128, 185], halign: 'center' },\r\n      styles: { fontSize: 9 },\r\n      columnStyles: activeTab === 'sales' ? {\r\n        0: { halign: 'left' },\r\n        1: { halign: 'right' },\r\n        2: { halign: 'right' },\r\n        3: { halign: 'right' },\r\n        4: { halign: 'right' },\r\n      } : activeTab === 'inventory' && inventoryView === 'low-stock' ? {\r\n        0: { halign: 'left' },\r\n        1: { halign: 'left' },\r\n        2: { halign: 'left' },\r\n        3: { halign: 'right' },\r\n        4: { halign: 'right' },\r\n        5: { halign: 'left' },\r\n      } : {\r\n        0: { halign: 'left' },\r\n        1: { halign: 'left' },\r\n        2: { halign: 'left' },\r\n        3: { halign: 'right' },\r\n        4: { halign: 'center' },\r\n        5: { halign: 'left' },\r\n        6: { halign: 'left' },\r\n      },\r\n    });\r\n\r\n    doc.save(`${title.replace(/ /g, '_')}_${new Date().toISOString().split('T')[0]}.pdf`);\r\n  };\r\n\r\n  // Deep dive handlers\r\n  const handleDateClick = async (date: string) => {\r\n    setLoading(true);\r\n    try {\r\n      let bills: BillDetail[];\r\n      if (groupBy === 'month') {\r\n        const [year, month] = date.split('-').map(Number);\r\n        bills = await getBillsByMonth(year, month);\r\n        setDeepDiveTitle(`Bills for ${new Date(year, month - 1).toLocaleDateString('en-IN', { year: 'numeric', month: 'long' })}`);\r\n      } else {\r\n        bills = await getBillsByDate(date);\r\n        setDeepDiveTitle(`Bills for ${formatDate(date)}`);\r\n      }\r\n      setDeepDiveData(bills);\r\n      setShowDeepDive(true);\r\n    } catch (e: any) {\r\n      console.error('Error fetching bills:', e);\r\n      setError(e.message || 'Failed to fetch bills');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Export deep dive data\r\n  const exportDeepDiveToExcel = () => {\r\n    const data = deepDiveData.map(bill => ({\r\n      'Bill Number': bill.bill_number,\r\n      'Date': formatDateTime(bill.created_at),\r\n      'Patient': bill.patient_name || bill.guest_name || 'N/A',\r\n      'Total Amount': bill.total_amount,\r\n      'Discount': bill.discount,\r\n      'Net Amount': bill.net_amount,\r\n      'Payment Mode': bill.mode_of_payment,\r\n      'Status': bill.status,\r\n    }));\r\n\r\n    const worksheet = XLSX.utils.json_to_sheet(data);\r\n    const workbook = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Bill Details');\r\n    XLSX.writeFile(workbook, `${deepDiveTitle.replace(/ /g, '_')}.xlsx`);\r\n  };\r\n\r\n  const exportDeepDiveToPDF = () => {\r\n    const doc = new jsPDF();\r\n    \r\n    doc.setFontSize(16);\r\n    doc.text(deepDiveTitle, 14, 15);\r\n    doc.setFontSize(10);\r\n    doc.text(`Generated: ${new Date().toLocaleDateString('en-IN')}`, 14, 22);\r\n\r\n    const headers = [['Bill #', 'Date', 'Patient', 'Total', 'Discount', 'Net', 'Status']];\r\n    const data = deepDiveData.map(bill => [\r\n      bill.bill_number,\r\n      formatDateTime(bill.created_at),\r\n      bill.patient_name || bill.guest_name || 'N/A',\r\n      formatCurrency(bill.total_amount),\r\n      formatCurrency(bill.discount),\r\n      formatCurrency(bill.net_amount),\r\n      bill.status,\r\n    ]);\r\n\r\n    autoTable(doc, {\r\n      head: headers,\r\n      body: data,\r\n      startY: 28,\r\n      theme: 'grid',\r\n      headStyles: { fillColor: [41, 128, 185], halign: 'center' },\r\n      styles: { fontSize: 8 },\r\n      columnStyles: {\r\n        0: { halign: 'left', cellWidth: 20 },\r\n        1: { halign: 'left', cellWidth: 30 },\r\n        2: { halign: 'left', cellWidth: 30 },\r\n        3: { halign: 'right', cellWidth: 22 },\r\n        4: { halign: 'right', cellWidth: 22 },\r\n        5: { halign: 'right', cellWidth: 22 },\r\n        6: { halign: 'center', cellWidth: 18 },\r\n      },\r\n    });\r\n\r\n    doc.save(`${deepDiveTitle.replace(/ /g, '_')}.pdf`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Deep Dive Modal */}\r\n      {showDeepDive && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col\">\r\n            <div className=\"p-4 border-b flex justify-between items-center\">\r\n              <h3 className=\"text-lg font-semibold\">{deepDiveTitle}</h3>\r\n              <div className=\"flex items-center gap-2\">\r\n                <button\r\n                  onClick={exportDeepDiveToExcel}\r\n                  className=\"btn btn-secondary px-3 py-1 text-sm flex items-center gap-1\"\r\n                  title=\"Export to Excel\"\r\n                >\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n                  </svg>\r\n                  Excel\r\n                </button>\r\n                <button\r\n                  onClick={exportDeepDiveToPDF}\r\n                  className=\"btn btn-secondary px-3 py-1 text-sm flex items-center gap-1\"\r\n                  title=\"Export to PDF\"\r\n                >\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\" />\r\n                  </svg>\r\n                  PDF\r\n                </button>\r\n                <button\r\n                  onClick={() => setShowDeepDive(false)}\r\n                  className=\"text-gray-500 hover:text-gray-700 text-2xl font-bold ml-2\"\r\n                >\r\n                  Ã—\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"p-4 overflow-auto flex-1\">\r\n              {deepDiveData.length > 0 ? (\r\n                <table className=\"min-w-full text-sm\">\r\n                  <thead>\r\n                    <tr className=\"text-left text-gray-500 border-b\">\r\n                      <th className=\"py-2 pr-4\">Bill Number</th>\r\n                      <th className=\"py-2 pr-4\">Date</th>\r\n                      <th className=\"py-2 pr-4\">Patient</th>\r\n                      <th className=\"py-2 pr-4 text-right w-24\">Total</th>\r\n                      <th className=\"py-2 pr-4 text-right w-24\">Discount</th>\r\n                      <th className=\"py-2 pr-4 text-right w-24\">Net Amount</th>\r\n                      <th className=\"py-2 pr-4\">Payment</th>\r\n                      <th className=\"py-2 pr-4\">Status</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {deepDiveData.map((bill) => (\r\n                      <tr key={bill.id} className=\"border-b border-gray-100 hover:bg-gray-50\">\r\n                        <td className=\"py-2 pr-4 font-medium\">{bill.bill_number}</td>\r\n                        <td className=\"py-2 pr-4\">{formatDateTime(bill.created_at)}</td>\r\n                        <td className=\"py-2 pr-4\">{bill.patient_name || bill.guest_name || 'N/A'}</td>\r\n                        <td className=\"py-2 pr-4 text-right\">{formatCurrency(bill.total_amount)}</td>\r\n                        <td className=\"py-2 pr-4 text-right text-red-600\">{formatCurrency(bill.discount)}</td>\r\n                        <td className=\"py-2 pr-4 text-right font-semibold\">{formatCurrency(bill.net_amount)}</td>\r\n                        <td className=\"py-2 pr-4\">\r\n                          <span className=\"text-xs\">{bill.mode_of_payment}</span>\r\n                        </td>\r\n                        <td className=\"py-2 pr-4\">\r\n                          <span className={`px-2 py-1 rounded text-xs ${\r\n                            bill.status === 'paid' ? 'bg-green-100 text-green-800' :\r\n                            bill.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\r\n                            'bg-gray-100 text-gray-800'\r\n                          }`}>\r\n                            {bill.status}\r\n                          </span>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                  <tfoot>\r\n                    <tr className=\"font-semibold border-t-2\">\r\n                      <td colSpan={3} className=\"py-2 pr-4 text-right\">Total:</td>\r\n                      <td className=\"py-2 pr-4 text-right\">\r\n                        {formatCurrency(deepDiveData.reduce((sum, b) => sum + b.total_amount, 0))}\r\n                      </td>\r\n                      <td className=\"py-2 pr-4 text-right text-red-600\">\r\n                        {formatCurrency(deepDiveData.reduce((sum, b) => sum + b.discount, 0))}\r\n                      </td>\r\n                      <td className=\"py-2 pr-4 text-right\">\r\n                        {formatCurrency(deepDiveData.reduce((sum, b) => sum + b.net_amount, 0))}\r\n                      </td>\r\n                      <td colSpan={2}></td>\r\n                    </tr>\r\n                  </tfoot>\r\n                </table>\r\n              ) : (\r\n                <p className=\"text-center text-gray-500 py-8\">No bills found</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"card p-4\">\r\n        <h2 className=\"text-xl font-semibold mb-4\">Pharmacy Reports</h2>\r\n        \r\n        {/* Tabs */}\r\n        <div className=\"flex gap-2 mb-4 border-b\">\r\n          <button\r\n            className={`px-4 py-2 font-medium ${\r\n              activeTab === 'sales'\r\n                ? 'border-b-2 border-brand-500 text-brand-600'\r\n                : 'text-gray-500 hover:text-gray-700'\r\n            }`}\r\n            onClick={() => setActiveTab('sales')}\r\n          >\r\n            Sales Summary\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2 font-medium ${\r\n              activeTab === 'inventory'\r\n                ? 'border-b-2 border-brand-500 text-brand-600'\r\n                : 'text-gray-500 hover:text-gray-700'\r\n            }`}\r\n            onClick={() => setActiveTab('inventory')}\r\n          >\r\n            Inventory Reports\r\n          </button>\r\n        </div>\r\n\r\n        {/* Date Range Selection */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">Start Date</label>\r\n            <input\r\n              type=\"date\"\r\n              className=\"w-full\"\r\n              value={startDate}\r\n              onChange={e => setStartDate(e.target.value)}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">End Date</label>\r\n            <input\r\n              type=\"date\"\r\n              className=\"w-full\"\r\n              value={endDate}\r\n              onChange={e => setEndDate(e.target.value)}\r\n            />\r\n          </div>\r\n          {activeTab === 'sales' && (\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-1\">Group By</label>\r\n              <select\r\n                className=\"w-full\"\r\n                value={groupBy}\r\n                onChange={e => setGroupBy(e.target.value as 'day' | 'month')}\r\n              >\r\n                <option value=\"day\">Daily</option>\r\n                <option value=\"month\">Monthly</option>\r\n              </select>\r\n            </div>\r\n          )}\r\n          <div className=\"flex items-end\">\r\n            <button className=\"btn btn-primary w-full\" onClick={fetchReports} disabled={loading}>\r\n              {loading ? 'Loading...' : 'Generate Report'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Quick Select */}\r\n        <div className=\"flex gap-2 mb-4\">\r\n          <button className=\"btn btn-secondary px-3 py-1 text-sm\" onClick={() => handleQuickSelect(7)}>\r\n            Last 7 Days\r\n          </button>\r\n          <button className=\"btn btn-secondary px-3 py-1 text-sm\" onClick={() => handleQuickSelect(30)}>\r\n            Last 30 Days\r\n          </button>\r\n          <button className=\"btn btn-secondary px-3 py-1 text-sm\" onClick={() => handleQuickSelect(90)}>\r\n            Last 90 Days\r\n          </button>\r\n          <button className=\"btn btn-secondary px-3 py-1 text-sm\" onClick={() => {\r\n            const today = new Date();\r\n            const firstDay = new Date(today.getFullYear(), today.getMonth(), 1);\r\n            setStartDate(firstDay.toISOString().split('T')[0]);\r\n            setEndDate(today.toISOString().split('T')[0]);\r\n          }}>\r\n            This Month\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className=\"card p-4 bg-red-50 border border-red-200\">\r\n          <p className=\"text-red-600\">{error}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Summary Cards */}\r\n      {summary && !loading && activeTab === 'sales' && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n          <div className=\"card p-4\">\r\n            <p className=\"text-sm text-gray-500\">Total Bills</p>\r\n            <p className=\"text-2xl font-bold\">{summary.total_bills}</p>\r\n          </div>\r\n          <div className=\"card p-4\">\r\n            <p className=\"text-sm text-gray-500\">Total Amount</p>\r\n            <p className=\"text-2xl font-bold\">{formatCurrency(summary.total_amount)}</p>\r\n          </div>\r\n          <div className=\"card p-4\">\r\n            <p className=\"text-sm text-gray-500\">Total Discount</p>\r\n            <p className=\"text-2xl font-bold text-red-600\">{formatCurrency(summary.total_discount ?? 0)}</p>\r\n          </div>\r\n          <div className=\"card p-4\">\r\n            <p className=\"text-sm text-gray-500\">Net Amount</p>\r\n            <p className=\"text-2xl font-bold text-brand-600\">{formatCurrency(summary.net_amount ?? 0)}</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Report Tables */}\r\n      <div className=\"card p-6\">\r\n        {/* Export Buttons */}\r\n        {!loading && activeTab === 'sales' && salesData.length > 0 && (\r\n          <div className=\"mb-4 flex gap-2 justify-end\">\r\n            <div className=\"relative group\">\r\n              <button\r\n                className=\"btn btn-primary px-4 py-2 text-sm flex items-center gap-2\"\r\n                disabled={loading}\r\n              >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\r\n                </svg>\r\n                Export Complete Billing Data\r\n              </button>\r\n              <div className=\"absolute right-0 mt-1 w-48 bg-white rounded-md shadow-lg py-1 hidden group-hover:block z-10\">\r\n                <button\r\n                  onClick={exportCompleteBillingDataToExcel}\r\n                  className=\"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\r\n                >\r\n                  Excel\r\n                </button>\r\n                <button\r\n                  onClick={exportCompleteBillingDataToPDF}\r\n                  className=\"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\r\n                >\r\n                  PDF\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={exportToExcel}\r\n              className=\"btn btn-secondary px-4 py-2 text-sm flex items-center gap-2\"\r\n            >\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n              </svg>\r\n              Export Summary to Excel\r\n            </button>\r\n            <button\r\n              onClick={exportToPDF}\r\n              className=\"btn btn-secondary px-4 py-2 text-sm flex items-center gap-2\"\r\n            >\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\" />\r\n              </svg>\r\n              Export Summary to PDF\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Inventory View Toggle */}\r\n        {activeTab === 'inventory' && !loading && (\r\n          <div className=\"mb-4 flex gap-2\">\r\n            <button\r\n              className={`px-4 py-2 rounded-lg ${\r\n                inventoryView === 'low-stock'\r\n                  ? 'bg-brand-500 text-white'\r\n                  : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n              }`}\r\n              onClick={() => setInventoryView('low-stock')}\r\n            >\r\n              Low Stock Items\r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-lg ${\r\n                inventoryView === 'expiring'\r\n                  ? 'bg-brand-500 text-white'\r\n                  : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n              }`}\r\n              onClick={() => setInventoryView('expiring')}\r\n            >\r\n              Expiring Items\r\n            </button>\r\n            <div className=\"ml-auto\">\r\n              <button\r\n                onClick={exportToExcel}\r\n                className=\"btn btn-secondary px-4 py-2 text-sm flex items-center gap-2\"\r\n              >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n                </svg>\r\n                Export to Excel\r\n              </button>\r\n              <button\r\n                onClick={exportToPDF}\r\n                className=\"btn btn-secondary px-4 py-2 text-sm flex items-center gap-2 ml-2\"\r\n              >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\" />\r\n                </svg>\r\n                Export to PDF\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {loading ? (\r\n          <div className=\"text-center py-8\">\r\n            <p className=\"text-gray-500\">Loading report data...</p>\r\n          </div>\r\n        ) : activeTab === 'sales' && salesData.length > 0 ? (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full text-sm\">\r\n              <thead>\r\n                <tr className=\"text-left text-gray-500 border-b\">\r\n                  <th className=\"py-2 pr-4\">Date</th>\r\n                  <th className=\"py-2 pr-4 text-right\">Bills</th>\r\n                  <th className=\"py-2 pr-4 text-right\">Total Amount</th>\r\n                  <th className=\"py-2 pr-4 text-right\">Discount</th>\r\n                  <th className=\"py-2 pr-4 text-right\">Net Amount</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {salesData.map((row, idx) => (\r\n                  <tr key={idx} className=\"border-b border-gray-100 hover:bg-gray-50\">\r\n                    <td className=\"py-2 pr-4\">\r\n                      <button\r\n                        onClick={() => handleDateClick(row.date)}\r\n                        className=\"text-brand-600 hover:text-brand-800 hover:underline font-medium cursor-pointer\"\r\n                      >\r\n                        {groupBy === 'month' \r\n                          ? new Date(row.date + '-01').toLocaleDateString('en-IN', { year: 'numeric', month: 'long' })\r\n                          : formatDate(row.date)}\r\n                      </button>\r\n                    </td>\r\n                    <td className=\"py-2 pr-4 text-right\">{row.total_bills}</td>\r\n                    <td className=\"py-2 pr-4 text-right\">{formatCurrency(row.total_amount)}</td>\r\n                    <td className=\"py-2 pr-4 text-right text-red-600\">{formatCurrency(row.total_discount)}</td>\r\n                    <td className=\"py-2 pr-4 text-right font-semibold\">{formatCurrency(row.net_amount)}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        ) : activeTab === 'inventory' ? (\r\n          <div>\r\n            {inventoryView === 'low-stock' ? (\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full text-sm\">\r\n                  <thead>\r\n                    <tr className=\"text-left text-gray-500 border-b\">\r\n                      <th className=\"py-2 pr-4\">Medicine Name</th>\r\n                      <th className=\"py-2 pr-4\">Category</th>\r\n                      <th className=\"py-2 pr-4\">Current Stock</th>\r\n                      <th className=\"py-2 pr-4\">Low Stock Threshold</th>\r\n                      <th className=\"py-2 pr-4\">Manufacturer</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {lowStockItems.length > 0 ? (\r\n                      lowStockItems.map((item) => (\r\n                        <tr key={item.id} className=\"border-b border-gray-100 hover:bg-gray-50\">\r\n                          <td className=\"py-2 pr-4 font-medium\">{item.name}</td>\r\n                          <td className=\"py-2 pr-4\">{item.category}</td>\r\n                          <td className=\"py-2 pr-4\">{item.current_stock}</td>\r\n                          <td className=\"py-2 pr-4\">{item.low_stock_threshold}</td>\r\n                          <td className=\"py-2 pr-4\">{item.manufacturer}</td>\r\n                        </tr>\r\n                      ))\r\n                    ) : (\r\n                      <tr>\r\n                        <td colSpan={5} className=\"py-4 text-center text-gray-500\">\r\n                          No low stock items found\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            ) : (\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full text-sm\">\r\n                  <thead>\r\n                    <tr className=\"text-left text-gray-500 border-b\">\r\n                      <th className=\"py-2 pr-4\">Medicine Name</th>\r\n                      <th className=\"py-2 pr-4\">SKU</th>\r\n                      <th className=\"py-2 pr-4\">Category</th>\r\n                      <th className=\"py-2 pr-4\">Current Stock</th>\r\n                      <th className=\"py-2 pr-4\">Expiry Date</th>\r\n                      <th className=\"py-2 pr-4\">Batch Number</th>\r\n                      <th className=\"py-2 pr-4\">Manufacturer</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {expiringItems.length > 0 ? (\r\n                      expiringItems.map((item) => (\r\n                        <tr key={item.id} className=\"border-b border-gray-100 hover:bg-gray-50\">\r\n                          <td className=\"py-2 pr-4 font-medium\">{item.name}</td>\r\n                          <td className=\"py-2 pr-4\">{item.sku}</td>\r\n                          <td className=\"py-2 pr-4\">{item.category}</td>\r\n                          <td className=\"py-2 pr-4\">{item.current_stock}</td>\r\n                          <td className=\"py-2 pr-4\">\r\n                            <span className=\"text-red-600 font-medium\">\r\n                              {item.expiry_date ? formatDate(item.expiry_date) : 'N/A'}\r\n                            </span>\r\n                          </td>\r\n                          <td className=\"py-2 pr-4\">{item.batch_number || 'N/A'}</td>\r\n                          <td className=\"py-2 pr-4\">{item.manufacturer}</td>\r\n                        </tr>\r\n                      ))\r\n                    ) : (\r\n                      <tr>\r\n                        <td colSpan={7} className=\"py-4 text-center text-gray-500\">\r\n                          No expiring items found within the next 30 days\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className=\"text-center py-8 text-gray-500\">\r\n            {startDate && endDate ? 'No data found for the selected period' : 'Please select a date range'}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PharmacyReports;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}