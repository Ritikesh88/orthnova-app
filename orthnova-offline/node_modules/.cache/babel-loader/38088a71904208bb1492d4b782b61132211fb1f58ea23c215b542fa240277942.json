{"ast":null,"code":"import _objectSpread from\"C:/Users/Me/Desktop/orthnova-app/orthnova-offline/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{addUser,createDoctor,listUsers}from'../../api';import{generateDoctorId}from'../../utils/idGenerators';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UserRegistration=()=>{var _form$allowedToRegist;const[users,setUsers]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[success,setSuccess]=useState(null);const[showPassword,setShowPassword]=useState(false);const[showCreatedUserModal,setShowCreatedUserModal]=useState(false);const[createdUserData,setCreatedUserData]=useState(null);const[form,setForm]=useState({firstName:'',lastName:'',email:'',phone:'',role:'receptionist',userId:'',password:'',forceChangeOnFirstLogin:true,active:true,notes:''});// Auto-generate userId and password when firstName or phone changes\nuseEffect(()=>{if(form.firstName){// Generate userId from firstName (lowercase, alphanumeric only)\nconst baseUserId=form.firstName.toLowerCase().replace(/[^a-z0-9]/g,'');setForm(prev=>_objectSpread(_objectSpread({},prev),{},{userId:baseUserId}));}if(form.firstName&&form.phone){// Generate password: firstname@last4digitsofphone\nconst last4Digits=form.phone.slice(-4);const newPassword=\"\".concat(form.firstName.toLowerCase(),\"@\").concat(last4Digits);setForm(prev=>_objectSpread(_objectSpread({},prev),{},{password:newPassword}));}},[form.firstName,form.phone]);async function refresh(){setLoading(true);setError(null);try{const data=await listUsers();setUsers(data);}catch(e){setError(e.message);}finally{setLoading(false);}}useEffect(()=>{refresh();},[]);// Check if userId is available\nconst checkUserIdAvailability=async userId=>{try{// Simulate API call - in a real app, this would be an actual API call\nconst existingUser=users.find(user=>user.user_id===userId);return!existingUser;}catch(e){return false;}};// Handle userId change with availability checking\nconst handleUserIdChange=async value=>{// Sanitize userId (3-30 chars, only letters, numbers, underscore)\nconst sanitizedValue=value.replace(/[^a-zA-Z0-9_]/g,'').substring(0,30);setForm(prev=>_objectSpread(_objectSpread({},prev),{},{userId:sanitizedValue}));// Check availability if value is valid\nif(sanitizedValue.length>=3){const isAvailable=await checkUserIdAvailability(sanitizedValue);if(!isAvailable){// Suggest alternatives\nlet suggestion=\"\".concat(sanitizedValue,\"1\");let counter=1;while(!(await checkUserIdAvailability(suggestion))){counter++;suggestion=\"\".concat(sanitizedValue).concat(counter);}setError(\"User ID \\\"\".concat(sanitizedValue,\"\\\" is taken. Suggested: \").concat(suggestion));}else{setError(null);}}};const onSubmit=async e=>{e.preventDefault();setError(null);setSuccess(null);// Validation\nif(!form.firstName){setError('First Name is required');return;}if(!form.phone){setError('Phone Number is required');return;}if(form.role==='doctor'&&!form.licenseNumber){setError('License Number is required for Doctors');return;}if(form.userId.length<3||form.userId.length>30){setError('User ID must be between 3 and 30 characters');return;}try{// Create the user record with the existing API structure\nconst userData=await addUser({user_id:form.userId,password:form.password,role:form.role});// If the user is a doctor, also create an entry in the doctors table\nif(form.role==='doctor'&&form.licenseNumber){const fullName=\"\".concat(form.firstName,\" \").concat(form.lastName).trim();const doctorId=generateDoctorId(form.licenseNumber,fullName);await createDoctor({id:crypto.randomUUID(),doctor_id:doctorId,name:fullName,contact:form.phone,registration_number:form.licenseNumber,opd_fees:form.consultationFee||0});}setSuccess('User created successfully');setCreatedUserData({userId:form.userId,password:form.password});setShowCreatedUserModal(true);// Reset form\nsetForm({firstName:'',lastName:'',email:'',phone:'',role:'receptionist',userId:'',password:'',forceChangeOnFirstLogin:true,active:true,notes:''});await refresh();}catch(e){setError(e.message);}};const copyToClipboard=text=>{navigator.clipboard.writeText(text);};const resetForm=()=>{setForm({firstName:'',lastName:'',email:'',phone:'',role:'receptionist',userId:'',password:'',forceChangeOnFirstLogin:true,active:true,notes:''});setError(null);setSuccess(null);};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Create New User\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,className:\"grid grid-cols-1 md:grid-cols-6 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"Role *\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\",value:form.role,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{role:e.target.value})),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"doctor\",children:\"Doctor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"receptionist\",children:\"Receptionist\"}),/*#__PURE__*/_jsx(\"option\",{value:\"store_manager\",children:\"Pharmacy Receptionist\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"First Name *\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\",value:form.firstName,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{firstName:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\",value:form.lastName,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{lastName:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\",value:form.email,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{email:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"Phone Number *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",className:\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\",value:form.phone,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{phone:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"User ID\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\",value:form.userId,onChange:e=>handleUserIdChange(e.target.value)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Auto-generated from first name. 3-30 characters, letters/numbers/underscore only.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex mt-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",className:\"rounded-l-xl border-gray-300 focus:ring-brand-500 flex-grow\",value:form.password,readOnly:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bg-gray-200 hover:bg-gray-300 px-3 rounded-r-xl\",onClick:()=>setShowPassword(!showPassword),children:showPassword?'Hide':'Show'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 mt-1\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"text-xs text-blue-600 hover:text-blue-800\",onClick:()=>copyToClipboard(form.password),children:\"Copy\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Auto-generated: firstname@last4digitsofphone\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"rounded border-gray-300 focus:ring-brand-500\",checked:form.forceChangeOnFirstLogin,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{forceChangeOnFirstLogin:e.target.checked})),id:\"forceChange\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"forceChange\",className:\"ml-2 block text-sm\",children:\"Force password change on first login\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"rounded border-gray-300 focus:ring-brand-500\",checked:form.active,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{active:e.target.checked})),id:\"activeStatus\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"activeStatus\",className:\"ml-2 block text-sm\",children:\"Active\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"Notes\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\",rows:3,value:form.notes,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{notes:e.target.value}))})]}),form.role==='doctor'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"Specialty\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\",value:form.specialty||'',onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{specialty:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"License Number *\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\",value:form.licenseNumber||'',onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{licenseNumber:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"Consultation Fee\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\",value:form.consultationFee||'',onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{consultationFee:Number(e.target.value)}))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-blue-50 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-800\",children:\"Access: Clinic App (Appointments, Patients, Billing)\"})})})]}),form.role==='store_manager'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"Pharmacy Branch\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\",value:form.pharmacyBranch||'',onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{pharmacyBranch:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"Inventory Access Level\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\",value:form.inventoryAccessLevel||'',onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{inventoryAccessLevel:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Access Level\"}),/*#__PURE__*/_jsx(\"option\",{value:\"view_only\",children:\"View Only\"}),/*#__PURE__*/_jsx(\"option\",{value:\"create_orders\",children:\"Create Orders\"}),/*#__PURE__*/_jsx(\"option\",{value:\"manage_stock\",children:\"Manage Stock\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-blue-50 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-800\",children:\"Access: Pharmacy Module Only\"})})})]}),form.role==='admin'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"rounded border-gray-300 focus:ring-brand-500\",checked:form.superAdmin||false,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{superAdmin:e.target.checked})),id:\"superAdmin\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"superAdmin\",className:\"ml-2 block text-sm\",children:\"Super Admin\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"rounded border-gray-300 focus:ring-brand-500\",checked:(_form$allowedToRegist=form.allowedToRegisterUsers)!==null&&_form$allowedToRegist!==void 0?_form$allowedToRegist:true,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{allowedToRegisterUsers:e.target.checked})),id:\"allowedToRegisterUsers\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"allowedToRegisterUsers\",className:\"ml-2 block text-sm\",children:\"Allowed to register users\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-6 flex items-end justify-end gap-2 mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:resetForm,children:\"Reset Form\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>window.history.back(),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",disabled:loading,children:\"Create User\"})]})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 text-sm mt-2\",children:error}),success&&/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 text-sm mt-2\",children:success})]}),showCreatedUserModal&&createdUserData&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl p-6 max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"User Created Successfully\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"User ID\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex mt-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"rounded-l-xl border-gray-300 focus:ring-brand-500 flex-grow\",value:createdUserData.userId,readOnly:true}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-200 hover:bg-gray-300 px-3 rounded-r-xl\",onClick:()=>copyToClipboard(createdUserData.userId),children:\"Copy\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex mt-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",className:\"rounded-l-xl border-gray-300 focus:ring-brand-500 flex-grow\",value:createdUserData.password,readOnly:true}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-200 hover:bg-gray-300 px-3 rounded-r-xl\",onClick:()=>setShowPassword(!showPassword),children:showPassword?'Hide':'Show'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 mt-1\",children:/*#__PURE__*/_jsx(\"button\",{className:\"text-xs text-blue-600 hover:text-blue-800\",onClick:()=>copyToClipboard(createdUserData.password),children:\"Copy\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-2 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>{setShowCreatedUserModal(false);setCreatedUserData(null);},children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>{setShowCreatedUserModal(false);setCreatedUserData(null);// Navigate to user management page\nwindow.location.hash='/clinic/admin/users';},children:\"Go to Manage Users\"})]})]})})]});};export default UserRegistration;","map":{"version":3,"names":["React","useEffect","useState","addUser","createDoctor","listUsers","generateDoctorId","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserRegistration","_form$allowedToRegist","users","setUsers","loading","setLoading","error","setError","success","setSuccess","showPassword","setShowPassword","showCreatedUserModal","setShowCreatedUserModal","createdUserData","setCreatedUserData","form","setForm","firstName","lastName","email","phone","role","userId","password","forceChangeOnFirstLogin","active","notes","baseUserId","toLowerCase","replace","prev","_objectSpread","last4Digits","slice","newPassword","concat","refresh","data","e","message","checkUserIdAvailability","existingUser","find","user","user_id","handleUserIdChange","value","sanitizedValue","substring","length","isAvailable","suggestion","counter","onSubmit","preventDefault","licenseNumber","userData","fullName","trim","doctorId","id","crypto","randomUUID","doctor_id","name","contact","registration_number","opd_fees","consultationFee","copyToClipboard","text","navigator","clipboard","writeText","resetForm","className","children","onChange","f","target","required","type","readOnly","onClick","checked","htmlFor","rows","specialty","Number","pharmacyBranch","inventoryAccessLevel","superAdmin","allowedToRegisterUsers","window","history","back","disabled","location","hash"],"sources":["C:/Users/Me/Desktop/orthnova-app/orthnova-offline/src/components/admin/UserRegistration.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { addUser, createDoctor, listUsers } from '../../api';\r\nimport { UserRow, UserRole } from '../../types';\r\nimport { generateDoctorId } from '../../utils/idGenerators';\r\n\r\ninterface UserFormData {\r\n  firstName: string;\r\n  lastName: string;\r\n  email: string;\r\n  phone: string;\r\n  role: UserRole;\r\n  userId: string;\r\n  password: string;\r\n  forceChangeOnFirstLogin: boolean;\r\n  active: boolean;\r\n  notes: string;\r\n  specialty?: string;\r\n  licenseNumber?: string;\r\n  consultationFee?: number;\r\n  pharmacyBranch?: string;\r\n  inventoryAccessLevel?: string;\r\n  superAdmin?: boolean;\r\n  allowedToRegisterUsers?: boolean;\r\n}\r\n\r\nconst UserRegistration: React.FC = () => {\r\n  const [users, setUsers] = useState<UserRow[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<string | null>(null);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showCreatedUserModal, setShowCreatedUserModal] = useState(false);\r\n  const [createdUserData, setCreatedUserData] = useState<{ userId: string; password: string } | null>(null);\r\n\r\n  const [form, setForm] = useState<UserFormData>({\r\n    firstName: '',\r\n    lastName: '',\r\n    email: '',\r\n    phone: '',\r\n    role: 'receptionist',\r\n    userId: '',\r\n    password: '',\r\n    forceChangeOnFirstLogin: true,\r\n    active: true,\r\n    notes: '',\r\n  });\r\n\r\n  // Auto-generate userId and password when firstName or phone changes\r\n  useEffect(() => {\r\n    if (form.firstName) {\r\n      // Generate userId from firstName (lowercase, alphanumeric only)\r\n      const baseUserId = form.firstName.toLowerCase().replace(/[^a-z0-9]/g, '');\r\n      setForm(prev => ({ ...prev, userId: baseUserId }));\r\n    }\r\n    \r\n    if (form.firstName && form.phone) {\r\n      // Generate password: firstname@last4digitsofphone\r\n      const last4Digits = form.phone.slice(-4);\r\n      const newPassword = `${form.firstName.toLowerCase()}@${last4Digits}`;\r\n      setForm(prev => ({ ...prev, password: newPassword }));\r\n    }\r\n  }, [form.firstName, form.phone]);\r\n\r\n  async function refresh() {\r\n    setLoading(true); \r\n    setError(null);\r\n    try {\r\n      const data = await listUsers();\r\n      setUsers(data);\r\n    } catch (e: any) { \r\n      setError(e.message); \r\n    }\r\n    finally { \r\n      setLoading(false); \r\n    }\r\n  }\r\n  \r\n  useEffect(() => { \r\n    refresh(); \r\n  }, []);\r\n\r\n  // Check if userId is available\r\n  const checkUserIdAvailability = async (userId: string) => {\r\n    try {\r\n      // Simulate API call - in a real app, this would be an actual API call\r\n      const existingUser = users.find(user => user.user_id === userId);\r\n      return !existingUser;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Handle userId change with availability checking\r\n  const handleUserIdChange = async (value: string) => {\r\n    // Sanitize userId (3-30 chars, only letters, numbers, underscore)\r\n    const sanitizedValue = value.replace(/[^a-zA-Z0-9_]/g, '').substring(0, 30);\r\n    \r\n    setForm(prev => ({ ...prev, userId: sanitizedValue }));\r\n    \r\n    // Check availability if value is valid\r\n    if (sanitizedValue.length >= 3) {\r\n      const isAvailable = await checkUserIdAvailability(sanitizedValue);\r\n      if (!isAvailable) {\r\n        // Suggest alternatives\r\n        let suggestion = `${sanitizedValue}1`;\r\n        let counter = 1;\r\n        while (!(await checkUserIdAvailability(suggestion))) {\r\n          counter++;\r\n          suggestion = `${sanitizedValue}${counter}`;\r\n        }\r\n        setError(`User ID \"${sanitizedValue}\" is taken. Suggested: ${suggestion}`);\r\n      } else {\r\n        setError(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault(); \r\n    setError(null); \r\n    setSuccess(null);\r\n    \r\n    // Validation\r\n    if (!form.firstName) {\r\n      setError('First Name is required');\r\n      return;\r\n    }\r\n    \r\n    if (!form.phone) {\r\n      setError('Phone Number is required');\r\n      return;\r\n    }\r\n    \r\n    if (form.role === 'doctor' && !form.licenseNumber) {\r\n      setError('License Number is required for Doctors');\r\n      return;\r\n    }\r\n    \r\n    if (form.userId.length < 3 || form.userId.length > 30) {\r\n      setError('User ID must be between 3 and 30 characters');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      // Create the user record with the existing API structure\r\n      const userData = await addUser({ \r\n        user_id: form.userId,\r\n        password: form.password,\r\n        role: form.role\r\n      });\r\n      \r\n      // If the user is a doctor, also create an entry in the doctors table\r\n      if (form.role === 'doctor' && form.licenseNumber) {\r\n        const fullName = `${form.firstName} ${form.lastName}`.trim();\r\n        const doctorId = generateDoctorId(form.licenseNumber, fullName);\r\n        \r\n        await createDoctor({\r\n          id: crypto.randomUUID(),\r\n          doctor_id: doctorId,\r\n          name: fullName,\r\n          contact: form.phone,\r\n          registration_number: form.licenseNumber,\r\n          opd_fees: form.consultationFee || 0\r\n        });\r\n      }\r\n      \r\n      setSuccess('User created successfully');\r\n      setCreatedUserData({ userId: form.userId, password: form.password });\r\n      setShowCreatedUserModal(true);\r\n      \r\n      // Reset form\r\n      setForm({\r\n        firstName: '',\r\n        lastName: '',\r\n        email: '',\r\n        phone: '',\r\n        role: 'receptionist',\r\n        userId: '',\r\n        password: '',\r\n        forceChangeOnFirstLogin: true,\r\n        active: true,\r\n        notes: '',\r\n      });\r\n      \r\n      await refresh();\r\n    } catch (e: any) { \r\n      setError(e.message); \r\n    }\r\n  };\r\n\r\n  const copyToClipboard = (text: string) => {\r\n    navigator.clipboard.writeText(text);\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setForm({\r\n      firstName: '',\r\n      lastName: '',\r\n      email: '',\r\n      phone: '',\r\n      role: 'receptionist',\r\n      userId: '',\r\n      password: '',\r\n      forceChangeOnFirstLogin: true,\r\n      active: true,\r\n      notes: '',\r\n    });\r\n    setError(null);\r\n    setSuccess(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"card p-6\">\r\n        <h2 className=\"text-xl font-semibold mb-4\">Create New User</h2>\r\n        <form onSubmit={onSubmit} className=\"grid grid-cols-1 md:grid-cols-6 gap-4\">\r\n          {/* Role Selection */}\r\n          <div className=\"md:col-span-3\">\r\n            <label className=\"block text-sm font-medium\">Role *</label>\r\n            <select\r\n              className=\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\"\r\n              value={form.role}\r\n              onChange={e => setForm(f => ({...f, role: e.target.value as UserRole}))}\r\n              required\r\n            >\r\n              <option value=\"doctor\">Doctor</option>\r\n              <option value=\"receptionist\">Receptionist</option>\r\n              <option value=\"store_manager\">Pharmacy Receptionist</option>\r\n              <option value=\"admin\">Admin</option>\r\n            </select>\r\n          </div>\r\n          \r\n          {/* First Name */}\r\n          <div className=\"md:col-span-3\">\r\n            <label className=\"block text-sm font-medium\">First Name *</label>\r\n            <input \r\n              className=\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\" \r\n              value={form.firstName} \r\n              onChange={e => setForm(f => ({...f, firstName: e.target.value}))} \r\n              required \r\n            />\r\n          </div>\r\n          \r\n          {/* Last Name */}\r\n          <div className=\"md:col-span-3\">\r\n            <label className=\"block text-sm font-medium\">Last Name</label>\r\n            <input \r\n              className=\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\" \r\n              value={form.lastName} \r\n              onChange={e => setForm(f => ({...f, lastName: e.target.value}))} \r\n            />\r\n          </div>\r\n          \r\n          {/* Email */}\r\n          <div className=\"md:col-span-3\">\r\n            <label className=\"block text-sm font-medium\">Email</label>\r\n            <input \r\n              type=\"email\"\r\n              className=\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\" \r\n              value={form.email} \r\n              onChange={e => setForm(f => ({...f, email: e.target.value}))} \r\n            />\r\n          </div>\r\n          \r\n          {/* Phone Number */}\r\n          <div className=\"md:col-span-3\">\r\n            <label className=\"block text-sm font-medium\">Phone Number *</label>\r\n            <input \r\n              type=\"tel\"\r\n              className=\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\" \r\n              value={form.phone} \r\n              onChange={e => setForm(f => ({...f, phone: e.target.value}))} \r\n              required \r\n            />\r\n          </div>\r\n          \r\n          {/* User ID */}\r\n          <div className=\"md:col-span-3\">\r\n            <label className=\"block text-sm font-medium\">User ID</label>\r\n            <input \r\n              className=\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\" \r\n              value={form.userId} \r\n              onChange={e => handleUserIdChange(e.target.value)} \r\n            />\r\n            <p className=\"text-xs text-gray-500 mt-1\">Auto-generated from first name. 3-30 characters, letters/numbers/underscore only.</p>\r\n          </div>\r\n          \r\n          {/* Password */}\r\n          <div className=\"md:col-span-3\">\r\n            <label className=\"block text-sm font-medium\">Password</label>\r\n            <div className=\"flex mt-1\">\r\n              <input \r\n                type={showPassword ? \"text\" : \"password\"}\r\n                className=\"rounded-l-xl border-gray-300 focus:ring-brand-500 flex-grow\" \r\n                value={form.password} \r\n                readOnly\r\n              />\r\n              <button \r\n                type=\"button\"\r\n                className=\"bg-gray-200 hover:bg-gray-300 px-3 rounded-r-xl\"\r\n                onClick={() => setShowPassword(!showPassword)}\r\n              >\r\n                {showPassword ? 'Hide' : 'Show'}\r\n              </button>\r\n            </div>\r\n            <div className=\"flex gap-2 mt-1\">\r\n              <button \r\n                type=\"button\"\r\n                className=\"text-xs text-blue-600 hover:text-blue-800\"\r\n                onClick={() => copyToClipboard(form.password)}\r\n              >\r\n                Copy\r\n              </button>\r\n            </div>\r\n            <p className=\"text-xs text-gray-500 mt-1\">Auto-generated: firstname@last4digitsofphone</p>\r\n          </div>\r\n          \r\n          {/* Force Password Change */}\r\n          <div className=\"md:col-span-3\">\r\n            <div className=\"flex items-center\">\r\n              <input \r\n                type=\"checkbox\"\r\n                className=\"rounded border-gray-300 focus:ring-brand-500\" \r\n                checked={form.forceChangeOnFirstLogin} \r\n                onChange={e => setForm(f => ({...f, forceChangeOnFirstLogin: e.target.checked}))} \r\n                id=\"forceChange\"\r\n              />\r\n              <label htmlFor=\"forceChange\" className=\"ml-2 block text-sm\">Force password change on first login</label>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Active Status */}\r\n          <div className=\"md:col-span-3\">\r\n            <div className=\"flex items-center\">\r\n              <input \r\n                type=\"checkbox\"\r\n                className=\"rounded border-gray-300 focus:ring-brand-500\" \r\n                checked={form.active} \r\n                onChange={e => setForm(f => ({...f, active: e.target.checked}))} \r\n                id=\"activeStatus\"\r\n              />\r\n              <label htmlFor=\"activeStatus\" className=\"ml-2 block text-sm\">Active</label>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Notes */}\r\n          <div className=\"md:col-span-6\">\r\n            <label className=\"block text-sm font-medium\">Notes</label>\r\n            <textarea \r\n              className=\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\" \r\n              rows={3}\r\n              value={form.notes} \r\n              onChange={e => setForm(f => ({...f, notes: e.target.value}))} \r\n            />\r\n          </div>\r\n          \r\n          {/* Role-specific conditional fields */}\r\n          {form.role === 'doctor' && (\r\n            <>\r\n              <div className=\"md:col-span-3\">\r\n                <label className=\"block text-sm font-medium\">Specialty</label>\r\n                <input \r\n                  className=\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\" \r\n                  value={form.specialty || ''} \r\n                  onChange={e => setForm(f => ({...f, specialty: e.target.value}))} \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"md:col-span-3\">\r\n                <label className=\"block text-sm font-medium\">License Number *</label>\r\n                <input \r\n                  className=\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\" \r\n                  value={form.licenseNumber || ''} \r\n                  onChange={e => setForm(f => ({...f, licenseNumber: e.target.value}))} \r\n                  required \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"md:col-span-3\">\r\n                <label className=\"block text-sm font-medium\">Consultation Fee</label>\r\n                <input \r\n                  type=\"number\"\r\n                  className=\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\" \r\n                  value={form.consultationFee || ''} \r\n                  onChange={e => setForm(f => ({...f, consultationFee: Number(e.target.value)}))} \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"md:col-span-6\">\r\n                <div className=\"p-4 bg-blue-50 rounded-lg\">\r\n                  <p className=\"text-sm text-blue-800\">Access: Clinic App (Appointments, Patients, Billing)</p>\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n          \r\n          {form.role === 'store_manager' && (\r\n            <>\r\n              <div className=\"md:col-span-3\">\r\n                <label className=\"block text-sm font-medium\">Pharmacy Branch</label>\r\n                <input \r\n                  className=\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\" \r\n                  value={form.pharmacyBranch || ''} \r\n                  onChange={e => setForm(f => ({...f, pharmacyBranch: e.target.value}))} \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"md:col-span-3\">\r\n                <label className=\"block text-sm font-medium\">Inventory Access Level</label>\r\n                <select\r\n                  className=\"mt-1 w-full rounded-xl border-gray-300 focus:ring-brand-500\"\r\n                  value={form.inventoryAccessLevel || ''}\r\n                  onChange={e => setForm(f => ({...f, inventoryAccessLevel: e.target.value}))}\r\n                >\r\n                  <option value=\"\">Select Access Level</option>\r\n                  <option value=\"view_only\">View Only</option>\r\n                  <option value=\"create_orders\">Create Orders</option>\r\n                  <option value=\"manage_stock\">Manage Stock</option>\r\n                </select>\r\n              </div>\r\n              \r\n              <div className=\"md:col-span-6\">\r\n                <div className=\"p-4 bg-blue-50 rounded-lg\">\r\n                  <p className=\"text-sm text-blue-800\">Access: Pharmacy Module Only</p>\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n          \r\n          {form.role === 'admin' && (\r\n            <>\r\n              <div className=\"md:col-span-3\">\r\n                <div className=\"flex items-center\">\r\n                  <input \r\n                    type=\"checkbox\"\r\n                    className=\"rounded border-gray-300 focus:ring-brand-500\" \r\n                    checked={form.superAdmin || false} \r\n                    onChange={e => setForm(f => ({...f, superAdmin: e.target.checked}))} \r\n                    id=\"superAdmin\"\r\n                  />\r\n                  <label htmlFor=\"superAdmin\" className=\"ml-2 block text-sm\">Super Admin</label>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"md:col-span-3\">\r\n                <div className=\"flex items-center\">\r\n                  <input \r\n                    type=\"checkbox\"\r\n                    className=\"rounded border-gray-300 focus:ring-brand-500\" \r\n                    checked={form.allowedToRegisterUsers ?? true} \r\n                    onChange={e => setForm(f => ({...f, allowedToRegisterUsers: e.target.checked}))} \r\n                    id=\"allowedToRegisterUsers\"\r\n                  />\r\n                  <label htmlFor=\"allowedToRegisterUsers\" className=\"ml-2 block text-sm\">Allowed to register users</label>\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n          \r\n          {/* Action Buttons */}\r\n          <div className=\"md:col-span-6 flex items-end justify-end gap-2 mt-4\">\r\n            <button \r\n              type=\"button\"\r\n              className=\"btn btn-secondary\"\r\n              onClick={resetForm}\r\n            >\r\n              Reset Form\r\n            </button>\r\n            <button \r\n              type=\"button\"\r\n              className=\"btn btn-secondary\"\r\n              onClick={() => window.history.back()}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button \r\n              className=\"btn btn-primary\" \r\n              disabled={loading}\r\n            >\r\n              Create User\r\n            </button>\r\n          </div>\r\n        </form>\r\n        {error && <p className=\"text-red-600 text-sm mt-2\">{error}</p>}\r\n        {success && <p className=\"text-green-600 text-sm mt-2\">{success}</p>}\r\n      </div>\r\n\r\n      {/* Created User Modal */}\r\n      {showCreatedUserModal && createdUserData && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-xl p-6 max-w-md w-full mx-4\">\r\n            <h3 className=\"text-lg font-semibold mb-4\">User Created Successfully</h3>\r\n            \r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">User ID</label>\r\n                <div className=\"flex mt-1\">\r\n                  <input \r\n                    type=\"text\"\r\n                    className=\"rounded-l-xl border-gray-300 focus:ring-brand-500 flex-grow\" \r\n                    value={createdUserData.userId} \r\n                    readOnly\r\n                  />\r\n                  <button \r\n                    className=\"bg-gray-200 hover:bg-gray-300 px-3 rounded-r-xl\"\r\n                    onClick={() => copyToClipboard(createdUserData.userId)}\r\n                  >\r\n                    Copy\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              \r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Password</label>\r\n                <div className=\"flex mt-1\">\r\n                  <input \r\n                    type={showPassword ? \"text\" : \"password\"}\r\n                    className=\"rounded-l-xl border-gray-300 focus:ring-brand-500 flex-grow\" \r\n                    value={createdUserData.password} \r\n                    readOnly\r\n                  />\r\n                  <button \r\n                    className=\"bg-gray-200 hover:bg-gray-300 px-3 rounded-r-xl\"\r\n                    onClick={() => setShowPassword(!showPassword)}\r\n                  >\r\n                    {showPassword ? 'Hide' : 'Show'}\r\n                  </button>\r\n                </div>\r\n                <div className=\"flex gap-2 mt-1\">\r\n                  <button \r\n                    className=\"text-xs text-blue-600 hover:text-blue-800\"\r\n                    onClick={() => copyToClipboard(createdUserData.password)}\r\n                  >\r\n                    Copy\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex justify-end gap-2 mt-6\">\r\n              <button \r\n                className=\"btn btn-secondary\"\r\n                onClick={() => {\r\n                  setShowCreatedUserModal(false);\r\n                  setCreatedUserData(null);\r\n                }}\r\n              >\r\n                Close\r\n              </button>\r\n              <button \r\n                className=\"btn btn-primary\"\r\n                onClick={() => {\r\n                  setShowCreatedUserModal(false);\r\n                  setCreatedUserData(null);\r\n                  // Navigate to user management page\r\n                  window.location.hash = '/clinic/admin/users';\r\n                }}\r\n              >\r\n                Go to Manage Users\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserRegistration;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}